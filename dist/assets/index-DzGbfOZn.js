(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))h(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const v of y.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&h(v)}).observe(document,{childList:!0,subtree:!0});function u(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerPolicy&&(y.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?y.credentials="include":m.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function h(m){if(m.ep)return;m.ep=!0;const y=u(m);fetch(m.href,y)}})();function Xh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fu={exports:{}},qo={},Uu={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function xp(){if(fh)return Ze;fh=1;var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,O={};function W(j,U,ce){this.props=j,this.context=U,this.refs=O,this.updater=ce||z}W.prototype.isReactComponent={},W.prototype.setState=function(j,U){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,U,"setState")},W.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Q(){}Q.prototype=W.prototype;function $(j,U,ce){this.props=j,this.context=U,this.refs=O,this.updater=ce||z}var ee=$.prototype=new Q;ee.constructor=$,A(ee,W.prototype),ee.isPureReactComponent=!0;var ue=Array.isArray,Pe=Object.prototype.hasOwnProperty,oe={current:null},Te={key:!0,ref:!0,__self:!0,__source:!0};function je(j,U,ce){var se,ie={},ne=null,Ee=null;if(U!=null)for(se in U.ref!==void 0&&(Ee=U.ref),U.key!==void 0&&(ne=""+U.key),U)Pe.call(U,se)&&!Te.hasOwnProperty(se)&&(ie[se]=U[se]);var ke=arguments.length-2;if(ke===1)ie.children=ce;else if(1<ke){for(var Re=Array(ke),Qe=0;Qe<ke;Qe++)Re[Qe]=arguments[Qe+2];ie.children=Re}if(j&&j.defaultProps)for(se in ke=j.defaultProps,ke)ie[se]===void 0&&(ie[se]=ke[se]);return{$$typeof:s,type:j,key:ne,ref:Ee,props:ie,_owner:oe.current}}function Ue(j,U){return{$$typeof:s,type:j.type,key:U,ref:j.ref,props:j.props,_owner:j._owner}}function Oe(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function te(j){var U={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ce){return U[ce]})}var J=/\/+/g;function ve(j,U){return typeof j=="object"&&j!==null&&j.key!=null?te(""+j.key):U.toString(36)}function _e(j,U,ce,se,ie){var ne=typeof j;(ne==="undefined"||ne==="boolean")&&(j=null);var Ee=!1;if(j===null)Ee=!0;else switch(ne){case"string":case"number":Ee=!0;break;case"object":switch(j.$$typeof){case s:case a:Ee=!0}}if(Ee)return Ee=j,ie=ie(Ee),j=se===""?"."+ve(Ee,0):se,ue(ie)?(ce="",j!=null&&(ce=j.replace(J,"$&/")+"/"),_e(ie,U,ce,"",function(Qe){return Qe})):ie!=null&&(Oe(ie)&&(ie=Ue(ie,ce+(!ie.key||Ee&&Ee.key===ie.key?"":(""+ie.key).replace(J,"$&/")+"/")+j)),U.push(ie)),1;if(Ee=0,se=se===""?".":se+":",ue(j))for(var ke=0;ke<j.length;ke++){ne=j[ke];var Re=se+ve(ne,ke);Ee+=_e(ne,U,ce,Re,ie)}else if(Re=b(j),typeof Re=="function")for(j=Re.call(j),ke=0;!(ne=j.next()).done;)ne=ne.value,Re=se+ve(ne,ke++),Ee+=_e(ne,U,ce,Re,ie);else if(ne==="object")throw U=String(j),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ee}function we(j,U,ce){if(j==null)return j;var se=[],ie=0;return _e(j,se,"","",function(ne){return U.call(ce,ne,ie++)}),se}function xe(j){if(j._status===-1){var U=j._result;U=U(),U.then(function(ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=ce)},function(ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=ce)}),j._status===-1&&(j._status=0,j._result=U)}if(j._status===1)return j._result.default;throw j._result}var Le={current:null},F={transition:null},fe={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:F,ReactCurrentOwner:oe};function G(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:we,forEach:function(j,U,ce){we(j,function(){U.apply(this,arguments)},ce)},count:function(j){var U=0;return we(j,function(){U++}),U},toArray:function(j){return we(j,function(U){return U})||[]},only:function(j){if(!Oe(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ze.Component=W,Ze.Fragment=u,Ze.Profiler=m,Ze.PureComponent=$,Ze.StrictMode=h,Ze.Suspense=w,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ze.act=G,Ze.cloneElement=function(j,U,ce){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var se=A({},j.props),ie=j.key,ne=j.ref,Ee=j._owner;if(U!=null){if(U.ref!==void 0&&(ne=U.ref,Ee=oe.current),U.key!==void 0&&(ie=""+U.key),j.type&&j.type.defaultProps)var ke=j.type.defaultProps;for(Re in U)Pe.call(U,Re)&&!Te.hasOwnProperty(Re)&&(se[Re]=U[Re]===void 0&&ke!==void 0?ke[Re]:U[Re])}var Re=arguments.length-2;if(Re===1)se.children=ce;else if(1<Re){ke=Array(Re);for(var Qe=0;Qe<Re;Qe++)ke[Qe]=arguments[Qe+2];se.children=ke}return{$$typeof:s,type:j.type,key:ie,ref:ne,props:se,_owner:Ee}},Ze.createContext=function(j){return j={$$typeof:v,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:y,_context:j},j.Consumer=j},Ze.createElement=je,Ze.createFactory=function(j){var U=je.bind(null,j);return U.type=j,U},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(j){return{$$typeof:x,render:j}},Ze.isValidElement=Oe,Ze.lazy=function(j){return{$$typeof:M,_payload:{_status:-1,_result:j},_init:xe}},Ze.memo=function(j,U){return{$$typeof:S,type:j,compare:U===void 0?null:U}},Ze.startTransition=function(j){var U=F.transition;F.transition={};try{j()}finally{F.transition=U}},Ze.unstable_act=G,Ze.useCallback=function(j,U){return Le.current.useCallback(j,U)},Ze.useContext=function(j){return Le.current.useContext(j)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(j){return Le.current.useDeferredValue(j)},Ze.useEffect=function(j,U){return Le.current.useEffect(j,U)},Ze.useId=function(){return Le.current.useId()},Ze.useImperativeHandle=function(j,U,ce){return Le.current.useImperativeHandle(j,U,ce)},Ze.useInsertionEffect=function(j,U){return Le.current.useInsertionEffect(j,U)},Ze.useLayoutEffect=function(j,U){return Le.current.useLayoutEffect(j,U)},Ze.useMemo=function(j,U){return Le.current.useMemo(j,U)},Ze.useReducer=function(j,U,ce){return Le.current.useReducer(j,U,ce)},Ze.useRef=function(j){return Le.current.useRef(j)},Ze.useState=function(j){return Le.current.useState(j)},Ze.useSyncExternalStore=function(j,U,ce){return Le.current.useSyncExternalStore(j,U,ce)},Ze.useTransition=function(){return Le.current.useTransition()},Ze.version="18.3.1",Ze}var ph;function Jo(){return ph||(ph=1,Uu.exports=xp()),Uu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh;function wp(){if(mh)return qo;mh=1;var s=Jo(),a=Symbol.for("react.element"),u=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,m=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function v(x,w,S){var M,T={},b=null,z=null;S!==void 0&&(b=""+S),w.key!==void 0&&(b=""+w.key),w.ref!==void 0&&(z=w.ref);for(M in w)h.call(w,M)&&!y.hasOwnProperty(M)&&(T[M]=w[M]);if(x&&x.defaultProps)for(M in w=x.defaultProps,w)T[M]===void 0&&(T[M]=w[M]);return{$$typeof:a,type:x,key:b,ref:z,props:T,_owner:m.current}}return qo.Fragment=u,qo.jsx=v,qo.jsxs=v,qo}var gh;function kp(){return gh||(gh=1,Fu.exports=wp()),Fu.exports}var f=kp(),P=Jo();const ac=Xh(P);var ll={},Wu={exports:{}},Tn={},Gu={exports:{}},$u={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function Sp(){return yh||(yh=1,(function(s){function a(F,fe){var G=F.length;F.push(fe);e:for(;0<G;){var j=G-1>>>1,U=F[j];if(0<m(U,fe))F[j]=fe,F[G]=U,G=j;else break e}}function u(F){return F.length===0?null:F[0]}function h(F){if(F.length===0)return null;var fe=F[0],G=F.pop();if(G!==fe){F[0]=G;e:for(var j=0,U=F.length,ce=U>>>1;j<ce;){var se=2*(j+1)-1,ie=F[se],ne=se+1,Ee=F[ne];if(0>m(ie,G))ne<U&&0>m(Ee,ie)?(F[j]=Ee,F[ne]=G,j=ne):(F[j]=ie,F[se]=G,j=se);else if(ne<U&&0>m(Ee,G))F[j]=Ee,F[ne]=G,j=ne;else break e}}return fe}function m(F,fe){var G=F.sortIndex-fe.sortIndex;return G!==0?G:F.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;s.unstable_now=function(){return y.now()}}else{var v=Date,x=v.now();s.unstable_now=function(){return v.now()-x}}var w=[],S=[],M=1,T=null,b=3,z=!1,A=!1,O=!1,W=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(F){for(var fe=u(S);fe!==null;){if(fe.callback===null)h(S);else if(fe.startTime<=F)h(S),fe.sortIndex=fe.expirationTime,a(w,fe);else break;fe=u(S)}}function ue(F){if(O=!1,ee(F),!A)if(u(w)!==null)A=!0,xe(Pe);else{var fe=u(S);fe!==null&&Le(ue,fe.startTime-F)}}function Pe(F,fe){A=!1,O&&(O=!1,Q(je),je=-1),z=!0;var G=b;try{for(ee(fe),T=u(w);T!==null&&(!(T.expirationTime>fe)||F&&!te());){var j=T.callback;if(typeof j=="function"){T.callback=null,b=T.priorityLevel;var U=j(T.expirationTime<=fe);fe=s.unstable_now(),typeof U=="function"?T.callback=U:T===u(w)&&h(w),ee(fe)}else h(w);T=u(w)}if(T!==null)var ce=!0;else{var se=u(S);se!==null&&Le(ue,se.startTime-fe),ce=!1}return ce}finally{T=null,b=G,z=!1}}var oe=!1,Te=null,je=-1,Ue=5,Oe=-1;function te(){return!(s.unstable_now()-Oe<Ue)}function J(){if(Te!==null){var F=s.unstable_now();Oe=F;var fe=!0;try{fe=Te(!0,F)}finally{fe?ve():(oe=!1,Te=null)}}else oe=!1}var ve;if(typeof $=="function")ve=function(){$(J)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,we=_e.port2;_e.port1.onmessage=J,ve=function(){we.postMessage(null)}}else ve=function(){W(J,0)};function xe(F){Te=F,oe||(oe=!0,ve())}function Le(F,fe){je=W(function(){F(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_continueExecution=function(){A||z||(A=!0,xe(Pe))},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_getFirstCallbackNode=function(){return u(w)},s.unstable_next=function(F){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var G=b;b=fe;try{return F()}finally{b=G}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(F,fe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=b;b=F;try{return fe()}finally{b=G}},s.unstable_scheduleCallback=function(F,fe,G){var j=s.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?j+G:j):G=j,F){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=G+U,F={id:M++,callback:fe,priorityLevel:F,startTime:G,expirationTime:U,sortIndex:-1},G>j?(F.sortIndex=G,a(S,F),u(w)===null&&F===u(S)&&(O?(Q(je),je=-1):O=!0,Le(ue,G-j))):(F.sortIndex=U,a(w,F),A||z||(A=!0,xe(Pe))),F},s.unstable_shouldYield=te,s.unstable_wrapCallback=function(F){var fe=b;return function(){var G=b;b=fe;try{return F.apply(this,arguments)}finally{b=G}}}})($u)),$u}var _h;function bp(){return _h||(_h=1,Gu.exports=Sp()),Gu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh;function Cp(){if(vh)return Tn;vh=1;var s=Jo(),a=bp();function u(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,m={};function y(e,n){v(e,n),v(e+"Capture",n)}function v(e,n){for(m[e]=n,e=0;e<n.length;e++)h.add(n[e])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},T={};function b(e){return w.call(T,e)?!0:w.call(M,e)?!1:S.test(e)?T[e]=!0:(M[e]=!0,!1)}function z(e,n,r,l){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A(e,n,r,l){if(n===null||typeof n>"u"||z(e,n,r,l))return!0;if(l)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function O(e,n,r,l,d,p,_){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=p,this.removeEmptyString=_}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){W[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];W[n]=new O(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){W[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){W[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){W[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){W[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){W[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){W[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){W[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Q,$);W[n]=new O(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Q,$);W[n]=new O(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Q,$);W[n]=new O(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){W[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),W.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){W[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function ee(e,n,r,l){var d=W.hasOwnProperty(n)?W[n]:null;(d!==null?d.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(A(n,r,d,l)&&(r=null),l||d===null?b(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(n=d.attributeName,l=d.attributeNamespace,r===null?e.removeAttribute(n):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,l?e.setAttributeNS(l,n,r):e.setAttribute(n,r))))}var ue=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pe=Symbol.for("react.element"),oe=Symbol.for("react.portal"),Te=Symbol.for("react.fragment"),je=Symbol.for("react.strict_mode"),Ue=Symbol.for("react.profiler"),Oe=Symbol.for("react.provider"),te=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),F=Symbol.iterator;function fe(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,j;function U(e){if(j===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);j=n&&n[1]||""}return`
`+j+e}var ce=!1;function se(e,n){if(!e||ce)return"";ce=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Z){var l=Z}Reflect.construct(e,[],n)}else{try{n.call()}catch(Z){l=Z}e.call(n.prototype)}else{try{throw Error()}catch(Z){l=Z}e()}}catch(Z){if(Z&&l&&typeof Z.stack=="string"){for(var d=Z.stack.split(`
`),p=l.stack.split(`
`),_=d.length-1,C=p.length-1;1<=_&&0<=C&&d[_]!==p[C];)C--;for(;1<=_&&0<=C;_--,C--)if(d[_]!==p[C]){if(_!==1||C!==1)do if(_--,C--,0>C||d[_]!==p[C]){var N=`
`+d[_].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=_&&0<=C);break}}}finally{ce=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function ie(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=se(e.type,!1),e;case 11:return e=se(e.type.render,!1),e;case 1:return e=se(e.type,!0),e;default:return""}}function ne(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Te:return"Fragment";case oe:return"Portal";case Ue:return"Profiler";case je:return"StrictMode";case ve:return"Suspense";case _e:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case te:return(e.displayName||"Context")+".Consumer";case Oe:return(e._context.displayName||"Context")+".Provider";case J:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case we:return n=e.displayName||null,n!==null?n:ne(e.type)||"Memo";case xe:n=e._payload,e=e._init;try{return ne(e(n))}catch{}}return null}function Ee(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(n);case 8:return n===je?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ke(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Re(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Qe(e){var n=Re(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,p=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(_){l=""+_,p.call(this,_)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ve(e){e._valueTracker||(e._valueTracker=Qe(e))}function ut(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return e&&(l=Re(e)?e.checked?"true":"false":e.value),e=l,e!==r?(n.setValue(e),!0):!1}function Nt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wt(e,n){var r=n.checked;return G({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Be(e,n){var r=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;r=ke(n.value!=null?n.value:r),e._wrapperState={initialChecked:l,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function bt(e,n){n=n.checked,n!=null&&ee(e,"checked",n,!1)}function Ye(e,n){bt(e,n);var r=ke(n.value),l=n.type;if(r!=null)l==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Lt(e,n.type,r):n.hasOwnProperty("defaultValue")&&Lt(e,n.type,ke(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Rt(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Lt(e,n,r){(n!=="number"||Nt(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var nn=Array.isArray;function fn(e,n,r,l){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+ke(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function pi(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(u(91));return G({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oi(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(u(92));if(nn(r)){if(1<r.length)throw Error(u(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:ke(r)}}function or(e,n){var r=ke(n.value),l=ke(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),l!=null&&(e.defaultValue=""+l)}function ar(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function jt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rn(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?jt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pn,pn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,l,d){MSApp.execUnsafeLocalFunction(function(){return e(n,r,l,d)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Pn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Tt(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var sn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zn=["Webkit","ms","Moz","O"];Object.keys(sn).forEach(function(e){Zn.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),sn[n]=sn[e]})});function mt(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||sn.hasOwnProperty(e)&&sn[e]?(""+n).trim():n+"px"}function Fn(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var l=r.indexOf("--")===0,d=mt(r,n[r],l);r==="float"&&(r="cssFloat"),l?e.setProperty(r,d):e[r]=d}}var on=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ut(e,n){if(n){if(on[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(u(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(u(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(u(61))}if(n.style!=null&&typeof n.style!="object")throw Error(u(62))}}function Nn(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=null;function Ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var It=null,mn=null,Yt=null;function gi(e){if(e=Ki(e)){if(typeof It!="function")throw Error(u(280));var n=e.stateNode;n&&(n=Rs(n),It(e.stateNode,e.type,n))}}function yi(e){mn?Yt?Yt.push(e):Yt=[e]:mn=e}function Ri(){if(mn){var e=mn,n=Yt;if(Yt=mn=null,gi(e),n)for(e=0;e<n.length;e++)gi(n[e])}}function Un(e,n){return e(n)}function Di(){}var ni=!1;function ii(e,n,r){if(ni)return e(n,r);ni=!0;try{return Un(e,n,r)}finally{ni=!1,(mn!==null||Yt!==null)&&(Di(),Ri())}}function gn(e,n){var r=e.stateNode;if(r===null)return null;var l=Rs(r);if(l===null)return null;r=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(u(231,n,typeof r));return r}var yn=!1;if(x)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){yn=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{yn=!1}function et(e,n,r,l,d,p,_,C,N){var Z=Array.prototype.slice.call(arguments,3);try{n.apply(r,Z)}catch(q){this.onError(q)}}var rt=!1,me=null,lr=!1,_i=null,ur={onError:function(e){rt=!0,me=e}};function ao(e,n,r,l,d,p,_,C,N){rt=!1,me=null,et.apply(ur,arguments)}function Fr(e,n,r,l,d,p,_,C,N){if(ao.apply(this,arguments),rt){if(rt){var Z=me;rt=!1,me=null}else throw Error(u(198));lr||(lr=!0,_i=Z)}}function ht(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function Wt(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Dt(e){if(ht(e)!==e)throw Error(u(188))}function lo(e){var n=e.alternate;if(!n){if(n=ht(e),n===null)throw Error(u(188));return n!==e?null:e}for(var r=e,l=n;;){var d=r.return;if(d===null)break;var p=d.alternate;if(p===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===r)return Dt(d),e;if(p===l)return Dt(d),n;p=p.sibling}throw Error(u(188))}if(r.return!==l.return)r=d,l=p;else{for(var _=!1,C=d.child;C;){if(C===r){_=!0,r=d,l=p;break}if(C===l){_=!0,l=d,r=p;break}C=C.sibling}if(!_){for(C=p.child;C;){if(C===r){_=!0,r=p,l=d;break}if(C===l){_=!0,l=p,r=d;break}C=C.sibling}if(!_)throw Error(u(189))}}if(r.alternate!==l)throw Error(u(190))}if(r.tag!==3)throw Error(u(188));return r.stateNode.current===r?e:n}function gs(e){return e=lo(e),e!==null?Ur(e):null}function Ur(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Ur(e);if(n!==null)return n;e=e.sibling}return null}var ys=a.unstable_scheduleCallback,vi=a.unstable_cancelCallback,uo=a.unstable_shouldYield,jn=a.unstable_requestPaint,ot=a.unstable_now,co=a.unstable_getCurrentPriorityLevel,Wr=a.unstable_ImmediatePriority,_s=a.unstable_UserBlockingPriority,cr=a.unstable_NormalPriority,Gr=a.unstable_LowPriority,xi=a.unstable_IdlePriority,Bi=null,an=null;function Hi(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Bi,e,void 0,(e.current.flags&128)===128)}catch{}}var Ae=Math.clz32?Math.clz32:wi,st=Math.log,dr=Math.LN2;function wi(e){return e>>>=0,e===0?32:31-(st(e)/dr|0)|0}var In=64,ki=4194304;function Ie(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tt(e,n){var r=e.pendingLanes;if(r===0)return 0;var l=0,d=e.suspendedLanes,p=e.pingedLanes,_=r&268435455;if(_!==0){var C=_&~d;C!==0?l=Ie(C):(p&=_,p!==0&&(l=Ie(p)))}else _=r&~d,_!==0?l=Ie(_):p!==0&&(l=Ie(p));if(l===0)return 0;if(n!==0&&n!==l&&(n&d)===0&&(d=l&-l,p=n&-n,d>=p||d===16&&(p&4194240)!==0))return n;if((l&4)!==0&&(l|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)r=31-Ae(n),d=1<<r,l|=e[r],n&=~d;return l}function $r(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(e,n){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes;0<p;){var _=31-Ae(p),C=1<<_,N=d[_];N===-1?((C&r)===0||(C&l)!==0)&&(d[_]=$r(C,n)):N<=n&&(e.expiredLanes|=C),p&=~C}}function Bt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vs(){var e=In;return In<<=1,(In&4194240)===0&&(In=64),e}function ri(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function qt(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Ae(n),e[n]=r}function ct(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Ae(r),p=1<<d;n[d]=0,l[d]=-1,e[d]=-1,r&=~p}}function _n(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var l=31-Ae(r),d=1<<l;d&n|e[l]&n&&(e[l]|=n),r&=~d}}var He=0;function si(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ae,de,Me,qe,ft,Xe=!1,Je=[],gt=null,yt=null,kt=null,Gt=new Map,Ne=new Map,Mt=[],nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ho(e,n){switch(e){case"focusin":case"focusout":gt=null;break;case"dragenter":case"dragleave":yt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Gt.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(n.pointerId)}}function Zi(e,n,r,l,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[d]},n!==null&&(n=Ki(n),n!==null&&de(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function fo(e,n,r,l,d){switch(n){case"focusin":return gt=Zi(gt,e,n,r,l,d),!0;case"dragenter":return yt=Zi(yt,e,n,r,l,d),!0;case"mouseover":return kt=Zi(kt,e,n,r,l,d),!0;case"pointerover":var p=d.pointerId;return Gt.set(p,Zi(Gt.get(p)||null,e,n,r,l,d)),!0;case"gotpointercapture":return p=d.pointerId,Ne.set(p,Zi(Ne.get(p)||null,e,n,r,l,d)),!0}return!1}function xs(e){var n=qi(e.target);if(n!==null){var r=ht(n);if(r!==null){if(n=r.tag,n===13){if(n=Wt(r),n!==null){e.blockedOn=n,ft(e.priority,function(){Me(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gn(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Ss(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);mi=l,r.target.dispatchEvent(l),mi=null}else return n=Ki(r),n!==null&&de(n),e.blockedOn=r,!1;n.shift()}return!0}function ws(e,n,r){Gn(e)&&r.delete(n)}function Vr(){Xe=!1,gt!==null&&Gn(gt)&&(gt=null),yt!==null&&Gn(yt)&&(yt=null),kt!==null&&Gn(kt)&&(kt=null),Gt.forEach(ws),Ne.forEach(ws)}function _t(e,n){e.blockedOn===n&&(e.blockedOn=null,Xe||(Xe=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vr)))}function Mn(e){function n(d){return _t(d,e)}if(0<Je.length){_t(Je[0],e);for(var r=1;r<Je.length;r++){var l=Je[r];l.blockedOn===e&&(l.blockedOn=null)}}for(gt!==null&&_t(gt,e),yt!==null&&_t(yt,e),kt!==null&&_t(kt,e),Gt.forEach(n),Ne.forEach(n),r=0;r<Mt.length;r++)l=Mt[r],l.blockedOn===e&&(l.blockedOn=null);for(;0<Mt.length&&(r=Mt[0],r.blockedOn===null);)xs(r),r.blockedOn===null&&Mt.shift()}var Fi=ue.ReactCurrentBatchConfig,Yr=!0;function Sl(e,n,r,l){var d=He,p=Fi.transition;Fi.transition=null;try{He=1,qr(e,n,r,l)}finally{He=d,Fi.transition=p}}function na(e,n,r,l){var d=He,p=Fi.transition;Fi.transition=null;try{He=4,qr(e,n,r,l)}finally{He=d,Fi.transition=p}}function qr(e,n,r,l){if(Yr){var d=Ss(e,n,r,l);if(d===null)t(e,n,l,ks,r),ho(e,l);else if(fo(d,e,n,r,l))l.stopPropagation();else if(ho(e,l),n&4&&-1<nt.indexOf(e)){for(;d!==null;){var p=Ki(d);if(p!==null&&ae(p),p=Ss(e,n,r,l),p===null&&t(e,n,l,ks,r),p===d)break;d=p}d!==null&&l.stopPropagation()}else t(e,n,l,null,r)}}var ks=null;function Ss(e,n,r,l){if(ks=null,e=Ln(l),e=qi(e),e!==null)if(n=ht(e),n===null)e=null;else if(r=n.tag,r===13){if(e=Wt(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ks=e,null}function Fe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(co()){case Wr:return 1;case _s:return 4;case cr:case Gr:return 16;case xi:return 536870912;default:return 16}default:return 16}}var Si=null,ln=null,bi=null;function po(){if(bi)return bi;var e,n=ln,r=n.length,l,d="value"in Si?Si.value:Si.textContent,p=d.length;for(e=0;e<r&&n[e]===d[e];e++);var _=r-e;for(l=1;l<=_&&n[r-l]===d[p-l];l++);return bi=d.slice(e,1<l?1-l:void 0)}function bs(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fr(){return!0}function ia(){return!1}function Kt(e){function n(r,l,d,p,_){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(r=e[C],this[C]=r?r(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?fr:ia,this.isPropagationStopped=ia,this}return G(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),n}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Kt(pr),Ui=G({},pr,{view:0,detail:0}),bl=Kt(Ui),vn,go,mr,zn=G({},Ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mr&&(mr&&e.type==="mousemove"?(vn=e.screenX-mr.screenX,go=e.screenY-mr.screenY):go=vn=0,mr=e),vn)},movementY:function(e){return"movementY"in e?e.movementY:go}}),yo=Kt(zn),ra=G({},zn,{dataTransfer:0}),_o=Kt(ra),Cl=G({},Ui,{relatedTarget:0}),Cs=Kt(Cl),sa=G({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Tl=Kt(sa),El=G({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vo=Kt(El),Pl=G({},pr,{data:0}),xo=Kt(Pl),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ts={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nl(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Wi[e])?!!n[e]:!1}function Gi(){return Nl}var xn=G({},Ui,{key:function(e){if(e.key){var n=oa[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ts[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aa=Kt(xn),la=G({},zn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=Kt(la),wo=G({},Ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),ko=Kt(wo),Ll=G({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jl=Kt(Ll),ca=G({},zn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Il=Kt(ca),An=[9,13,27,32],Ci=x&&"CompositionEvent"in window,Kr=null;x&&"documentMode"in document&&(Kr=document.documentMode);var oi=x&&"TextEvent"in window&&!Kr,da=x&&(!Ci||Kr&&8<Kr&&11>=Kr),$i=" ",ha=!1;function gr(e,n){switch(e){case"keyup":return An.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ai=!1;function Ml(e,n){switch(e){case"compositionend":return So(n);case"keypress":return n.which!==32?null:(ha=!0,$i);case"textInput":return e=n.data,e===$i&&ha?null:e;default:return null}}function Ti(e,n){if(ai)return e==="compositionend"||!Ci&&gr(e,n)?(e=po(),bi=ln=Si=null,ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return da&&n.locale!=="ko"?null:n.data;default:return null}}var Es={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Es[e.type]:n==="textarea"}function Ps(e,n,r,l){yi(l),n=o(n,"onChange"),0<n.length&&(r=new mo("onChange","change",null,r,l),e.push({event:r,listeners:n}))}var Qr=null,un=null;function zl(e){Io(e,0)}function li(e){var n=Qi(e);if(ut(n))return e}function Al(e,n){if(e==="change")return n}var $n=!1;if(x){var yr;if(x){var Ns="oninput"in document;if(!Ns){var Ls=document.createElement("div");Ls.setAttribute("oninput","return;"),Ns=typeof Ls.oninput=="function"}yr=Ns}else yr=!1;$n=yr&&(!document.documentMode||9<document.documentMode)}function Xr(){Qr&&(Qr.detachEvent("onpropertychange",js),un=Qr=null)}function js(e){if(e.propertyName==="value"&&li(un)){var n=[];Ps(n,un,e,Ln(e)),ii(zl,n)}}function Is(e,n,r){e==="focusin"?(Xr(),Qr=n,un=r,Qr.attachEvent("onpropertychange",js)):e==="focusout"&&Xr()}function _r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return li(un)}function Ms(e,n){if(e==="click")return li(n)}function bo(e,n){if(e==="input"||e==="change")return li(n)}function pa(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var On=typeof Object.is=="function"?Object.is:pa;function Ei(e,n){if(On(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!w.call(n,d)||!On(e[d],n[d]))return!1}return!0}function ma(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Co(e,n){var r=ma(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=n&&l>=n)return{node:r,offset:n-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ma(r)}}function ga(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ga(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function To(){for(var e=window,n=Nt();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Nt(e.document)}return n}function Eo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Vn(e){var n=To(),r=e.focusedElem,l=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&ga(r.ownerDocument.documentElement,r)){if(l!==null&&Eo(r)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,p=Math.min(l.start,d);l=l.end===void 0?p:Math.min(l.end,d),!e.extend&&p>l&&(d=l,l=p,p=d),d=Co(r,p);var _=Co(r,l);d&&_&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(n=n.createRange(),n.setStart(d.node,d.offset),e.removeAllRanges(),p>l?(e.addRange(n),e.extend(_.node,_.offset)):(n.setEnd(_.node,_.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zs=x&&"documentMode"in document&&11>=document.documentMode,vr=null,xr=null,Jr=null,As=!1;function ya(e,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;As||vr==null||vr!==Nt(l)||(l=vr,"selectionStart"in l&&Eo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Jr&&Ei(Jr,l)||(Jr=l,l=o(xr,"onSelect"),0<l.length&&(n=new mo("onSelect","select",null,n,r),e.push({event:n,listeners:l}),n.target=vr)))}function Pi(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var wr={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionend:Pi("Transition","TransitionEnd")},Ni={},Po={};x&&(Po=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function es(e){if(Ni[e])return Ni[e];if(!wr[e])return e;var n=wr[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Po)return Ni[e]=n[r];return e}var _a=es("animationend"),Yn=es("animationiteration"),No=es("animationstart"),Lo=es("transitionend"),kr=new Map,va="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,n){kr.set(e,n),y(n,[e])}for(var Vi=0;Vi<va.length;Vi++){var Os=va[Vi],xa=Os.toLowerCase(),Ol=Os[0].toUpperCase()+Os.slice(1);Rn(xa,"on"+Ol)}Rn(_a,"onAnimationEnd"),Rn(Yn,"onAnimationIteration"),Rn(No,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Lo,"onTransitionEnd"),v("onMouseEnter",["mouseout","mouseover"]),v("onMouseLeave",["mouseout","mouseover"]),v("onPointerEnter",["pointerout","pointerover"]),v("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function jo(e,n,r){var l=e.type||"unknown-event";e.currentTarget=r,Fr(l,n,void 0,e),e.currentTarget=null}function Io(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var p=void 0;if(n)for(var _=l.length-1;0<=_;_--){var C=l[_],N=C.instance,Z=C.currentTarget;if(C=C.listener,N!==p&&d.isPropagationStopped())break e;jo(d,C,Z),p=N}else for(_=0;_<l.length;_++){if(C=l[_],N=C.instance,Z=C.currentTarget,C=C.listener,N!==p&&d.isPropagationStopped())break e;jo(d,C,Z),p=N}}}if(lr)throw e=_i,lr=!1,_i=null,e}function it(e,n){var r=n[Er];r===void 0&&(r=n[Er]=new Set);var l=e+"__bubble";r.has(l)||(ka(n,e,2,!1),r.add(l))}function Mo(e,n,r){var l=0;n&&(l|=4),ka(r,e,l,n)}var ts="_reactListening"+Math.random().toString(36).slice(2);function br(e){if(!e[ts]){e[ts]=!0,h.forEach(function(r){r!=="selectionchange"&&(wa.has(r)||Mo(r,!1,e),Mo(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ts]||(n[ts]=!0,Mo("selectionchange",!1,n))}}function ka(e,n,r,l){switch(Fe(n)){case 1:var d=Sl;break;case 4:d=na;break;default:d=qr}r=d.bind(null,n,r,e),d=void 0,!yn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function t(e,n,r,l,d){var p=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var C=l.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&(N=_.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;_=_.return}for(;C!==null;){if(_=qi(C),_===null)return;if(N=_.tag,N===5||N===6){l=p=_;continue e}C=C.parentNode}}l=l.return}ii(function(){var Z=p,q=Ln(r),K=[];e:{var Y=kr.get(e);if(Y!==void 0){var le=mo,pe=e;switch(e){case"keypress":if(bs(r)===0)break e;case"keydown":case"keyup":le=aa;break;case"focusin":pe="focus",le=Cs;break;case"focusout":pe="blur",le=Cs;break;case"beforeblur":case"afterblur":le=Cs;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=_o;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=ko;break;case _a:case Yn:case No:le=Tl;break;case Lo:le=jl;break;case"scroll":le=bl;break;case"wheel":le=Il;break;case"copy":case"cut":case"paste":le=vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ua}var ge=(n&4)!==0,Ct=!ge&&e==="scroll",D=ge?Y!==null?Y+"Capture":null:Y;ge=[];for(var I=Z,B;I!==null;){B=I;var X=B.stateNode;if(B.tag===5&&X!==null&&(B=X,D!==null&&(X=gn(I,D),X!=null&&ge.push(i(I,X,B)))),Ct)break;I=I.return}0<ge.length&&(Y=new le(Y,pe,null,r,q),K.push({event:Y,listeners:ge}))}}if((n&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",le=e==="mouseout"||e==="pointerout",Y&&r!==mi&&(pe=r.relatedTarget||r.fromElement)&&(qi(pe)||pe[Ke]))break e;if((le||Y)&&(Y=q.window===q?q:(Y=q.ownerDocument)?Y.defaultView||Y.parentWindow:window,le?(pe=r.relatedTarget||r.toElement,le=Z,pe=pe?qi(pe):null,pe!==null&&(Ct=ht(pe),pe!==Ct||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(le=null,pe=Z),le!==pe)){if(ge=yo,X="onMouseLeave",D="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(ge=ua,X="onPointerLeave",D="onPointerEnter",I="pointer"),Ct=le==null?Y:Qi(le),B=pe==null?Y:Qi(pe),Y=new ge(X,I+"leave",le,r,q),Y.target=Ct,Y.relatedTarget=B,X=null,qi(q)===Z&&(ge=new ge(D,I+"enter",pe,r,q),ge.target=B,ge.relatedTarget=Ct,X=ge),Ct=X,le&&pe)t:{for(ge=le,D=pe,I=0,B=ge;B;B=c(B))I++;for(B=0,X=D;X;X=c(X))B++;for(;0<I-B;)ge=c(ge),I--;for(;0<B-I;)D=c(D),B--;for(;I--;){if(ge===D||D!==null&&ge===D.alternate)break t;ge=c(ge),D=c(D)}ge=null}else ge=null;le!==null&&g(K,Y,le,ge,!1),pe!==null&&Ct!==null&&g(K,Ct,pe,ge,!0)}}e:{if(Y=Z?Qi(Z):window,le=Y.nodeName&&Y.nodeName.toLowerCase(),le==="select"||le==="input"&&Y.type==="file")var ye=Al;else if(fa(Y))if($n)ye=bo;else{ye=_r;var be=Is}else(le=Y.nodeName)&&le.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(ye=Ms);if(ye&&(ye=ye(e,Z))){Ps(K,ye,r,q);break e}be&&be(e,Y,Z),e==="focusout"&&(be=Y._wrapperState)&&be.controlled&&Y.type==="number"&&Lt(Y,"number",Y.value)}switch(be=Z?Qi(Z):window,e){case"focusin":(fa(be)||be.contentEditable==="true")&&(vr=be,xr=Z,Jr=null);break;case"focusout":Jr=xr=vr=null;break;case"mousedown":As=!0;break;case"contextmenu":case"mouseup":case"dragend":As=!1,ya(K,r,q);break;case"selectionchange":if(zs)break;case"keydown":case"keyup":ya(K,r,q)}var Ce;if(Ci)e:{switch(e){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ai?gr(e,r)&&(ze="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ze="onCompositionStart");ze&&(da&&r.locale!=="ko"&&(ai||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ai&&(Ce=po()):(Si=q,ln="value"in Si?Si.value:Si.textContent,ai=!0)),be=o(Z,ze),0<be.length&&(ze=new xo(ze,e,null,r,q),K.push({event:ze,listeners:be}),Ce?ze.data=Ce:(Ce=So(r),Ce!==null&&(ze.data=Ce)))),(Ce=oi?Ml(e,r):Ti(e,r))&&(Z=o(Z,"onBeforeInput"),0<Z.length&&(q=new xo("onBeforeInput","beforeinput",null,r,q),K.push({event:q,listeners:Z}),q.data=Ce))}Io(K,n)})}function i(e,n,r){return{instance:e,listener:n,currentTarget:r}}function o(e,n){for(var r=n+"Capture",l=[];e!==null;){var d=e,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=gn(e,r),p!=null&&l.unshift(i(e,p,d)),p=gn(e,n),p!=null&&l.push(i(e,p,d))),e=e.return}return l}function c(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g(e,n,r,l,d){for(var p=n._reactName,_=[];r!==null&&r!==l;){var C=r,N=C.alternate,Z=C.stateNode;if(N!==null&&N===l)break;C.tag===5&&Z!==null&&(C=Z,d?(N=gn(r,p),N!=null&&_.unshift(i(r,N,C))):d||(N=gn(r,p),N!=null&&_.push(i(r,N,C)))),r=r.return}_.length!==0&&e.push({event:n,listeners:_})}var k=/\r\n?/g,E=/\u0000|\uFFFD/g;function R(e){return(typeof e=="string"?e:""+e).replace(k,`
`).replace(E,"")}function H(e,n,r){if(n=R(n),R(e)!==n&&r)throw Error(u(425))}function V(){}var re=null,Se=null;function De(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var zt=typeof setTimeout=="function"?setTimeout:void 0,Et=typeof clearTimeout=="function"?clearTimeout:void 0,cn=typeof Promise=="function"?Promise:void 0,Qt=typeof queueMicrotask=="function"?queueMicrotask:typeof cn<"u"?function(e){return cn.resolve(null).then(e).catch(Cr)}:zt;function Cr(e){setTimeout(function(){throw e})}function zo(e,n){var r=n,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(l===0){e.removeChild(d),Mn(n);return}l--}else r!=="$"&&r!=="$?"&&r!=="$!"||l++;r=d}while(r);Mn(n)}function Li(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Sa(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),qn="__reactFiber$"+Yi,Tr="__reactProps$"+Yi,Ke="__reactContainer$"+Yi,Er="__reactEvents$"+Yi,Rl="__reactListeners$"+Yi,Dl="__reactHandles$"+Yi;function qi(e){var n=e[qn];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Ke]||r[qn]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Sa(e);e!==null;){if(r=e[qn])return r;e=Sa(e)}return n}e=r,r=e.parentNode}return null}function Ki(e){return e=e[qn]||e[Ke],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(u(33))}function Rs(e){return e[Tr]||null}var Bl=[],Ds=-1;function Pr(e){return{current:e}}function dt(e){0>Ds||(e.current=Bl[Ds],Bl[Ds]=null,Ds--)}function at(e,n){Ds++,Bl[Ds]=e.current,e.current=n}var Nr={},Xt=Pr(Nr),wn=Pr(!1),ns=Nr;function Bs(e,n){var r=e.type.contextTypes;if(!r)return Nr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in r)d[p]=n[p];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=d),d}function kn(e){return e=e.childContextTypes,e!=null}function ba(){dt(wn),dt(Xt)}function Ac(e,n,r){if(Xt.current!==Nr)throw Error(u(168));at(Xt,n),at(wn,r)}function Oc(e,n,r){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return r;l=l.getChildContext();for(var d in l)if(!(d in n))throw Error(u(108,Ee(e)||"Unknown",d));return G({},r,l)}function Ca(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nr,ns=Xt.current,at(Xt,e),at(wn,wn.current),!0}function Rc(e,n,r){var l=e.stateNode;if(!l)throw Error(u(169));r?(e=Oc(e,n,ns),l.__reactInternalMemoizedMergedChildContext=e,dt(wn),dt(Xt),at(Xt,e)):dt(wn),at(wn,r)}var Xi=null,Ta=!1,Hl=!1;function Dc(e){Xi===null?Xi=[e]:Xi.push(e)}function Bf(e){Ta=!0,Dc(e)}function Lr(){if(!Hl&&Xi!==null){Hl=!0;var e=0,n=He;try{var r=Xi;for(He=1;e<r.length;e++){var l=r[e];do l=l(!0);while(l!==null)}Xi=null,Ta=!1}catch(d){throw Xi!==null&&(Xi=Xi.slice(e+1)),ys(Wr,Lr),d}finally{He=n,Hl=!1}}return null}var Hs=[],Zs=0,Ea=null,Pa=0,Kn=[],Qn=0,is=null,Ji=1,er="";function rs(e,n){Hs[Zs++]=Pa,Hs[Zs++]=Ea,Ea=e,Pa=n}function Bc(e,n,r){Kn[Qn++]=Ji,Kn[Qn++]=er,Kn[Qn++]=is,is=e;var l=Ji;e=er;var d=32-Ae(l)-1;l&=~(1<<d),r+=1;var p=32-Ae(n)+d;if(30<p){var _=d-d%5;p=(l&(1<<_)-1).toString(32),l>>=_,d-=_,Ji=1<<32-Ae(n)+d|r<<d|l,er=p+e}else Ji=1<<p|r<<d|l,er=e}function Zl(e){e.return!==null&&(rs(e,1),Bc(e,1,0))}function Fl(e){for(;e===Ea;)Ea=Hs[--Zs],Hs[Zs]=null,Pa=Hs[--Zs],Hs[Zs]=null;for(;e===is;)is=Kn[--Qn],Kn[Qn]=null,er=Kn[--Qn],Kn[Qn]=null,Ji=Kn[--Qn],Kn[Qn]=null}var Dn=null,Bn=null,pt=!1,ui=null;function Hc(e,n){var r=ti(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function Zc(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Dn=e,Bn=Li(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Dn=e,Bn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=is!==null?{id:Ji,overflow:er}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=ti(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,Dn=e,Bn=null,!0):!1;default:return!1}}function Ul(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wl(e){if(pt){var n=Bn;if(n){var r=n;if(!Zc(e,n)){if(Ul(e))throw Error(u(418));n=Li(r.nextSibling);var l=Dn;n&&Zc(e,n)?Hc(l,r):(e.flags=e.flags&-4097|2,pt=!1,Dn=e)}}else{if(Ul(e))throw Error(u(418));e.flags=e.flags&-4097|2,pt=!1,Dn=e}}}function Fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dn=e}function Na(e){if(e!==Dn)return!1;if(!pt)return Fc(e),pt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!De(e.type,e.memoizedProps)),n&&(n=Bn)){if(Ul(e))throw Uc(),Error(u(418));for(;n;)Hc(e,n),n=Li(n.nextSibling)}if(Fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){Bn=Li(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}Bn=null}}else Bn=Dn?Li(e.stateNode.nextSibling):null;return!0}function Uc(){for(var e=Bn;e;)e=Li(e.nextSibling)}function Fs(){Bn=Dn=null,pt=!1}function Gl(e){ui===null?ui=[e]:ui.push(e)}var Hf=ue.ReactCurrentBatchConfig;function Ao(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(u(309));var l=r.stateNode}if(!l)throw Error(u(147,e));var d=l,p=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===p?n.ref:(n=function(_){var C=d.refs;_===null?delete C[p]:C[p]=_},n._stringRef=p,n)}if(typeof e!="string")throw Error(u(284));if(!r._owner)throw Error(u(290,e))}return e}function La(e,n){throw e=Object.prototype.toString.call(n),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Wc(e){var n=e._init;return n(e._payload)}function Gc(e){function n(D,I){if(e){var B=D.deletions;B===null?(D.deletions=[I],D.flags|=16):B.push(I)}}function r(D,I){if(!e)return null;for(;I!==null;)n(D,I),I=I.sibling;return null}function l(D,I){for(D=new Map;I!==null;)I.key!==null?D.set(I.key,I):D.set(I.index,I),I=I.sibling;return D}function d(D,I){return D=Dr(D,I),D.index=0,D.sibling=null,D}function p(D,I,B){return D.index=B,e?(B=D.alternate,B!==null?(B=B.index,B<I?(D.flags|=2,I):B):(D.flags|=2,I)):(D.flags|=1048576,I)}function _(D){return e&&D.alternate===null&&(D.flags|=2),D}function C(D,I,B,X){return I===null||I.tag!==6?(I=Ou(B,D.mode,X),I.return=D,I):(I=d(I,B),I.return=D,I)}function N(D,I,B,X){var ye=B.type;return ye===Te?q(D,I,B.props.children,X,B.key):I!==null&&(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===xe&&Wc(ye)===I.type)?(X=d(I,B.props),X.ref=Ao(D,I,B),X.return=D,X):(X=el(B.type,B.key,B.props,null,D.mode,X),X.ref=Ao(D,I,B),X.return=D,X)}function Z(D,I,B,X){return I===null||I.tag!==4||I.stateNode.containerInfo!==B.containerInfo||I.stateNode.implementation!==B.implementation?(I=Ru(B,D.mode,X),I.return=D,I):(I=d(I,B.children||[]),I.return=D,I)}function q(D,I,B,X,ye){return I===null||I.tag!==7?(I=hs(B,D.mode,X,ye),I.return=D,I):(I=d(I,B),I.return=D,I)}function K(D,I,B){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Ou(""+I,D.mode,B),I.return=D,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Pe:return B=el(I.type,I.key,I.props,null,D.mode,B),B.ref=Ao(D,null,I),B.return=D,B;case oe:return I=Ru(I,D.mode,B),I.return=D,I;case xe:var X=I._init;return K(D,X(I._payload),B)}if(nn(I)||fe(I))return I=hs(I,D.mode,B,null),I.return=D,I;La(D,I)}return null}function Y(D,I,B,X){var ye=I!==null?I.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ye!==null?null:C(D,I,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Pe:return B.key===ye?N(D,I,B,X):null;case oe:return B.key===ye?Z(D,I,B,X):null;case xe:return ye=B._init,Y(D,I,ye(B._payload),X)}if(nn(B)||fe(B))return ye!==null?null:q(D,I,B,X,null);La(D,B)}return null}function le(D,I,B,X,ye){if(typeof X=="string"&&X!==""||typeof X=="number")return D=D.get(B)||null,C(I,D,""+X,ye);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Pe:return D=D.get(X.key===null?B:X.key)||null,N(I,D,X,ye);case oe:return D=D.get(X.key===null?B:X.key)||null,Z(I,D,X,ye);case xe:var be=X._init;return le(D,I,B,be(X._payload),ye)}if(nn(X)||fe(X))return D=D.get(B)||null,q(I,D,X,ye,null);La(I,X)}return null}function pe(D,I,B,X){for(var ye=null,be=null,Ce=I,ze=I=0,Ft=null;Ce!==null&&ze<B.length;ze++){Ce.index>ze?(Ft=Ce,Ce=null):Ft=Ce.sibling;var $e=Y(D,Ce,B[ze],X);if($e===null){Ce===null&&(Ce=Ft);break}e&&Ce&&$e.alternate===null&&n(D,Ce),I=p($e,I,ze),be===null?ye=$e:be.sibling=$e,be=$e,Ce=Ft}if(ze===B.length)return r(D,Ce),pt&&rs(D,ze),ye;if(Ce===null){for(;ze<B.length;ze++)Ce=K(D,B[ze],X),Ce!==null&&(I=p(Ce,I,ze),be===null?ye=Ce:be.sibling=Ce,be=Ce);return pt&&rs(D,ze),ye}for(Ce=l(D,Ce);ze<B.length;ze++)Ft=le(Ce,D,ze,B[ze],X),Ft!==null&&(e&&Ft.alternate!==null&&Ce.delete(Ft.key===null?ze:Ft.key),I=p(Ft,I,ze),be===null?ye=Ft:be.sibling=Ft,be=Ft);return e&&Ce.forEach(function(Br){return n(D,Br)}),pt&&rs(D,ze),ye}function ge(D,I,B,X){var ye=fe(B);if(typeof ye!="function")throw Error(u(150));if(B=ye.call(B),B==null)throw Error(u(151));for(var be=ye=null,Ce=I,ze=I=0,Ft=null,$e=B.next();Ce!==null&&!$e.done;ze++,$e=B.next()){Ce.index>ze?(Ft=Ce,Ce=null):Ft=Ce.sibling;var Br=Y(D,Ce,$e.value,X);if(Br===null){Ce===null&&(Ce=Ft);break}e&&Ce&&Br.alternate===null&&n(D,Ce),I=p(Br,I,ze),be===null?ye=Br:be.sibling=Br,be=Br,Ce=Ft}if($e.done)return r(D,Ce),pt&&rs(D,ze),ye;if(Ce===null){for(;!$e.done;ze++,$e=B.next())$e=K(D,$e.value,X),$e!==null&&(I=p($e,I,ze),be===null?ye=$e:be.sibling=$e,be=$e);return pt&&rs(D,ze),ye}for(Ce=l(D,Ce);!$e.done;ze++,$e=B.next())$e=le(Ce,D,ze,$e.value,X),$e!==null&&(e&&$e.alternate!==null&&Ce.delete($e.key===null?ze:$e.key),I=p($e,I,ze),be===null?ye=$e:be.sibling=$e,be=$e);return e&&Ce.forEach(function(vp){return n(D,vp)}),pt&&rs(D,ze),ye}function Ct(D,I,B,X){if(typeof B=="object"&&B!==null&&B.type===Te&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Pe:e:{for(var ye=B.key,be=I;be!==null;){if(be.key===ye){if(ye=B.type,ye===Te){if(be.tag===7){r(D,be.sibling),I=d(be,B.props.children),I.return=D,D=I;break e}}else if(be.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===xe&&Wc(ye)===be.type){r(D,be.sibling),I=d(be,B.props),I.ref=Ao(D,be,B),I.return=D,D=I;break e}r(D,be);break}else n(D,be);be=be.sibling}B.type===Te?(I=hs(B.props.children,D.mode,X,B.key),I.return=D,D=I):(X=el(B.type,B.key,B.props,null,D.mode,X),X.ref=Ao(D,I,B),X.return=D,D=X)}return _(D);case oe:e:{for(be=B.key;I!==null;){if(I.key===be)if(I.tag===4&&I.stateNode.containerInfo===B.containerInfo&&I.stateNode.implementation===B.implementation){r(D,I.sibling),I=d(I,B.children||[]),I.return=D,D=I;break e}else{r(D,I);break}else n(D,I);I=I.sibling}I=Ru(B,D.mode,X),I.return=D,D=I}return _(D);case xe:return be=B._init,Ct(D,I,be(B._payload),X)}if(nn(B))return pe(D,I,B,X);if(fe(B))return ge(D,I,B,X);La(D,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,I!==null&&I.tag===6?(r(D,I.sibling),I=d(I,B),I.return=D,D=I):(r(D,I),I=Ou(B,D.mode,X),I.return=D,D=I),_(D)):r(D,I)}return Ct}var Us=Gc(!0),$c=Gc(!1),ja=Pr(null),Ia=null,Ws=null,$l=null;function Vl(){$l=Ws=Ia=null}function Yl(e){var n=ja.current;dt(ja),e._currentValue=n}function ql(e,n,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===r)break;e=e.return}}function Gs(e,n){Ia=e,$l=Ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Sn=!0),e.firstContext=null)}function Xn(e){var n=e._currentValue;if($l!==e)if(e={context:e,memoizedValue:n,next:null},Ws===null){if(Ia===null)throw Error(u(308));Ws=e,Ia.dependencies={lanes:0,firstContext:e}}else Ws=Ws.next=e;return n}var ss=null;function Kl(e){ss===null?ss=[e]:ss.push(e)}function Vc(e,n,r,l){var d=n.interleaved;return d===null?(r.next=r,Kl(n)):(r.next=d.next,d.next=r),n.interleaved=r,tr(e,l)}function tr(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var jr=!1;function Ql(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ir(e,n,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,tr(e,r)}return d=l.interleaved,d===null?(n.next=n,Kl(l)):(n.next=d.next,d.next=n),l.interleaved=n,tr(e,r)}function Ma(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,_n(e,r)}}function qc(e,n){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var _={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};p===null?d=p=_:p=p.next=_,r=r.next}while(r!==null);p===null?d=p=n:p=p.next=n}else d=p=n;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:l.shared,effects:l.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function za(e,n,r,l){var d=e.updateQueue;jr=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,Z=N.next;N.next=null,_===null?p=Z:_.next=Z,_=N;var q=e.alternate;q!==null&&(q=q.updateQueue,C=q.lastBaseUpdate,C!==_&&(C===null?q.firstBaseUpdate=Z:C.next=Z,q.lastBaseUpdate=N))}if(p!==null){var K=d.baseState;_=0,q=Z=N=null,C=p;do{var Y=C.lane,le=C.eventTime;if((l&Y)===Y){q!==null&&(q=q.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var pe=e,ge=C;switch(Y=n,le=r,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){K=pe.call(le,K,Y);break e}K=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,Y=typeof pe=="function"?pe.call(le,K,Y):pe,Y==null)break e;K=G({},K,Y);break e;case 2:jr=!0}}C.callback!==null&&C.lane!==0&&(e.flags|=64,Y=d.effects,Y===null?d.effects=[C]:Y.push(C))}else le={eventTime:le,lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},q===null?(Z=q=le,N=K):q=q.next=le,_|=Y;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(q===null&&(N=K),d.baseState=N,d.firstBaseUpdate=Z,d.lastBaseUpdate=q,n=d.shared.interleaved,n!==null){d=n;do _|=d.lane,d=d.next;while(d!==n)}else p===null&&(d.shared.lanes=0);ls|=_,e.lanes=_,e.memoizedState=K}}function Kc(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],d=l.callback;if(d!==null){if(l.callback=null,l=r,typeof d!="function")throw Error(u(191,d));d.call(l)}}}var Oo={},ji=Pr(Oo),Ro=Pr(Oo),Do=Pr(Oo);function os(e){if(e===Oo)throw Error(u(174));return e}function Xl(e,n){switch(at(Do,n),at(Ro,e),at(ji,Oo),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:rn(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=rn(n,e)}dt(ji),at(ji,n)}function $s(){dt(ji),dt(Ro),dt(Do)}function Qc(e){os(Do.current);var n=os(ji.current),r=rn(n,e.type);n!==r&&(at(Ro,e),at(ji,r))}function Jl(e){Ro.current===e&&(dt(ji),dt(Ro))}var vt=Pr(0);function Aa(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var eu=[];function tu(){for(var e=0;e<eu.length;e++)eu[e]._workInProgressVersionPrimary=null;eu.length=0}var Oa=ue.ReactCurrentDispatcher,nu=ue.ReactCurrentBatchConfig,as=0,xt=null,At=null,Ht=null,Ra=!1,Bo=!1,Ho=0,Zf=0;function Jt(){throw Error(u(321))}function iu(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!On(e[r],n[r]))return!1;return!0}function ru(e,n,r,l,d,p){if(as=p,xt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Oa.current=e===null||e.memoizedState===null?Gf:$f,e=r(l,d),Bo){p=0;do{if(Bo=!1,Ho=0,25<=p)throw Error(u(301));p+=1,Ht=At=null,n.updateQueue=null,Oa.current=Vf,e=r(l,d)}while(Bo)}if(Oa.current=Ha,n=At!==null&&At.next!==null,as=0,Ht=At=xt=null,Ra=!1,n)throw Error(u(300));return e}function su(){var e=Ho!==0;return Ho=0,e}function Ii(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?xt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function Jn(){if(At===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var n=Ht===null?xt.memoizedState:Ht.next;if(n!==null)Ht=n,At=e;else{if(e===null)throw Error(u(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ht===null?xt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function Zo(e,n){return typeof n=="function"?n(e):n}function ou(e){var n=Jn(),r=n.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=e;var l=At,d=l.baseQueue,p=r.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}l.baseQueue=d=p,r.pending=null}if(d!==null){p=d.next,l=l.baseState;var C=_=null,N=null,Z=p;do{var q=Z.lane;if((as&q)===q)N!==null&&(N=N.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),l=Z.hasEagerState?Z.eagerState:e(l,Z.action);else{var K={lane:q,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};N===null?(C=N=K,_=l):N=N.next=K,xt.lanes|=q,ls|=q}Z=Z.next}while(Z!==null&&Z!==p);N===null?_=l:N.next=C,On(l,n.memoizedState)||(Sn=!0),n.memoizedState=l,n.baseState=_,n.baseQueue=N,r.lastRenderedState=l}if(e=r.interleaved,e!==null){d=e;do p=d.lane,xt.lanes|=p,ls|=p,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function au(e){var n=Jn(),r=n.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,p=n.memoizedState;if(d!==null){r.pending=null;var _=d=d.next;do p=e(p,_.action),_=_.next;while(_!==d);On(p,n.memoizedState)||(Sn=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),r.lastRenderedState=p}return[p,l]}function Xc(){}function Jc(e,n){var r=xt,l=Jn(),d=n(),p=!On(l.memoizedState,d);if(p&&(l.memoizedState=d,Sn=!0),l=l.queue,lu(nd.bind(null,r,l,e),[e]),l.getSnapshot!==n||p||Ht!==null&&Ht.memoizedState.tag&1){if(r.flags|=2048,Fo(9,td.bind(null,r,l,d,n),void 0,null),Zt===null)throw Error(u(349));(as&30)!==0||ed(r,n,d)}return d}function ed(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=xt.updateQueue,n===null?(n={lastEffect:null,stores:null},xt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function td(e,n,r,l){n.value=r,n.getSnapshot=l,id(n)&&rd(e)}function nd(e,n,r){return r(function(){id(n)&&rd(e)})}function id(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!On(e,r)}catch{return!0}}function rd(e){var n=tr(e,1);n!==null&&fi(n,e,1,-1)}function sd(e){var n=Ii();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e},n.queue=e,e=e.dispatch=Wf.bind(null,xt,e),[n.memoizedState,e]}function Fo(e,n,r,l){return e={tag:e,create:n,destroy:r,deps:l,next:null},n=xt.updateQueue,n===null?(n={lastEffect:null,stores:null},xt.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,n.lastEffect=e)),e}function od(){return Jn().memoizedState}function Da(e,n,r,l){var d=Ii();xt.flags|=e,d.memoizedState=Fo(1|n,r,void 0,l===void 0?null:l)}function Ba(e,n,r,l){var d=Jn();l=l===void 0?null:l;var p=void 0;if(At!==null){var _=At.memoizedState;if(p=_.destroy,l!==null&&iu(l,_.deps)){d.memoizedState=Fo(n,r,p,l);return}}xt.flags|=e,d.memoizedState=Fo(1|n,r,p,l)}function ad(e,n){return Da(8390656,8,e,n)}function lu(e,n){return Ba(2048,8,e,n)}function ld(e,n){return Ba(4,2,e,n)}function ud(e,n){return Ba(4,4,e,n)}function cd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function dd(e,n,r){return r=r!=null?r.concat([e]):null,Ba(4,4,cd.bind(null,n,e),r)}function uu(){}function hd(e,n){var r=Jn();n=n===void 0?null:n;var l=r.memoizedState;return l!==null&&n!==null&&iu(n,l[1])?l[0]:(r.memoizedState=[e,n],e)}function fd(e,n){var r=Jn();n=n===void 0?null:n;var l=r.memoizedState;return l!==null&&n!==null&&iu(n,l[1])?l[0]:(e=e(),r.memoizedState=[e,n],e)}function pd(e,n,r){return(as&21)===0?(e.baseState&&(e.baseState=!1,Sn=!0),e.memoizedState=r):(On(r,n)||(r=vs(),xt.lanes|=r,ls|=r,e.baseState=!0),n)}function Ff(e,n){var r=He;He=r!==0&&4>r?r:4,e(!0);var l=nu.transition;nu.transition={};try{e(!1),n()}finally{He=r,nu.transition=l}}function md(){return Jn().memoizedState}function Uf(e,n,r){var l=Or(e);if(r={lane:l,action:r,hasEagerState:!1,eagerState:null,next:null},gd(e))yd(n,r);else if(r=Vc(e,n,r,l),r!==null){var d=hn();fi(r,e,l,d),_d(r,n,l)}}function Wf(e,n,r){var l=Or(e),d={lane:l,action:r,hasEagerState:!1,eagerState:null,next:null};if(gd(e))yd(n,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var _=n.lastRenderedState,C=p(_,r);if(d.hasEagerState=!0,d.eagerState=C,On(C,_)){var N=n.interleaved;N===null?(d.next=d,Kl(n)):(d.next=N.next,N.next=d),n.interleaved=d;return}}catch{}finally{}r=Vc(e,n,d,l),r!==null&&(d=hn(),fi(r,e,l,d),_d(r,n,l))}}function gd(e){var n=e.alternate;return e===xt||n!==null&&n===xt}function yd(e,n){Bo=Ra=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function _d(e,n,r){if((r&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,_n(e,r)}}var Ha={readContext:Xn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},Gf={readContext:Xn,useCallback:function(e,n){return Ii().memoizedState=[e,n===void 0?null:n],e},useContext:Xn,useEffect:ad,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,Da(4194308,4,cd.bind(null,n,e),r)},useLayoutEffect:function(e,n){return Da(4194308,4,e,n)},useInsertionEffect:function(e,n){return Da(4,2,e,n)},useMemo:function(e,n){var r=Ii();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var l=Ii();return n=r!==void 0?r(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Uf.bind(null,xt,e),[l.memoizedState,e]},useRef:function(e){var n=Ii();return e={current:e},n.memoizedState=e},useState:sd,useDebugValue:uu,useDeferredValue:function(e){return Ii().memoizedState=e},useTransition:function(){var e=sd(!1),n=e[0];return e=Ff.bind(null,e[1]),Ii().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var l=xt,d=Ii();if(pt){if(r===void 0)throw Error(u(407));r=r()}else{if(r=n(),Zt===null)throw Error(u(349));(as&30)!==0||ed(l,n,r)}d.memoizedState=r;var p={value:r,getSnapshot:n};return d.queue=p,ad(nd.bind(null,l,p,e),[e]),l.flags|=2048,Fo(9,td.bind(null,l,p,r,n),void 0,null),r},useId:function(){var e=Ii(),n=Zt.identifierPrefix;if(pt){var r=er,l=Ji;r=(l&~(1<<32-Ae(l)-1)).toString(32)+r,n=":"+n+"R"+r,r=Ho++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=Zf++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},$f={readContext:Xn,useCallback:hd,useContext:Xn,useEffect:lu,useImperativeHandle:dd,useInsertionEffect:ld,useLayoutEffect:ud,useMemo:fd,useReducer:ou,useRef:od,useState:function(){return ou(Zo)},useDebugValue:uu,useDeferredValue:function(e){var n=Jn();return pd(n,At.memoizedState,e)},useTransition:function(){var e=ou(Zo)[0],n=Jn().memoizedState;return[e,n]},useMutableSource:Xc,useSyncExternalStore:Jc,useId:md,unstable_isNewReconciler:!1},Vf={readContext:Xn,useCallback:hd,useContext:Xn,useEffect:lu,useImperativeHandle:dd,useInsertionEffect:ld,useLayoutEffect:ud,useMemo:fd,useReducer:au,useRef:od,useState:function(){return au(Zo)},useDebugValue:uu,useDeferredValue:function(e){var n=Jn();return At===null?n.memoizedState=e:pd(n,At.memoizedState,e)},useTransition:function(){var e=au(Zo)[0],n=Jn().memoizedState;return[e,n]},useMutableSource:Xc,useSyncExternalStore:Jc,useId:md,unstable_isNewReconciler:!1};function ci(e,n){if(e&&e.defaultProps){n=G({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function cu(e,n,r,l){n=e.memoizedState,r=r(l,n),r=r==null?n:G({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Za={isMounted:function(e){return(e=e._reactInternals)?ht(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var l=hn(),d=Or(e),p=nr(l,d);p.payload=n,r!=null&&(p.callback=r),n=Ir(e,p,d),n!==null&&(fi(n,e,d,l),Ma(n,e,d))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var l=hn(),d=Or(e),p=nr(l,d);p.tag=1,p.payload=n,r!=null&&(p.callback=r),n=Ir(e,p,d),n!==null&&(fi(n,e,d,l),Ma(n,e,d))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=hn(),l=Or(e),d=nr(r,l);d.tag=2,n!=null&&(d.callback=n),n=Ir(e,d,l),n!==null&&(fi(n,e,l,r),Ma(n,e,l))}};function vd(e,n,r,l,d,p,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,_):n.prototype&&n.prototype.isPureReactComponent?!Ei(r,l)||!Ei(d,p):!0}function xd(e,n,r){var l=!1,d=Nr,p=n.contextType;return typeof p=="object"&&p!==null?p=Xn(p):(d=kn(n)?ns:Xt.current,l=n.contextTypes,p=(l=l!=null)?Bs(e,d):Nr),n=new n(r,p),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Za,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=p),n}function wd(e,n,r,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==e&&Za.enqueueReplaceState(n,n.state,null)}function du(e,n,r,l){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},Ql(e);var p=n.contextType;typeof p=="object"&&p!==null?d.context=Xn(p):(p=kn(n)?ns:Xt.current,d.context=Bs(e,p)),d.state=e.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(cu(e,n,p,r),d.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(n=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),n!==d.state&&Za.enqueueReplaceState(d,d.state,null),za(e,r,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Vs(e,n){try{var r="",l=n;do r+=ie(l),l=l.return;while(l);var d=r}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:n,stack:d,digest:null}}function hu(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function fu(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var Yf=typeof WeakMap=="function"?WeakMap:Map;function kd(e,n,r){r=nr(-1,r),r.tag=3,r.payload={element:null};var l=n.value;return r.callback=function(){Ya||(Ya=!0,Pu=l),fu(e,n)},r}function Sd(e,n,r){r=nr(-1,r),r.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=n.value;r.payload=function(){return l(d)},r.callback=function(){fu(e,n)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(r.callback=function(){fu(e,n),typeof l!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})}),r}function bd(e,n,r){var l=e.pingCache;if(l===null){l=e.pingCache=new Yf;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(r)||(d.add(r),e=lp.bind(null,e,n,r),n.then(e,e))}function Cd(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Td(e,n,r,l,d){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=nr(-1,1),n.tag=2,Ir(r,n,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var qf=ue.ReactCurrentOwner,Sn=!1;function dn(e,n,r,l){n.child=e===null?$c(n,null,r,l):Us(n,e.child,r,l)}function Ed(e,n,r,l,d){r=r.render;var p=n.ref;return Gs(n,d),l=ru(e,n,r,l,p,d),r=su(),e!==null&&!Sn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~d,ir(e,n,d)):(pt&&r&&Zl(n),n.flags|=1,dn(e,n,l,d),n.child)}function Pd(e,n,r,l,d){if(e===null){var p=r.type;return typeof p=="function"&&!Au(p)&&p.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=p,Nd(e,n,p,l,d)):(e=el(r.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,(e.lanes&d)===0){var _=p.memoizedProps;if(r=r.compare,r=r!==null?r:Ei,r(_,l)&&e.ref===n.ref)return ir(e,n,d)}return n.flags|=1,e=Dr(p,l),e.ref=n.ref,e.return=n,n.child=e}function Nd(e,n,r,l,d){if(e!==null){var p=e.memoizedProps;if(Ei(p,l)&&e.ref===n.ref)if(Sn=!1,n.pendingProps=l=p,(e.lanes&d)!==0)(e.flags&131072)!==0&&(Sn=!0);else return n.lanes=e.lanes,ir(e,n,d)}return pu(e,n,r,l,d)}function Ld(e,n,r){var l=n.pendingProps,d=l.children,p=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(qs,Hn),Hn|=r;else{if((r&1073741824)===0)return e=p!==null?p.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,at(qs,Hn),Hn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=p!==null?p.baseLanes:r,at(qs,Hn),Hn|=l}else p!==null?(l=p.baseLanes|r,n.memoizedState=null):l=r,at(qs,Hn),Hn|=l;return dn(e,n,d,r),n.child}function jd(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function pu(e,n,r,l,d){var p=kn(r)?ns:Xt.current;return p=Bs(n,p),Gs(n,d),r=ru(e,n,r,l,p,d),l=su(),e!==null&&!Sn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~d,ir(e,n,d)):(pt&&l&&Zl(n),n.flags|=1,dn(e,n,r,d),n.child)}function Id(e,n,r,l,d){if(kn(r)){var p=!0;Ca(n)}else p=!1;if(Gs(n,d),n.stateNode===null)Ua(e,n),xd(n,r,l),du(n,r,l,d),l=!0;else if(e===null){var _=n.stateNode,C=n.memoizedProps;_.props=C;var N=_.context,Z=r.contextType;typeof Z=="object"&&Z!==null?Z=Xn(Z):(Z=kn(r)?ns:Xt.current,Z=Bs(n,Z));var q=r.getDerivedStateFromProps,K=typeof q=="function"||typeof _.getSnapshotBeforeUpdate=="function";K||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==l||N!==Z)&&wd(n,_,l,Z),jr=!1;var Y=n.memoizedState;_.state=Y,za(n,l,_,d),N=n.memoizedState,C!==l||Y!==N||wn.current||jr?(typeof q=="function"&&(cu(n,r,q,l),N=n.memoizedState),(C=jr||vd(n,r,C,l,Y,N,Z))?(K||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(n.flags|=4194308)):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=N),_.props=l,_.state=N,_.context=Z,l=C):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{_=n.stateNode,Yc(e,n),C=n.memoizedProps,Z=n.type===n.elementType?C:ci(n.type,C),_.props=Z,K=n.pendingProps,Y=_.context,N=r.contextType,typeof N=="object"&&N!==null?N=Xn(N):(N=kn(r)?ns:Xt.current,N=Bs(n,N));var le=r.getDerivedStateFromProps;(q=typeof le=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==K||Y!==N)&&wd(n,_,l,N),jr=!1,Y=n.memoizedState,_.state=Y,za(n,l,_,d);var pe=n.memoizedState;C!==K||Y!==pe||wn.current||jr?(typeof le=="function"&&(cu(n,r,le,l),pe=n.memoizedState),(Z=jr||vd(n,r,Z,l,Y,pe,N)||!1)?(q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(l,pe,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(l,pe,N)),typeof _.componentDidUpdate=="function"&&(n.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=pe),_.props=l,_.state=pe,_.context=N,l=Z):(typeof _.componentDidUpdate!="function"||C===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),l=!1)}return mu(e,n,r,l,p,d)}function mu(e,n,r,l,d,p){jd(e,n);var _=(n.flags&128)!==0;if(!l&&!_)return d&&Rc(n,r,!1),ir(e,n,p);l=n.stateNode,qf.current=n;var C=_&&typeof r.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&_?(n.child=Us(n,e.child,null,p),n.child=Us(n,null,C,p)):dn(e,n,C,p),n.memoizedState=l.state,d&&Rc(n,r,!0),n.child}function Md(e){var n=e.stateNode;n.pendingContext?Ac(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ac(e,n.context,!1),Xl(e,n.containerInfo)}function zd(e,n,r,l,d){return Fs(),Gl(d),n.flags|=256,dn(e,n,r,l),n.child}var gu={dehydrated:null,treeContext:null,retryLane:0};function yu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ad(e,n,r){var l=n.pendingProps,d=vt.current,p=!1,_=(n.flags&128)!==0,C;if((C=_)||(C=e!==null&&e.memoizedState===null?!1:(d&2)!==0),C?(p=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),at(vt,d&1),e===null)return Wl(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(_=l.children,e=l.fallback,p?(l=n.mode,p=n.child,_={mode:"hidden",children:_},(l&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=tl(_,l,0,null),e=hs(e,l,r,null),p.return=n,e.return=n,p.sibling=e,n.child=p,n.child.memoizedState=yu(r),n.memoizedState=gu,e):_u(n,_));if(d=e.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Kf(e,n,_,l,C,d,r);if(p){p=l.fallback,_=n.mode,d=e.child,C=d.sibling;var N={mode:"hidden",children:l.children};return(_&1)===0&&n.child!==d?(l=n.child,l.childLanes=0,l.pendingProps=N,n.deletions=null):(l=Dr(d,N),l.subtreeFlags=d.subtreeFlags&14680064),C!==null?p=Dr(C,p):(p=hs(p,_,r,null),p.flags|=2),p.return=n,l.return=n,l.sibling=p,n.child=l,l=p,p=n.child,_=e.child.memoizedState,_=_===null?yu(r):{baseLanes:_.baseLanes|r,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=e.childLanes&~r,n.memoizedState=gu,l}return p=e.child,e=p.sibling,l=Dr(p,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=r),l.return=n,l.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=l,n.memoizedState=null,l}function _u(e,n){return n=tl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Fa(e,n,r,l){return l!==null&&Gl(l),Us(n,e.child,null,r),e=_u(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Kf(e,n,r,l,d,p,_){if(r)return n.flags&256?(n.flags&=-257,l=hu(Error(u(422))),Fa(e,n,_,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(p=l.fallback,d=n.mode,l=tl({mode:"visible",children:l.children},d,0,null),p=hs(p,d,_,null),p.flags|=2,l.return=n,p.return=n,l.sibling=p,n.child=l,(n.mode&1)!==0&&Us(n,e.child,null,_),n.child.memoizedState=yu(_),n.memoizedState=gu,p);if((n.mode&1)===0)return Fa(e,n,_,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var C=l.dgst;return l=C,p=Error(u(419)),l=hu(p,l,void 0),Fa(e,n,_,l)}if(C=(_&e.childLanes)!==0,Sn||C){if(l=Zt,l!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|_))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,tr(e,d),fi(l,e,d,-1))}return zu(),l=hu(Error(u(421))),Fa(e,n,_,l)}return d.data==="$?"?(n.flags|=128,n.child=e.child,n=up.bind(null,e),d._reactRetry=n,null):(e=p.treeContext,Bn=Li(d.nextSibling),Dn=n,pt=!0,ui=null,e!==null&&(Kn[Qn++]=Ji,Kn[Qn++]=er,Kn[Qn++]=is,Ji=e.id,er=e.overflow,is=n),n=_u(n,l.children),n.flags|=4096,n)}function Od(e,n,r){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ql(e.return,n,r)}function vu(e,n,r,l,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=r,p.tailMode=d)}function Rd(e,n,r){var l=n.pendingProps,d=l.revealOrder,p=l.tail;if(dn(e,n,l.children,r),l=vt.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Od(e,r,n);else if(e.tag===19)Od(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(at(vt,l),(n.mode&1)===0)n.memoizedState=null;else switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&Aa(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),vu(n,!1,d,r,p);break;case"backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Aa(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}vu(n,!0,r,null,p);break;case"together":vu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ua(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function ir(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),ls|=n.lanes,(r&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(u(153));if(n.child!==null){for(e=n.child,r=Dr(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Dr(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Qf(e,n,r){switch(n.tag){case 3:Md(n),Fs();break;case 5:Qc(n);break;case 1:kn(n.type)&&Ca(n);break;case 4:Xl(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,d=n.memoizedProps.value;at(ja,l._currentValue),l._currentValue=d;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(at(vt,vt.current&1),n.flags|=128,null):(r&n.child.childLanes)!==0?Ad(e,n,r):(at(vt,vt.current&1),e=ir(e,n,r),e!==null?e.sibling:null);at(vt,vt.current&1);break;case 19:if(l=(r&n.childLanes)!==0,(e.flags&128)!==0){if(l)return Rd(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),at(vt,vt.current),l)break;return null;case 22:case 23:return n.lanes=0,Ld(e,n,r)}return ir(e,n,r)}var Dd,xu,Bd,Hd;Dd=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},xu=function(){},Bd=function(e,n,r,l){var d=e.memoizedProps;if(d!==l){e=n.stateNode,os(ji.current);var p=null;switch(r){case"input":d=wt(e,d),l=wt(e,l),p=[];break;case"select":d=G({},d,{value:void 0}),l=G({},l,{value:void 0}),p=[];break;case"textarea":d=pi(e,d),l=pi(e,l),p=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=V)}Ut(r,l);var _;r=null;for(Z in d)if(!l.hasOwnProperty(Z)&&d.hasOwnProperty(Z)&&d[Z]!=null)if(Z==="style"){var C=d[Z];for(_ in C)C.hasOwnProperty(_)&&(r||(r={}),r[_]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(m.hasOwnProperty(Z)?p||(p=[]):(p=p||[]).push(Z,null));for(Z in l){var N=l[Z];if(C=d!=null?d[Z]:void 0,l.hasOwnProperty(Z)&&N!==C&&(N!=null||C!=null))if(Z==="style")if(C){for(_ in C)!C.hasOwnProperty(_)||N&&N.hasOwnProperty(_)||(r||(r={}),r[_]="");for(_ in N)N.hasOwnProperty(_)&&C[_]!==N[_]&&(r||(r={}),r[_]=N[_])}else r||(p||(p=[]),p.push(Z,r)),r=N;else Z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(p=p||[]).push(Z,N)):Z==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(Z,""+N):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(m.hasOwnProperty(Z)?(N!=null&&Z==="onScroll"&&it("scroll",e),p||C===N||(p=[])):(p=p||[]).push(Z,N))}r&&(p=p||[]).push("style",r);var Z=p;(n.updateQueue=Z)&&(n.flags|=4)}},Hd=function(e,n,r,l){r!==l&&(n.flags|=4)};function Uo(e,n){if(!pt)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function en(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,n}function Xf(e,n,r){var l=n.pendingProps;switch(Fl(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(n),null;case 1:return kn(n.type)&&ba(),en(n),null;case 3:return l=n.stateNode,$s(),dt(wn),dt(Xt),tu(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Na(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ui!==null&&(ju(ui),ui=null))),xu(e,n),en(n),null;case 5:Jl(n);var d=os(Do.current);if(r=n.type,e!==null&&n.stateNode!=null)Bd(e,n,r,l,d),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(u(166));return en(n),null}if(e=os(ji.current),Na(n)){l=n.stateNode,r=n.type;var p=n.memoizedProps;switch(l[qn]=n,l[Tr]=p,e=(n.mode&1)!==0,r){case"dialog":it("cancel",l),it("close",l);break;case"iframe":case"object":case"embed":it("load",l);break;case"video":case"audio":for(d=0;d<Sr.length;d++)it(Sr[d],l);break;case"source":it("error",l);break;case"img":case"image":case"link":it("error",l),it("load",l);break;case"details":it("toggle",l);break;case"input":Be(l,p),it("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!p.multiple},it("invalid",l);break;case"textarea":Oi(l,p),it("invalid",l)}Ut(r,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var C=p[_];_==="children"?typeof C=="string"?l.textContent!==C&&(p.suppressHydrationWarning!==!0&&H(l.textContent,C,e),d=["children",C]):typeof C=="number"&&l.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&H(l.textContent,C,e),d=["children",""+C]):m.hasOwnProperty(_)&&C!=null&&_==="onScroll"&&it("scroll",l)}switch(r){case"input":Ve(l),Rt(l,p,!0);break;case"textarea":Ve(l),ar(l);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(l.onclick=V)}l=d,n.updateQueue=l,l!==null&&(n.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jt(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=_.createElement(r,{is:l.is}):(e=_.createElement(r),r==="select"&&(_=e,l.multiple?_.multiple=!0:l.size&&(_.size=l.size))):e=_.createElementNS(e,r),e[qn]=n,e[Tr]=l,Dd(e,n,!1,!1),n.stateNode=e;e:{switch(_=Nn(r,l),r){case"dialog":it("cancel",e),it("close",e),d=l;break;case"iframe":case"object":case"embed":it("load",e),d=l;break;case"video":case"audio":for(d=0;d<Sr.length;d++)it(Sr[d],e);d=l;break;case"source":it("error",e),d=l;break;case"img":case"image":case"link":it("error",e),it("load",e),d=l;break;case"details":it("toggle",e),d=l;break;case"input":Be(e,l),d=wt(e,l),it("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=G({},l,{value:void 0}),it("invalid",e);break;case"textarea":Oi(e,l),d=pi(e,l),it("invalid",e);break;default:d=l}Ut(r,d),C=d;for(p in C)if(C.hasOwnProperty(p)){var N=C[p];p==="style"?Fn(e,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&pn(e,N)):p==="children"?typeof N=="string"?(r!=="textarea"||N!=="")&&Tt(e,N):typeof N=="number"&&Tt(e,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(m.hasOwnProperty(p)?N!=null&&p==="onScroll"&&it("scroll",e):N!=null&&ee(e,p,N,_))}switch(r){case"input":Ve(e),Rt(e,l,!1);break;case"textarea":Ve(e),ar(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ke(l.value));break;case"select":e.multiple=!!l.multiple,p=l.value,p!=null?fn(e,!!l.multiple,p,!1):l.defaultValue!=null&&fn(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=V)}switch(r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return en(n),null;case 6:if(e&&n.stateNode!=null)Hd(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(u(166));if(r=os(Do.current),os(ji.current),Na(n)){if(l=n.stateNode,r=n.memoizedProps,l[qn]=n,(p=l.nodeValue!==r)&&(e=Dn,e!==null))switch(e.tag){case 3:H(l.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&H(l.nodeValue,r,(e.mode&1)!==0)}p&&(n.flags|=4)}else l=(r.nodeType===9?r:r.ownerDocument).createTextNode(l),l[qn]=n,n.stateNode=l}return en(n),null;case 13:if(dt(vt),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pt&&Bn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Uc(),Fs(),n.flags|=98560,p=!1;else if(p=Na(n),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(u(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(u(317));p[qn]=n}else Fs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;en(n),p=!1}else ui!==null&&(ju(ui),ui=null),p=!0;if(!p)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=r,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(vt.current&1)!==0?Ot===0&&(Ot=3):zu())),n.updateQueue!==null&&(n.flags|=4),en(n),null);case 4:return $s(),xu(e,n),e===null&&br(n.stateNode.containerInfo),en(n),null;case 10:return Yl(n.type._context),en(n),null;case 17:return kn(n.type)&&ba(),en(n),null;case 19:if(dt(vt),p=n.memoizedState,p===null)return en(n),null;if(l=(n.flags&128)!==0,_=p.rendering,_===null)if(l)Uo(p,!1);else{if(Ot!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(_=Aa(e),_!==null){for(n.flags|=128,Uo(p,!1),l=_.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=r,r=n.child;r!==null;)p=r,e=l,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,e=_.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return at(vt,vt.current&1|2),n.child}e=e.sibling}p.tail!==null&&ot()>Ks&&(n.flags|=128,l=!0,Uo(p,!1),n.lanes=4194304)}else{if(!l)if(e=Aa(_),e!==null){if(n.flags|=128,l=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),Uo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!pt)return en(n),null}else 2*ot()-p.renderingStartTime>Ks&&r!==1073741824&&(n.flags|=128,l=!0,Uo(p,!1),n.lanes=4194304);p.isBackwards?(_.sibling=n.child,n.child=_):(r=p.last,r!==null?r.sibling=_:n.child=_,p.last=_)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=ot(),n.sibling=null,r=vt.current,at(vt,l?r&1|2:r&1),n):(en(n),null);case 22:case 23:return Mu(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(Hn&1073741824)!==0&&(en(n),n.subtreeFlags&6&&(n.flags|=8192)):en(n),null;case 24:return null;case 25:return null}throw Error(u(156,n.tag))}function Jf(e,n){switch(Fl(n),n.tag){case 1:return kn(n.type)&&ba(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return $s(),dt(wn),dt(Xt),tu(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Jl(n),null;case 13:if(dt(vt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(u(340));Fs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return dt(vt),null;case 4:return $s(),null;case 10:return Yl(n.type._context),null;case 22:case 23:return Mu(),null;case 24:return null;default:return null}}var Wa=!1,tn=!1,ep=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ys(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(l){St(e,n,l)}else r.current=null}function wu(e,n,r){try{r()}catch(l){St(e,n,l)}}var Zd=!1;function tp(e,n){if(re=Yr,e=To(),Eo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var _=0,C=-1,N=-1,Z=0,q=0,K=e,Y=null;t:for(;;){for(var le;K!==r||d!==0&&K.nodeType!==3||(C=_+d),K!==p||l!==0&&K.nodeType!==3||(N=_+l),K.nodeType===3&&(_+=K.nodeValue.length),(le=K.firstChild)!==null;)Y=K,K=le;for(;;){if(K===e)break t;if(Y===r&&++Z===d&&(C=_),Y===p&&++q===l&&(N=_),(le=K.nextSibling)!==null)break;K=Y,Y=K.parentNode}K=le}r=C===-1||N===-1?null:{start:C,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(Se={focusedElem:e,selectionRange:r},Yr=!1,he=n;he!==null;)if(n=he,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,he=e;else for(;he!==null;){n=he;try{var pe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,Ct=pe.memoizedState,D=n.stateNode,I=D.getSnapshotBeforeUpdate(n.elementType===n.type?ge:ci(n.type,ge),Ct);D.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var B=n.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(X){St(n,n.return,X)}if(e=n.sibling,e!==null){e.return=n.return,he=e;break}he=n.return}return pe=Zd,Zd=!1,pe}function Wo(e,n,r){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var p=d.destroy;d.destroy=void 0,p!==void 0&&wu(n,r,p)}d=d.next}while(d!==l)}}function Ga(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var l=r.create;r.destroy=l()}r=r.next}while(r!==n)}}function ku(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function Fd(e){var n=e.alternate;n!==null&&(e.alternate=null,Fd(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[qn],delete n[Tr],delete n[Er],delete n[Rl],delete n[Dl])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ud(e){return e.tag===5||e.tag===3||e.tag===4}function Wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ud(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Su(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=V));else if(l!==4&&(e=e.child,e!==null))for(Su(e,n,r),e=e.sibling;e!==null;)Su(e,n,r),e=e.sibling}function bu(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(bu(e,n,r),e=e.sibling;e!==null;)bu(e,n,r),e=e.sibling}var $t=null,di=!1;function Mr(e,n,r){for(r=r.child;r!==null;)Gd(e,n,r),r=r.sibling}function Gd(e,n,r){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Bi,r)}catch{}switch(r.tag){case 5:tn||Ys(r,n);case 6:var l=$t,d=di;$t=null,Mr(e,n,r),$t=l,di=d,$t!==null&&(di?(e=$t,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):$t.removeChild(r.stateNode));break;case 18:$t!==null&&(di?(e=$t,r=r.stateNode,e.nodeType===8?zo(e.parentNode,r):e.nodeType===1&&zo(e,r),Mn(e)):zo($t,r.stateNode));break;case 4:l=$t,d=di,$t=r.stateNode.containerInfo,di=!0,Mr(e,n,r),$t=l,di=d;break;case 0:case 11:case 14:case 15:if(!tn&&(l=r.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&wu(r,n,_),d=d.next}while(d!==l)}Mr(e,n,r);break;case 1:if(!tn&&(Ys(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=r.memoizedProps,l.state=r.memoizedState,l.componentWillUnmount()}catch(C){St(r,n,C)}Mr(e,n,r);break;case 21:Mr(e,n,r);break;case 22:r.mode&1?(tn=(l=tn)||r.memoizedState!==null,Mr(e,n,r),tn=l):Mr(e,n,r);break;default:Mr(e,n,r)}}function $d(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ep),n.forEach(function(l){var d=cp.bind(null,e,l);r.has(l)||(r.add(l),l.then(d,d))})}}function hi(e,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];try{var p=e,_=n,C=_;e:for(;C!==null;){switch(C.tag){case 5:$t=C.stateNode,di=!1;break e;case 3:$t=C.stateNode.containerInfo,di=!0;break e;case 4:$t=C.stateNode.containerInfo,di=!0;break e}C=C.return}if($t===null)throw Error(u(160));Gd(p,_,d),$t=null,di=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(Z){St(d,n,Z)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Vd(n,e),n=n.sibling}function Vd(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hi(n,e),Mi(e),l&4){try{Wo(3,e,e.return),Ga(3,e)}catch(ge){St(e,e.return,ge)}try{Wo(5,e,e.return)}catch(ge){St(e,e.return,ge)}}break;case 1:hi(n,e),Mi(e),l&512&&r!==null&&Ys(r,r.return);break;case 5:if(hi(n,e),Mi(e),l&512&&r!==null&&Ys(r,r.return),e.flags&32){var d=e.stateNode;try{Tt(d,"")}catch(ge){St(e,e.return,ge)}}if(l&4&&(d=e.stateNode,d!=null)){var p=e.memoizedProps,_=r!==null?r.memoizedProps:p,C=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&bt(d,p),Nn(C,_);var Z=Nn(C,p);for(_=0;_<N.length;_+=2){var q=N[_],K=N[_+1];q==="style"?Fn(d,K):q==="dangerouslySetInnerHTML"?pn(d,K):q==="children"?Tt(d,K):ee(d,q,K,Z)}switch(C){case"input":Ye(d,p);break;case"textarea":or(d,p);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?fn(d,!!p.multiple,le,!1):Y!==!!p.multiple&&(p.defaultValue!=null?fn(d,!!p.multiple,p.defaultValue,!0):fn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Tr]=p}catch(ge){St(e,e.return,ge)}}break;case 6:if(hi(n,e),Mi(e),l&4){if(e.stateNode===null)throw Error(u(162));d=e.stateNode,p=e.memoizedProps;try{d.nodeValue=p}catch(ge){St(e,e.return,ge)}}break;case 3:if(hi(n,e),Mi(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(n.containerInfo)}catch(ge){St(e,e.return,ge)}break;case 4:hi(n,e),Mi(e);break;case 13:hi(n,e),Mi(e),d=e.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Eu=ot())),l&4&&$d(e);break;case 22:if(q=r!==null&&r.memoizedState!==null,e.mode&1?(tn=(Z=tn)||q,hi(n,e),tn=Z):hi(n,e),Mi(e),l&8192){if(Z=e.memoizedState!==null,(e.stateNode.isHidden=Z)&&!q&&(e.mode&1)!==0)for(he=e,q=e.child;q!==null;){for(K=he=q;he!==null;){switch(Y=he,le=Y.child,Y.tag){case 0:case 11:case 14:case 15:Wo(4,Y,Y.return);break;case 1:Ys(Y,Y.return);var pe=Y.stateNode;if(typeof pe.componentWillUnmount=="function"){l=Y,r=Y.return;try{n=l,pe.props=n.memoizedProps,pe.state=n.memoizedState,pe.componentWillUnmount()}catch(ge){St(l,r,ge)}}break;case 5:Ys(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Kd(K);continue}}le!==null?(le.return=Y,he=le):Kd(K)}q=q.sibling}e:for(q=null,K=e;;){if(K.tag===5){if(q===null){q=K;try{d=K.stateNode,Z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=K.stateNode,N=K.memoizedProps.style,_=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=mt("display",_))}catch(ge){St(e,e.return,ge)}}}else if(K.tag===6){if(q===null)try{K.stateNode.nodeValue=Z?"":K.memoizedProps}catch(ge){St(e,e.return,ge)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;q===K&&(q=null),K=K.return}q===K&&(q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:hi(n,e),Mi(e),l&4&&$d(e);break;case 21:break;default:hi(n,e),Mi(e)}}function Mi(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(Ud(r)){var l=r;break e}r=r.return}throw Error(u(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(Tt(d,""),l.flags&=-33);var p=Wd(e);bu(e,p,d);break;case 3:case 4:var _=l.stateNode.containerInfo,C=Wd(e);Su(e,C,_);break;default:throw Error(u(161))}}catch(N){St(e,e.return,N)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function np(e,n,r){he=e,Yd(e)}function Yd(e,n,r){for(var l=(e.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&l){var _=d.memoizedState!==null||Wa;if(!_){var C=d.alternate,N=C!==null&&C.memoizedState!==null||tn;C=Wa;var Z=tn;if(Wa=_,(tn=N)&&!Z)for(he=d;he!==null;)_=he,N=_.child,_.tag===22&&_.memoizedState!==null?Qd(d):N!==null?(N.return=_,he=N):Qd(d);for(;p!==null;)he=p,Yd(p),p=p.sibling;he=d,Wa=C,tn=Z}qd(e)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):qd(e)}}function qd(e){for(;he!==null;){var n=he;if((n.flags&8772)!==0){var r=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:tn||Ga(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!tn)if(r===null)l.componentDidMount();else{var d=n.elementType===n.type?r.memoizedProps:ci(n.type,r.memoizedProps);l.componentDidUpdate(d,r.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var p=n.updateQueue;p!==null&&Kc(n,p,l);break;case 3:var _=n.updateQueue;if(_!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}Kc(n,_,r)}break;case 5:var C=n.stateNode;if(r===null&&n.flags&4){r=C;var N=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&r.focus();break;case"img":N.src&&(r.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Z=n.alternate;if(Z!==null){var q=Z.memoizedState;if(q!==null){var K=q.dehydrated;K!==null&&Mn(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}tn||n.flags&512&&ku(n)}catch(Y){St(n,n.return,Y)}}if(n===e){he=null;break}if(r=n.sibling,r!==null){r.return=n.return,he=r;break}he=n.return}}function Kd(e){for(;he!==null;){var n=he;if(n===e){he=null;break}var r=n.sibling;if(r!==null){r.return=n.return,he=r;break}he=n.return}}function Qd(e){for(;he!==null;){var n=he;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{Ga(4,n)}catch(N){St(n,r,N)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var d=n.return;try{l.componentDidMount()}catch(N){St(n,d,N)}}var p=n.return;try{ku(n)}catch(N){St(n,p,N)}break;case 5:var _=n.return;try{ku(n)}catch(N){St(n,_,N)}}}catch(N){St(n,n.return,N)}if(n===e){he=null;break}var C=n.sibling;if(C!==null){C.return=n.return,he=C;break}he=n.return}}var ip=Math.ceil,$a=ue.ReactCurrentDispatcher,Cu=ue.ReactCurrentOwner,ei=ue.ReactCurrentBatchConfig,Ge=0,Zt=null,Pt=null,Vt=0,Hn=0,qs=Pr(0),Ot=0,Go=null,ls=0,Va=0,Tu=0,$o=null,bn=null,Eu=0,Ks=1/0,rr=null,Ya=!1,Pu=null,zr=null,qa=!1,Ar=null,Ka=0,Vo=0,Nu=null,Qa=-1,Xa=0;function hn(){return(Ge&6)!==0?ot():Qa!==-1?Qa:Qa=ot()}function Or(e){return(e.mode&1)===0?1:(Ge&2)!==0&&Vt!==0?Vt&-Vt:Hf.transition!==null?(Xa===0&&(Xa=vs()),Xa):(e=He,e!==0||(e=window.event,e=e===void 0?16:Fe(e.type)),e)}function fi(e,n,r,l){if(50<Vo)throw Vo=0,Nu=null,Error(u(185));qt(e,r,l),((Ge&2)===0||e!==Zt)&&(e===Zt&&((Ge&2)===0&&(Va|=r),Ot===4&&Rr(e,Vt)),Cn(e,l),r===1&&Ge===0&&(n.mode&1)===0&&(Ks=ot()+500,Ta&&Lr()))}function Cn(e,n){var r=e.callbackNode;hr(e,n);var l=tt(e,e===Zt?Vt:0);if(l===0)r!==null&&vi(r),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(r!=null&&vi(r),n===1)e.tag===0?Bf(Jd.bind(null,e)):Dc(Jd.bind(null,e)),Qt(function(){(Ge&6)===0&&Lr()}),r=null;else{switch(si(l)){case 1:r=Wr;break;case 4:r=_s;break;case 16:r=cr;break;case 536870912:r=xi;break;default:r=cr}r=ah(r,Xd.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function Xd(e,n){if(Qa=-1,Xa=0,(Ge&6)!==0)throw Error(u(327));var r=e.callbackNode;if(Qs()&&e.callbackNode!==r)return null;var l=tt(e,e===Zt?Vt:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=Ja(e,l);else{n=l;var d=Ge;Ge|=2;var p=th();(Zt!==e||Vt!==n)&&(rr=null,Ks=ot()+500,cs(e,n));do try{op();break}catch(C){eh(e,C)}while(!0);Vl(),$a.current=p,Ge=d,Pt!==null?n=0:(Zt=null,Vt=0,n=Ot)}if(n!==0){if(n===2&&(d=Bt(e),d!==0&&(l=d,n=Lu(e,d))),n===1)throw r=Go,cs(e,0),Rr(e,l),Cn(e,ot()),r;if(n===6)Rr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!rp(d)&&(n=Ja(e,l),n===2&&(p=Bt(e),p!==0&&(l=p,n=Lu(e,p))),n===1))throw r=Go,cs(e,0),Rr(e,l),Cn(e,ot()),r;switch(e.finishedWork=d,e.finishedLanes=l,n){case 0:case 1:throw Error(u(345));case 2:ds(e,bn,rr);break;case 3:if(Rr(e,l),(l&130023424)===l&&(n=Eu+500-ot(),10<n)){if(tt(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){hn(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=zt(ds.bind(null,e,bn,rr),n);break}ds(e,bn,rr);break;case 4:if(Rr(e,l),(l&4194240)===l)break;for(n=e.eventTimes,d=-1;0<l;){var _=31-Ae(l);p=1<<_,_=n[_],_>d&&(d=_),l&=~p}if(l=d,l=ot()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*ip(l/1960))-l,10<l){e.timeoutHandle=zt(ds.bind(null,e,bn,rr),l);break}ds(e,bn,rr);break;case 5:ds(e,bn,rr);break;default:throw Error(u(329))}}}return Cn(e,ot()),e.callbackNode===r?Xd.bind(null,e):null}function Lu(e,n){var r=$o;return e.current.memoizedState.isDehydrated&&(cs(e,n).flags|=256),e=Ja(e,n),e!==2&&(n=bn,bn=r,n!==null&&ju(n)),e}function ju(e){bn===null?bn=e:bn.push.apply(bn,e)}function rp(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var l=0;l<r.length;l++){var d=r[l],p=d.getSnapshot;d=d.value;try{if(!On(p(),d))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Rr(e,n){for(n&=~Tu,n&=~Va,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-Ae(n),l=1<<r;e[r]=-1,n&=~l}}function Jd(e){if((Ge&6)!==0)throw Error(u(327));Qs();var n=tt(e,0);if((n&1)===0)return Cn(e,ot()),null;var r=Ja(e,n);if(e.tag!==0&&r===2){var l=Bt(e);l!==0&&(n=l,r=Lu(e,l))}if(r===1)throw r=Go,cs(e,0),Rr(e,n),Cn(e,ot()),r;if(r===6)throw Error(u(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ds(e,bn,rr),Cn(e,ot()),null}function Iu(e,n){var r=Ge;Ge|=1;try{return e(n)}finally{Ge=r,Ge===0&&(Ks=ot()+500,Ta&&Lr())}}function us(e){Ar!==null&&Ar.tag===0&&(Ge&6)===0&&Qs();var n=Ge;Ge|=1;var r=ei.transition,l=He;try{if(ei.transition=null,He=1,e)return e()}finally{He=l,ei.transition=r,Ge=n,(Ge&6)===0&&Lr()}}function Mu(){Hn=qs.current,dt(qs)}function cs(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Et(r)),Pt!==null)for(r=Pt.return;r!==null;){var l=r;switch(Fl(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ba();break;case 3:$s(),dt(wn),dt(Xt),tu();break;case 5:Jl(l);break;case 4:$s();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:Yl(l.type._context);break;case 22:case 23:Mu()}r=r.return}if(Zt=e,Pt=e=Dr(e.current,null),Vt=Hn=n,Ot=0,Go=null,Tu=Va=ls=0,bn=$o=null,ss!==null){for(n=0;n<ss.length;n++)if(r=ss[n],l=r.interleaved,l!==null){r.interleaved=null;var d=l.next,p=r.pending;if(p!==null){var _=p.next;p.next=d,l.next=_}r.pending=l}ss=null}return e}function eh(e,n){do{var r=Pt;try{if(Vl(),Oa.current=Ha,Ra){for(var l=xt.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ra=!1}if(as=0,Ht=At=xt=null,Bo=!1,Ho=0,Cu.current=null,r===null||r.return===null){Ot=1,Go=n,Pt=null;break}e:{var p=e,_=r.return,C=r,N=n;if(n=Vt,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var Z=N,q=C,K=q.tag;if((q.mode&1)===0&&(K===0||K===11||K===15)){var Y=q.alternate;Y?(q.updateQueue=Y.updateQueue,q.memoizedState=Y.memoizedState,q.lanes=Y.lanes):(q.updateQueue=null,q.memoizedState=null)}var le=Cd(_);if(le!==null){le.flags&=-257,Td(le,_,C,p,n),le.mode&1&&bd(p,Z,n),n=le,N=Z;var pe=n.updateQueue;if(pe===null){var ge=new Set;ge.add(N),n.updateQueue=ge}else pe.add(N);break e}else{if((n&1)===0){bd(p,Z,n),zu();break e}N=Error(u(426))}}else if(pt&&C.mode&1){var Ct=Cd(_);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),Td(Ct,_,C,p,n),Gl(Vs(N,C));break e}}p=N=Vs(N,C),Ot!==4&&(Ot=2),$o===null?$o=[p]:$o.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,n&=-n,p.lanes|=n;var D=kd(p,N,n);qc(p,D);break e;case 1:C=N;var I=p.type,B=p.stateNode;if((p.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(zr===null||!zr.has(B)))){p.flags|=65536,n&=-n,p.lanes|=n;var X=Sd(p,C,n);qc(p,X);break e}}p=p.return}while(p!==null)}ih(r)}catch(ye){n=ye,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function th(){var e=$a.current;return $a.current=Ha,e===null?Ha:e}function zu(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Zt===null||(ls&268435455)===0&&(Va&268435455)===0||Rr(Zt,Vt)}function Ja(e,n){var r=Ge;Ge|=2;var l=th();(Zt!==e||Vt!==n)&&(rr=null,cs(e,n));do try{sp();break}catch(d){eh(e,d)}while(!0);if(Vl(),Ge=r,$a.current=l,Pt!==null)throw Error(u(261));return Zt=null,Vt=0,Ot}function sp(){for(;Pt!==null;)nh(Pt)}function op(){for(;Pt!==null&&!uo();)nh(Pt)}function nh(e){var n=oh(e.alternate,e,Hn);e.memoizedProps=e.pendingProps,n===null?ih(e):Pt=n,Cu.current=null}function ih(e){var n=e;do{var r=n.alternate;if(e=n.return,(n.flags&32768)===0){if(r=Xf(r,n,Hn),r!==null){Pt=r;return}}else{if(r=Jf(r,n),r!==null){r.flags&=32767,Pt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,Pt=null;return}}if(n=n.sibling,n!==null){Pt=n;return}Pt=n=e}while(n!==null);Ot===0&&(Ot=5)}function ds(e,n,r){var l=He,d=ei.transition;try{ei.transition=null,He=1,ap(e,n,r,l)}finally{ei.transition=d,He=l}return null}function ap(e,n,r,l){do Qs();while(Ar!==null);if((Ge&6)!==0)throw Error(u(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(u(177));e.callbackNode=null,e.callbackPriority=0;var p=r.lanes|r.childLanes;if(ct(e,p),e===Zt&&(Pt=Zt=null,Vt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||qa||(qa=!0,ah(cr,function(){return Qs(),null})),p=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||p){p=ei.transition,ei.transition=null;var _=He;He=1;var C=Ge;Ge|=4,Cu.current=null,tp(e,r),Vd(r,e),Vn(Se),Yr=!!re,Se=re=null,e.current=r,np(r),jn(),Ge=C,He=_,ei.transition=p}else e.current=r;if(qa&&(qa=!1,Ar=e,Ka=d),p=e.pendingLanes,p===0&&(zr=null),Hi(r.stateNode),Cn(e,ot()),n!==null)for(l=e.onRecoverableError,r=0;r<n.length;r++)d=n[r],l(d.value,{componentStack:d.stack,digest:d.digest});if(Ya)throw Ya=!1,e=Pu,Pu=null,e;return(Ka&1)!==0&&e.tag!==0&&Qs(),p=e.pendingLanes,(p&1)!==0?e===Nu?Vo++:(Vo=0,Nu=e):Vo=0,Lr(),null}function Qs(){if(Ar!==null){var e=si(Ka),n=ei.transition,r=He;try{if(ei.transition=null,He=16>e?16:e,Ar===null)var l=!1;else{if(e=Ar,Ar=null,Ka=0,(Ge&6)!==0)throw Error(u(331));var d=Ge;for(Ge|=4,he=e.current;he!==null;){var p=he,_=p.child;if((he.flags&16)!==0){var C=p.deletions;if(C!==null){for(var N=0;N<C.length;N++){var Z=C[N];for(he=Z;he!==null;){var q=he;switch(q.tag){case 0:case 11:case 15:Wo(8,q,p)}var K=q.child;if(K!==null)K.return=q,he=K;else for(;he!==null;){q=he;var Y=q.sibling,le=q.return;if(Fd(q),q===Z){he=null;break}if(Y!==null){Y.return=le,he=Y;break}he=le}}}var pe=p.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var Ct=ge.sibling;ge.sibling=null,ge=Ct}while(ge!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,he=_;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Wo(9,p,p.return)}var D=p.sibling;if(D!==null){D.return=p.return,he=D;break e}he=p.return}}var I=e.current;for(he=I;he!==null;){_=he;var B=_.child;if((_.subtreeFlags&2064)!==0&&B!==null)B.return=_,he=B;else e:for(_=I;he!==null;){if(C=he,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Ga(9,C)}}catch(ye){St(C,C.return,ye)}if(C===_){he=null;break e}var X=C.sibling;if(X!==null){X.return=C.return,he=X;break e}he=C.return}}if(Ge=d,Lr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Bi,e)}catch{}l=!0}return l}finally{He=r,ei.transition=n}}return!1}function rh(e,n,r){n=Vs(r,n),n=kd(e,n,1),e=Ir(e,n,1),n=hn(),e!==null&&(qt(e,1,n),Cn(e,n))}function St(e,n,r){if(e.tag===3)rh(e,e,r);else for(;n!==null;){if(n.tag===3){rh(n,e,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zr===null||!zr.has(l))){e=Vs(r,e),e=Sd(n,e,1),n=Ir(n,e,1),e=hn(),n!==null&&(qt(n,1,e),Cn(n,e));break}}n=n.return}}function lp(e,n,r){var l=e.pingCache;l!==null&&l.delete(n),n=hn(),e.pingedLanes|=e.suspendedLanes&r,Zt===e&&(Vt&r)===r&&(Ot===4||Ot===3&&(Vt&130023424)===Vt&&500>ot()-Eu?cs(e,0):Tu|=r),Cn(e,n)}function sh(e,n){n===0&&((e.mode&1)===0?n=1:(n=ki,ki<<=1,(ki&130023424)===0&&(ki=4194304)));var r=hn();e=tr(e,n),e!==null&&(qt(e,n,r),Cn(e,r))}function up(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),sh(e,r)}function cp(e,n){var r=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(u(314))}l!==null&&l.delete(n),sh(e,r)}var oh;oh=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||wn.current)Sn=!0;else{if((e.lanes&r)===0&&(n.flags&128)===0)return Sn=!1,Qf(e,n,r);Sn=(e.flags&131072)!==0}else Sn=!1,pt&&(n.flags&1048576)!==0&&Bc(n,Pa,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Ua(e,n),e=n.pendingProps;var d=Bs(n,Xt.current);Gs(n,r),d=ru(null,n,l,e,d,r);var p=su();return n.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,kn(l)?(p=!0,Ca(n)):p=!1,n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ql(n),d.updater=Za,n.stateNode=d,d._reactInternals=n,du(n,l,e,r),n=mu(null,n,l,!0,p,r)):(n.tag=0,pt&&p&&Zl(n),dn(null,n,d,r),n=n.child),n;case 16:l=n.elementType;e:{switch(Ua(e,n),e=n.pendingProps,d=l._init,l=d(l._payload),n.type=l,d=n.tag=hp(l),e=ci(l,e),d){case 0:n=pu(null,n,l,e,r);break e;case 1:n=Id(null,n,l,e,r);break e;case 11:n=Ed(null,n,l,e,r);break e;case 14:n=Pd(null,n,l,ci(l.type,e),r);break e}throw Error(u(306,l,""))}return n;case 0:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:ci(l,d),pu(e,n,l,d,r);case 1:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:ci(l,d),Id(e,n,l,d,r);case 3:e:{if(Md(n),e===null)throw Error(u(387));l=n.pendingProps,p=n.memoizedState,d=p.element,Yc(e,n),za(n,l,null,r);var _=n.memoizedState;if(l=_.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){d=Vs(Error(u(423)),n),n=zd(e,n,l,r,d);break e}else if(l!==d){d=Vs(Error(u(424)),n),n=zd(e,n,l,r,d);break e}else for(Bn=Li(n.stateNode.containerInfo.firstChild),Dn=n,pt=!0,ui=null,r=$c(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fs(),l===d){n=ir(e,n,r);break e}dn(e,n,l,r)}n=n.child}return n;case 5:return Qc(n),e===null&&Wl(n),l=n.type,d=n.pendingProps,p=e!==null?e.memoizedProps:null,_=d.children,De(l,d)?_=null:p!==null&&De(l,p)&&(n.flags|=32),jd(e,n),dn(e,n,_,r),n.child;case 6:return e===null&&Wl(n),null;case 13:return Ad(e,n,r);case 4:return Xl(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Us(n,null,l,r):dn(e,n,l,r),n.child;case 11:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:ci(l,d),Ed(e,n,l,d,r);case 7:return dn(e,n,n.pendingProps,r),n.child;case 8:return dn(e,n,n.pendingProps.children,r),n.child;case 12:return dn(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(l=n.type._context,d=n.pendingProps,p=n.memoizedProps,_=d.value,at(ja,l._currentValue),l._currentValue=_,p!==null)if(On(p.value,_)){if(p.children===d.children&&!wn.current){n=ir(e,n,r);break e}}else for(p=n.child,p!==null&&(p.return=n);p!==null;){var C=p.dependencies;if(C!==null){_=p.child;for(var N=C.firstContext;N!==null;){if(N.context===l){if(p.tag===1){N=nr(-1,r&-r),N.tag=2;var Z=p.updateQueue;if(Z!==null){Z=Z.shared;var q=Z.pending;q===null?N.next=N:(N.next=q.next,q.next=N),Z.pending=N}}p.lanes|=r,N=p.alternate,N!==null&&(N.lanes|=r),ql(p.return,r,n),C.lanes|=r;break}N=N.next}}else if(p.tag===10)_=p.type===n.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(u(341));_.lanes|=r,C=_.alternate,C!==null&&(C.lanes|=r),ql(_,r,n),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===n){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}dn(e,n,d.children,r),n=n.child}return n;case 9:return d=n.type,l=n.pendingProps.children,Gs(n,r),d=Xn(d),l=l(d),n.flags|=1,dn(e,n,l,r),n.child;case 14:return l=n.type,d=ci(l,n.pendingProps),d=ci(l.type,d),Pd(e,n,l,d,r);case 15:return Nd(e,n,n.type,n.pendingProps,r);case 17:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:ci(l,d),Ua(e,n),n.tag=1,kn(l)?(e=!0,Ca(n)):e=!1,Gs(n,r),xd(n,l,d),du(n,l,d,r),mu(null,n,l,!0,e,r);case 19:return Rd(e,n,r);case 22:return Ld(e,n,r)}throw Error(u(156,n.tag))};function ah(e,n){return ys(e,n)}function dp(e,n,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(e,n,r,l){return new dp(e,n,r,l)}function Au(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hp(e){if(typeof e=="function")return Au(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J)return 11;if(e===we)return 14}return 2}function Dr(e,n){var r=e.alternate;return r===null?(r=ti(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function el(e,n,r,l,d,p){var _=2;if(l=e,typeof e=="function")Au(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case Te:return hs(r.children,d,p,n);case je:_=8,d|=8;break;case Ue:return e=ti(12,r,n,d|2),e.elementType=Ue,e.lanes=p,e;case ve:return e=ti(13,r,n,d),e.elementType=ve,e.lanes=p,e;case _e:return e=ti(19,r,n,d),e.elementType=_e,e.lanes=p,e;case Le:return tl(r,d,p,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Oe:_=10;break e;case te:_=9;break e;case J:_=11;break e;case we:_=14;break e;case xe:_=16,l=null;break e}throw Error(u(130,e==null?e:typeof e,""))}return n=ti(_,r,n,d),n.elementType=e,n.type=l,n.lanes=p,n}function hs(e,n,r,l){return e=ti(7,e,l,n),e.lanes=r,e}function tl(e,n,r,l){return e=ti(22,e,l,n),e.elementType=Le,e.lanes=r,e.stateNode={isHidden:!1},e}function Ou(e,n,r){return e=ti(6,e,null,n),e.lanes=r,e}function Ru(e,n,r){return n=ti(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function fp(e,n,r,l,d){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ri(0),this.expirationTimes=ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Du(e,n,r,l,d,p,_,C,N){return e=new fp(e,n,r,C,N),n===1?(n=1,p===!0&&(n|=8)):n=0,p=ti(3,null,null,n),e.current=p,p.stateNode=e,p.memoizedState={element:l,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ql(p),e}function pp(e,n,r){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:l==null?null:""+l,children:e,containerInfo:n,implementation:r}}function lh(e){if(!e)return Nr;e=e._reactInternals;e:{if(ht(e)!==e||e.tag!==1)throw Error(u(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(kn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(u(171))}if(e.tag===1){var r=e.type;if(kn(r))return Oc(e,r,n)}return n}function uh(e,n,r,l,d,p,_,C,N){return e=Du(r,l,!0,e,d,p,_,C,N),e.context=lh(null),r=e.current,l=hn(),d=Or(r),p=nr(l,d),p.callback=n??null,Ir(r,p,d),e.current.lanes=d,qt(e,d,l),Cn(e,l),e}function nl(e,n,r,l){var d=n.current,p=hn(),_=Or(d);return r=lh(r),n.context===null?n.context=r:n.pendingContext=r,n=nr(p,_),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=Ir(d,n,_),e!==null&&(fi(e,d,_,p),Ma(e,d,_)),_}function il(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ch(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Bu(e,n){ch(e,n),(e=e.alternate)&&ch(e,n)}function mp(){return null}var dh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hu(e){this._internalRoot=e}rl.prototype.render=Hu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(u(409));nl(e,n,null,null)},rl.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;us(function(){nl(null,e,null,null)}),n[Ke]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var n=qe();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Mt.length&&n!==0&&n<Mt[r].priority;r++);Mt.splice(r,0,e),r===0&&xs(e)}};function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hh(){}function gp(e,n,r,l,d){if(d){if(typeof l=="function"){var p=l;l=function(){var Z=il(_);p.call(Z)}}var _=uh(n,l,e,0,null,!1,!1,"",hh);return e._reactRootContainer=_,e[Ke]=_.current,br(e.nodeType===8?e.parentNode:e),us(),_}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var C=l;l=function(){var Z=il(N);C.call(Z)}}var N=Du(e,0,!1,null,null,!1,!1,"",hh);return e._reactRootContainer=N,e[Ke]=N.current,br(e.nodeType===8?e.parentNode:e),us(function(){nl(n,N,r,l)}),N}function ol(e,n,r,l,d){var p=r._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var C=d;d=function(){var N=il(_);C.call(N)}}nl(n,_,e,d)}else _=gp(r,n,e,d,l);return il(_)}ae=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=Ie(n.pendingLanes);r!==0&&(_n(n,r|1),Cn(n,ot()),(Ge&6)===0&&(Ks=ot()+500,Lr()))}break;case 13:us(function(){var l=tr(e,1);if(l!==null){var d=hn();fi(l,e,1,d)}}),Bu(e,1)}},de=function(e){if(e.tag===13){var n=tr(e,134217728);if(n!==null){var r=hn();fi(n,e,134217728,r)}Bu(e,134217728)}},Me=function(e){if(e.tag===13){var n=Or(e),r=tr(e,n);if(r!==null){var l=hn();fi(r,e,n,l)}Bu(e,n)}},qe=function(){return He},ft=function(e,n){var r=He;try{return He=e,n()}finally{He=r}},It=function(e,n,r){switch(n){case"input":if(Ye(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var d=Rs(l);if(!d)throw Error(u(90));ut(l),Ye(l,d)}}}break;case"textarea":or(e,r);break;case"select":n=r.value,n!=null&&fn(e,!!r.multiple,n,!1)}},Un=Iu,Di=us;var yp={usingClientEntryPoint:!1,Events:[Ki,Qi,Rs,yi,Ri,Iu]},Yo={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gs(e),e===null?null:e.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||mp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{Bi=al.inject(_p),an=al}catch{}}return Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yp,Tn.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zu(n))throw Error(u(200));return pp(e,n,null,r)},Tn.createRoot=function(e,n){if(!Zu(e))throw Error(u(299));var r=!1,l="",d=dh;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=Du(e,1,!1,null,null,r,!1,l,d),e[Ke]=n.current,br(e.nodeType===8?e.parentNode:e),new Hu(n)},Tn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=gs(n),e=e===null?null:e.stateNode,e},Tn.flushSync=function(e){return us(e)},Tn.hydrate=function(e,n,r){if(!sl(n))throw Error(u(200));return ol(null,e,n,!0,r)},Tn.hydrateRoot=function(e,n,r){if(!Zu(e))throw Error(u(405));var l=r!=null&&r.hydratedSources||null,d=!1,p="",_=dh;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),n=uh(n,null,e,1,r??null,d,!1,p,_),e[Ke]=n.current,br(e),l)for(e=0;e<l.length;e++)r=l[e],d=r._getVersion,d=d(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,d]:n.mutableSourceEagerHydrationData.push(r,d);return new rl(n)},Tn.render=function(e,n,r){if(!sl(n))throw Error(u(200));return ol(null,e,n,!1,r)},Tn.unmountComponentAtNode=function(e){if(!sl(e))throw Error(u(40));return e._reactRootContainer?(us(function(){ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Ke]=null})}),!0):!1},Tn.unstable_batchedUpdates=Iu,Tn.unstable_renderSubtreeIntoContainer=function(e,n,r,l){if(!sl(r))throw Error(u(200));if(e==null||e._reactInternals===void 0)throw Error(u(38));return ol(e,n,r,!1,l)},Tn.version="18.3.1-next-f1338f8080-20240426",Tn}var xh;function Jh(){if(xh)return Wu.exports;xh=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Wu.exports=Cp(),Wu.exports}var wh;function Tp(){if(wh)return ll;wh=1;var s=Jh();return ll.createRoot=s.createRoot,ll.hydrateRoot=s.hydrateRoot,ll}var Ep=Tp();const Vu={settings:{total_time:72,cities_per_case:4,travel_time:4,time_tick_speed:.5},encounter_timers:{henchman_duration:10,good_deed_duration:8},difficulty:{easy:{total_time:96,cities_per_case:3,henchman_duration:15,good_deed_duration:12},normal:{total_time:72,cities_per_case:4,henchman_duration:10,good_deed_duration:8},hard:{total_time:48,cities_per_case:5,henchman_duration:7,good_deed_duration:5}}},kh={backgrounds:{traveling:"https://images.unsplash.com/photo-1697799756493-1370f248d51e?w=1920&q=80"},cities:[{id:"paris",name:"Paris",country:"France",region:"europe",lat:48.8566,lon:2.3522,icon:"",fact:"The Eiffel Tower was originally intended to be a temporary structure, built for the 1889 World's Fair.",background_image:"https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=1920&q=80",landmarks:[{id:"plaza_athenee",name:"Plaza Athne",type:"hotel",neighborhood:"8th Arrondissement",icon:"",lat:48.8664,lon:2.3045},{id:"catacombs",name:"Paris Catacombs",type:"rogue",neighborhood:"14th Arrondissement",icon:"",lat:48.8338,lon:2.3324,time_cost:2},{id:"eiffel_tower",name:"Eiffel Tower",type:"investigation",neighborhood:"7th Arrondissement",icon:"",lat:48.8584,lon:2.2945,time_cost:3},{id:"louvre",name:"The Louvre",type:"investigation",neighborhood:"1st Arrondissement",icon:"",lat:48.8606,lon:2.3376,time_cost:3},{id:"notre_dame",name:"Notre-Dame",type:"investigation",neighborhood:"le de la Cit",icon:"",lat:48.853,lon:2.3499,time_cost:3}]},{id:"tokyo",name:"Tokyo",country:"Japan",region:"asia",lat:35.6762,lon:139.6503,icon:"",fact:"Tokyo's Shibuya Crossing is the busiest pedestrian intersection in the world, with up to 3,000 people crossing at once.",background_image:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=1920&q=80",landmarks:[{id:"park_hyatt_tokyo",name:"Park Hyatt Tokyo",type:"hotel",neighborhood:"Shinjuku",icon:"",lat:35.685,lon:139.6917},{id:"akihabara",name:"Akihabara District",type:"rogue",neighborhood:"Chiyoda",icon:"",lat:35.6982,lon:139.7731,time_cost:2},{id:"shibuya_crossing",name:"Shibuya Crossing",type:"investigation",neighborhood:"Shibuya",icon:"",lat:35.6595,lon:139.7004,time_cost:3},{id:"sensoji_temple",name:"Senso-ji Temple",type:"investigation",neighborhood:"Asakusa",icon:"",lat:35.7148,lon:139.7967,time_cost:3},{id:"tokyo_tower",name:"Tokyo Tower",type:"investigation",neighborhood:"Minato",icon:"",lat:35.6586,lon:139.7454,time_cost:3}]},{id:"cairo",name:"Cairo",country:"Egypt",region:"africa",lat:30.0444,lon:31.2357,icon:"",fact:"The Great Pyramid of Giza was the tallest man-made structure in the world for over 3,800 years.",background_image:"https://images.unsplash.com/photo-1572252009286-268acec5ca0a?w=1920&q=80",landmarks:[{id:"mena_house",name:"Marriott Mena House",type:"hotel",neighborhood:"Giza",icon:"",lat:29.9954,lon:31.1318},{id:"sultan_hassan",name:"Sultan Hassan Mosque",type:"rogue",neighborhood:"Old Cairo",icon:"",lat:30.0323,lon:31.2597,time_cost:2},{id:"great_pyramid",name:"Great Pyramid",type:"investigation",neighborhood:"Giza",icon:"",lat:29.9792,lon:31.1342,time_cost:3},{id:"khan_el_khalili",name:"Khan el-Khalili",type:"investigation",neighborhood:"Islamic Cairo",icon:"",lat:30.0472,lon:31.262,time_cost:3},{id:"nile_corniche",name:"Nile Corniche",type:"investigation",neighborhood:"Downtown",icon:"",lat:30.0444,lon:31.2357,time_cost:3}]},{id:"london",name:"London",country:"United Kingdom",region:"europe",lat:51.5074,lon:-.1278,icon:"",fact:"Big Ben is actually the name of the bell inside the tower, not the tower itself.",background_image:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=1920&q=80",landmarks:[{id:"the_savoy",name:"The Savoy",type:"hotel",neighborhood:"Strand",icon:"",lat:51.5105,lon:-.1203},{id:"camden_market",name:"Camden Market",type:"rogue",neighborhood:"Camden",icon:"",lat:51.5419,lon:-.1435,time_cost:2},{id:"big_ben",name:"Big Ben",type:"investigation",neighborhood:"Westminster",icon:"",lat:51.5007,lon:-.1246,time_cost:3},{id:"tower_bridge",name:"Tower Bridge",type:"investigation",neighborhood:"Tower Hamlets",icon:"",lat:51.5055,lon:-.0754,time_cost:3},{id:"piccadilly_circus",name:"Piccadilly Circus",type:"investigation",neighborhood:"West End",icon:"",lat:51.51,lon:-.1341,time_cost:3}]},{id:"rome",name:"Rome",country:"Italy",region:"europe",lat:41.9028,lon:12.4964,icon:"",fact:"The Trevi Fountain collects roughly 3,000 euros in coins every day, which goes to charity.",background_image:"https://images.unsplash.com/photo-1552832230-c0197dd311b5?w=1920&q=80",landmarks:[{id:"hotel_hassler",name:"Hotel Hassler",type:"hotel",neighborhood:"Spanish Steps",icon:"",lat:41.9063,lon:12.4825},{id:"bocca_verita",name:"Bocca della Verit",type:"rogue",neighborhood:"Forum Boarium",icon:"",lat:41.8882,lon:12.4815,time_cost:2},{id:"colosseum",name:"Colosseum",type:"investigation",neighborhood:"Palatino",icon:"",lat:41.8902,lon:12.4922,time_cost:3},{id:"trevi_fountain",name:"Trevi Fountain",type:"investigation",neighborhood:"Trevi",icon:"",lat:41.9009,lon:12.4833,time_cost:3},{id:"vatican",name:"Vatican",type:"investigation",neighborhood:"Vatican City",icon:"",lat:41.9029,lon:12.4534,time_cost:3}]},{id:"berlin",name:"Berlin",country:"Germany",region:"europe",lat:52.52,lon:13.405,icon:"",fact:"Berlin has more bridges than Venice  over 1,700 compared to Venice's 400.",background_image:"https://images.unsplash.com/photo-1560969184-10fe8719e047?w=1920&q=80",landmarks:[{id:"hotel_adlon",name:"Hotel Adlon Kempinski",type:"hotel",neighborhood:"Mitte",icon:"",lat:52.5159,lon:13.3805},{id:"teufelsberg",name:"Teufelsberg",type:"rogue",neighborhood:"Grunewald",icon:"",lat:52.4972,lon:13.2407,time_cost:2},{id:"brandenburg_gate",name:"Brandenburg Gate",type:"investigation",neighborhood:"Mitte",icon:"",lat:52.5163,lon:13.3777,time_cost:3},{id:"east_side_gallery",name:"East Side Gallery",type:"investigation",neighborhood:"Friedrichshain",icon:"",lat:52.5053,lon:13.4396,time_cost:3},{id:"alexanderplatz",name:"Alexanderplatz",type:"investigation",neighborhood:"Mitte",icon:"",lat:52.5219,lon:13.4132,time_cost:3}]},{id:"sydney",name:"Sydney",country:"Australia",region:"oceania",lat:-33.8688,lon:151.2093,icon:"",fact:"The Sydney Opera House's roof is covered with over 1 million tiles that were made in Sweden.",background_image:"https://images.unsplash.com/photo-1506973035872-a4ec16b8e8d9?w=1920&q=80",landmarks:[{id:"park_hyatt_sydney",name:"Park Hyatt Sydney",type:"hotel",neighborhood:"The Rocks",icon:"",lat:-33.859,lon:151.2103},{id:"rocks_market",name:"The Rocks Market",type:"rogue",neighborhood:"The Rocks",icon:"",lat:-33.8595,lon:151.2087,time_cost:2},{id:"opera_house",name:"Opera House",type:"investigation",neighborhood:"Circular Quay",icon:"",lat:-33.8568,lon:151.2153,time_cost:3},{id:"bondi_beach",name:"Bondi Beach",type:"investigation",neighborhood:"Bondi",icon:"",lat:-33.8908,lon:151.2743,time_cost:3},{id:"harbour_bridge",name:"Harbour Bridge",type:"investigation",neighborhood:"The Rocks",icon:"",lat:-33.8523,lon:151.2108,time_cost:3}]},{id:"moscow",name:"Moscow",country:"Russia",region:"europe",lat:55.7558,lon:37.6173,icon:"",fact:"Moscow's metro system is so deep that some stations double as nuclear bunkers.",background_image:"https://images.unsplash.com/photo-1513326738677-b964603b136d?w=1920&q=80",landmarks:[{id:"hotel_national",name:"Hotel National",type:"hotel",neighborhood:"Tverskoy",icon:"",lat:55.7575,lon:37.6145},{id:"izmailovsky_market",name:"Izmailovsky Market",type:"rogue",neighborhood:"Izmailovo",icon:"",lat:55.7962,lon:37.7517,time_cost:2},{id:"red_square",name:"Red Square",type:"investigation",neighborhood:"Kitay-gorod",icon:"",lat:55.7539,lon:37.6208,time_cost:3},{id:"kremlin",name:"The Kremlin",type:"investigation",neighborhood:"Tverskoy",icon:"",lat:55.752,lon:37.6175,time_cost:3},{id:"arbat_street",name:"Arbat Street",type:"investigation",neighborhood:"Arbat",icon:"",lat:55.7507,lon:37.5878,time_cost:3}]}]},Pp={destination_clues:{paris:[{text:"They asked about flights to the city of lights"},{text:"They asked about TGV trains across the Channel"},{text:"They asked about the Eiffel Tower's viewing deck"},{text:"They asked about the Moulin Rouge"},{text:"They asked about the Muse d'Orsay"},{text:"They asked about the Arc de Triomphe"},{text:"They asked about the Palace of Versailles"}],tokyo:[{text:"They asked about bullet trains to a city with cherry blossoms"},{text:"They were reading about samurai history"},{text:"They were interested in Mount Fuji excursions"},{text:"They were interested in Shinjuku's nightlife"},{text:"They were interested in the Tsukiji fish market"},{text:"They were interested in robot restaurants"},{text:"They were researching the Imperial Palace"}],cairo:[{text:"They were reading about pyramids and the Nile"},{text:"They mentioned wanting to see the Sphinx"},{text:"They mentioned the Valley of the Kings"},{text:"They mentioned cruising the Nile"},{text:"They mentioned the Aswan High Dam"},{text:"They mentioned the Egyptian Museum"},{text:"They were studying hieroglyphics at a bookstore"}],london:[{text:"They mentioned crossing the Channel to see Big Ben"},{text:"They wanted to visit the British Museum"},{text:"They mentioned the Thames and Tower Bridge"},{text:"They wanted to see Shakespeare's Globe Theatre"},{text:"They wanted to see the changing of the guard"},{text:"They wanted to ride the London Eye"},{text:"They mentioned wanting to see Buckingham Palace"}],rome:[{text:"They booked a flight to see the Colosseum"},{text:"They booked a flight to Leonardo da Vinci airport"},{text:"They wanted to visit the Trevi Fountain"},{text:"They asked about the Vatican Museums"},{text:"They asked about the Spanish Steps"},{text:"They asked about the Sistine Chapel"},{text:"They booked tickets to see Vatican City"}],berlin:[{text:"They asked about the Brandenburg Gate"},{text:"They asked about Checkpoint Charlie"},{text:"They asked about Museum Island"},{text:"They were researching the Reichstag building"},{text:"They were researching the Pergamon Museum"},{text:"They asked about remnants of a famous wall"},{text:"They were learning German phrases"}],sydney:[{text:"They were researching the Opera House down under"},{text:"They were researching the Great Barrier Reef"},{text:"They asked about kangaroos and the outback"},{text:"They were looking at flights to the Southern Hemisphere"},{text:"They were interested in Sydney Harbour Bridge"},{text:"They were looking at maps of Bondi Beach"},{text:"They mentioned the Blue Mountains"}],moscow:[{text:"They mentioned Red Square and the Kremlin"},{text:"They mentioned wanting to see Saint Basil's Cathedral"},{text:"They mentioned the Bolshoi Theatre"},{text:"They mentioned the Moscow Metro's ornate stations"},{text:"They mentioned wanting to see the Hermitage"},{text:"They mentioned the GUM department store"},{text:"They mentioned the Arbat Street"}]}},Np={suspect_clues:{gender:{male:["The suspect is male","Witnesses describe a man","He was in a hurry","A man matching the description was seen"],female:["The suspect is female","Witnesses describe a woman","She seemed nervous","A woman matching the description was seen"]},hair:{dark:["The suspect has dark hair","I noticed black or brown hair","Dark-haired, for sure","Their hair was definitely dark colored"],light:["The suspect has light hair","Blonde or gray hair","Light-haired, maybe reddish","Their hair was light colored"]},hobby:{intellectual:["The suspect enjoys intellectual pursuits","They mentioned loving chess","Seemed bookish, talked about poetry","They were carrying a book of philosophy"],physical:["The suspect is athletic","They talked about fencing","Mentioned going hunting","They seemed very physically fit"]}}},Lp={investigation_spots:[{id:"informant",name:"Local Informant",time_cost:3,gives:["suspect"],flavor:["A shady figure in a trench coat approaches...","Your contact slides into the booth..."]},{id:"police",name:"Police Station",time_cost:3,gives:["destination"],flavor:["The detective pulls up the case file...","Officers check their records..."]},{id:"vendor",name:"Street Vendor",time_cost:3,gives:["destination"],flavor:["The vendor squints, remembering...","After some haggling for information..."]}]},jp={suspects:[{id:"viktor",name:"Albert E. Katt",gender:"male",hair:"dark",hobby:"intellectual"},{id:"marcus",name:"Ron Turn",gender:"male",hair:"dark",hobby:"physical"},{id:"sebastian",name:"Benjamin Hanna",gender:"male",hair:"light",hobby:"intellectual"},{id:"dimitri",name:"Valentin E. Gurl",gender:"male",hair:"light",hobby:"physical"},{id:"mei",name:"Amanda Hugginkiss",gender:"female",hair:"dark",hobby:"intellectual"},{id:"natasha",name:"Natasha Petrova",gender:"female",hair:"dark",hobby:"physical"},{id:"scarlett",name:"Rikki D. Khan-Struckshun",gender:"female",hair:"light",hobby:"intellectual"},{id:"isabella",name:"Cole Fyre-Doven",gender:"female",hair:"light",hobby:"physical"}]},Ip={stolen_items:[{id:"crown_jewels",name:"the Crown Jewels",description:"Priceless gems stolen from the Tower of London"},{id:"mona_lisa",name:"the Mona Lisa",description:"Da Vinci's masterpiece vanished from the Louvre"},{id:"hope_diamond",name:"the Hope Diamond",description:"The legendary cursed diamond has disappeared"},{id:"ancient_scrolls",name:"ancient scrolls",description:"Priceless manuscripts stolen from a museum vault"},{id:"rare_artifact",name:"a rare artifact",description:"An irreplaceable historical treasure"},{id:"classified_documents",name:"classified documents",description:"Top secret files that could compromise national security"}]},Mp={assassination_attempts:[{id:"sniper",text:"A sniper's bullet whizzes past your ear, shattering a window behind you! You dive for cover as the shooter disappears into the crowd."},{id:"car",text:"A car accelerates toward you on the sidewalk! You leap aside at the last second, crashing through a fruit stand as the vehicle speeds away."},{id:"poison",text:"You notice your coffee tastes bitter. Knocking it aside, you see a shadowy figure slip out the caf's back door. Too close!"},{id:"knife",text:"A knife blade gleams in the crowd! You twist away as an assassin lunges past you, disappearing into an alley before you can react."},{id:"elevator",text:"The elevator cables snap! You grab the emergency hatch and pull yourself up as the car plummets. Someone tampered with this..."},{id:"electric",text:"Your hotel room doorknob is electrified! Your rubber-soled shoes save you. Someone really doesn't want you on this case."}]},zp={ranks:[{id:"rookie",label:"Rookie",min_cases:0},{id:"gumshoe",label:"Gumshoe",min_cases:1},{id:"sleuth",label:"Sleuth",min_cases:3},{id:"inspector",label:"Inspector",min_cases:5},{id:"detective",label:"Detective",min_cases:8},{id:"senior_detective",label:"Senior Detective",min_cases:12},{id:"chief",label:"Chief Inspector",min_cases:17},{id:"master",label:"Master Detective",min_cases:25}]},Ap={dead_ends:["I don't know what you're talking about. No suspicious characters around here.","Suspicious person? Never seen anyone like that. You must have the wrong place.","Can't help you, detective. Nobody matching that description has been through here.","Sorry, I haven't seen anyone unusual lately.","You're barking up the wrong tree, detective. Nothing to see here."]},Op={final_city_clues:[{text:"A sniper was spotted on a nearby rooftop, watching your arrival"},{text:"Hotel staff found a bomb under your reserved room's bed"},{text:"A man with a garrote was arrested asking about your whereabouts"},{text:"Poison was discovered in the restaurant where you have reservations"},{text:"A car with tinted windows has been circling the block for hours"},{text:"Local police intercepted a hitman contract with your photo"}]},Sh={good_deeds:[{id:"burning_cart",name:"Burning Cart",npc_name:"Maria",npc_title:"Street Vendor",city_type:"any",time_cost:3,description:"A street vendor's cart is on fire! They're frantically trying to save their merchandise while people run past.",plea:"Please! My livelihood!",help_text:"You help extinguish the fire and save most of the vendor's goods.",gratitude:"Thank you! I'll never forget this! If you're ever in trouble, I'll be there for you!",rescue_text:"You saved my life once. Now we're even, detective!"},{id:"child_traffic",name:"Child in Traffic",npc_name:"Chen",npc_title:"Grateful Father",city_type:"any",time_cost:2,description:"A small child has wandered into busy traffic! Cars are swerving and honking!",plea:"Someone help my child!",help_text:"You dash into traffic and pull the child to safety. The father rushes over, tears in his eyes.",gratitude:"You saved my son! I am forever in your debt!",rescue_text:"You saved my son. I won't let anything happen to you!"},{id:"lost_wallet",name:"Lost Wallet",npc_name:"James",npc_title:"Retired Officer",city_type:"any",time_cost:4,description:"You find a wallet on the ground, packed with cash and ID. The owner's hotel is across town.",plea:"I've been searching everywhere! My heart medication prescription was in there!",help_text:"You track down the owner and return the wallet intact. He's overwhelmed with relief.",gratitude:"You're a good soul. The world needs more people like you!",rescue_text:"Good people look out for each other. Now it's my turn!"},{id:"elderly_groceries",name:"Elderly Person's Groceries",npc_name:"Ruth",npc_title:"Grandmother",city_type:"any",time_cost:3,description:"An elderly woman struggles with heavy grocery bags. She looks exhausted and the stairs to her apartment are steep.",plea:"I'll manage, dear... eventually.",help_text:"You carry her groceries up four flights of stairs and help her unpack.",gratitude:"Such a kind soul! May fortune smile upon you!",rescue_text:"No one hurts my guardian angel!"},{id:"stop_pickpocket",name:"Stop Pickpocket",npc_name:"Yuki",npc_title:"Tourist",city_type:"any",time_cost:2,description:"You spot a pickpocket targeting a distracted tourist. They're reaching for the tourist's camera!",plea:"That camera has all my vacation photos!",help_text:"You grab the pickpocket's wrist and recover the camera. The tourist is grateful and shaken.",gratitude:"I can't believe you noticed! Thank you so much!",rescue_text:"You helped a stranger. Now this stranger helps you!"},{id:"lost_traveler",name:"Lost Traveler",npc_name:"Ahmed",npc_title:"Business Traveler",city_type:"any",time_cost:4,description:"A businessman is desperately lost, trying to reach an important meeting. His phone is dead and no one speaks his language.",plea:"Please, I'm late for the biggest deal of my life!",help_text:"You guide him personally to his destination. He makes his meeting with minutes to spare.",gratitude:"You saved my career! Please, take this as thanks. (gives expensive pen)",rescue_text:"You helped me in my darkest hour. Now it's my turn!"},{id:"injured_animal",name:"Injured Animal",npc_name:"Sofia",npc_title:"Veterinarian",city_type:"any",time_cost:3,description:"A injured dog lies in an alley, whimpering. People walk past, but a young vet is trying to coax it out alone.",plea:"I need help! It's scared and hurt!",help_text:"You help the vet catch the dog and drive them to her clinic. She treats the dog's injuries.",gratitude:"You have a good heart. The world will reward you for it.",rescue_text:"I save lives every day. Today, I save yours!"},{id:"falling_scaffolding",name:"Falling Scaffolding",npc_name:"Marco",npc_title:"Construction Worker",city_type:"any",time_cost:2,description:"Construction scaffolding is about to collapse! A worker is directly underneath, oblivious with headphones on!",plea:"[Unaware of danger]",help_text:"You tackle the worker out of the way just as the scaffolding crashes down.",gratitude:"You... you saved my life! I can't... thank you!",rescue_text:"You saved me. I save you. Simple!"}],fake_good_deeds:[{id:"burning_building_trap",name:"Burning Building (All The Cats)",trigger_karma:5,chance:.25,time_cost:8,injury_chance:.75,description:"A building is on fire! You hear crying from inside - it sounds like a child!",plea:"Please! My daughter is inside! And our cats! All seventeen of them!",setup_reveal:`As you help the "child" (actually a small adult syndicate member), the situation escalates. Every time you think you're done, there's another cat. The building is structurally unsound.`,injury_result:"A beam collapses on your leg. Permanent limp. -2 hours per investigation going forward.",gratitude_fake:"Thank you so much! All the cats are safe! (They were syndicate operatives)"},{id:"elderly_trap",name:"Elderly Person (Elaborate Setup)",trigger_karma:5,chance:.25,time_cost:8,injury_chance:.75,description:"An elderly person has fallen and can't get up! They need help getting to the hospital across town.",plea:"Help! I've fallen! My medication is at home, we need to go there first!",setup_reveal:`The "elderly person" keeps adding complications. First medication at home, then the pharmacy, then visiting a friend, then groceries. When you finally realize it's a trap, the syndicate ambushes you.`,injury_result:"Attacked during the ambush. Broken hand. Gadgets take 2x as long to deploy going forward.",gratitude_fake:"You're so kind, dearie! (Then: 'The syndicate sends their regards.')"},{id:"drowning_child_trap",name:"Drowning Child (Gas Trap)",trigger_karma:5,chance:.25,time_cost:8,injury_chance:.75,description:"A child is drowning in the canal! You need to jump in and save them immediately!",plea:"Help! I can't swim! HELP!",setup_reveal:'The "child" is actually a robotic decoy. When you jump in, the water is laced with a chemical agent that affects your respiratory system.',injury_result:"Chemical exposure. Scarred lungs. Reduced stamina - all time costs increase by 1 hour.",gratitude_fake:"(The 'child' shorts out and sinks. You've been had.)"},{id:"lost_child_trap",name:"Lost Child (Kidnapping Setup)",trigger_karma:5,chance:.25,time_cost:8,injury_chance:.75,description:"A crying child says they're lost and can't find their parents. They need help!",plea:"I can't find my mommy! Can you help me find her? She said to meet at... I don't remember!",setup_reveal:`The "child" leads you on a wild goose chase through increasingly dangerous areas. Finally leads you into an ambush. The "child" is the mastermind's actual child, trained in manipulation.`,injury_result:"Brutal beating by waiting syndicate members. Head trauma. Migraines reduce investigation effectiveness - may miss clues (33% chance).",gratitude_fake:"Thanks for playing, detective! (The child laughs and runs away)"},{id:"injured_worker_trap",name:"Injured Construction Worker (Scaffolding Collapse)",trigger_karma:5,chance:.25,time_cost:8,injury_chance:.75,description:"A construction worker is pinned under fallen scaffolding! They need immediate help!",plea:"Help! I'm pinned! I can't feel my legs!",setup_reveal:"The worker is real but the syndicate rigged the rest of the scaffolding. As you help free them, the entire structure collapses on both of you.",injury_result:"Crushed by debris. Multiple injuries. Eye patch required - visual clues harder to spot (some clues may be missed).",gratitude_fake:"(The worker disappears. Setup confirmed.)"},{id:"poisoned_vendor_trap",name:"Poisoned Street Vendor (Contamination)",trigger_karma:5,chance:.25,time_cost:8,injury_chance:.75,description:"A street vendor collapses, foaming at the mouth! They've been poisoned!",plea:"(Vendor can't speak, just points desperately at their throat)",setup_reveal:"When you try to help, you're exposed to the same poison on their skin. The vendor was a syndicate plant, immunized against the toxin. You aren't.",injury_result:"Nerve damage from poison exposure. Trembling hands - gadget deployment failure chance (25%).",gratitude_fake:"(The vendor 'recovers' quickly and vanishes)"}]},Rp={rogue_actions:[{id:"threaten_informant",name:"Threaten Informant",type:"investigation",replaces_spot:"informant",time_saved:2,notoriety_gain:1,description:"You slam the informant against the wall. They need to understand you're serious.",choice_text:"Tell me what I want to know or I'll make sure you regret it.",success_text:"They talk immediately, terror in their eyes. You get the information you need.",consequence:"This informant will never cooperate again. Word spreads about your methods.",future_penalty:"Informant spot unavailable in future cases (this city)"},{id:"break_in_police",name:"Break Into Police Station",type:"investigation",replaces_spot:"police",time_saved:4,notoriety_gain:2,description:"Why wait for bureaucracy? Break in after hours and access the files yourself.",choice_text:"I don't have time for red tape. I'm going in.",success_text:"You crack the lock and access their database. No one sees you... this time.",consequence:"Police cooperation ends. They know someone breached their system.",future_penalty:"Police spot unavailable in all future cases + harder trial"},{id:"steal_vehicle",name:"Steal Vehicle",type:"travel",replaces_spot:"airport",time_saved:4,notoriety_gain:2,description:"Carjack a vehicle and drive instead of flying. No airport security, no waiting.",choice_text:"I'm commandeering this vehicle. Official police business!",success_text:"You reach your destination immediately. The car is abandoned at the scene.",consequence:"Grand theft auto. International incident. Interpol alerted.",future_penalty:"Wanted status - police pursue you on arrival"},{id:"rough_up_witness",name:"Rough Up Witness",type:"investigation",replaces_spot:"vendor",time_saved:6,notoriety_gain:2,description:"This witness is holding back. A little physical persuasion will loosen their tongue.",choice_text:"You WILL talk. One way or another.",success_text:"After some... encouragement, they tell you everything. They're shaking.",consequence:"Witness too traumatized to testify. Trial will be harder.",future_penalty:"Trial requires more evidence + witness tampering charges risk"},{id:"plant_evidence",name:"Plant Evidence",type:"final_city",replaces_spot:"warrant",time_saved:0,notoriety_gain:3,description:"You're not 100% sure? Make sure. Plant evidence to guarantee conviction.",choice_text:"I know they're guilty. A little insurance won't hurt.",success_text:"Evidence planted. The trial will be a slam dunk now. No one will know...",consequence:"Wrongful conviction possible. Career ending if discovered. Haunted by injustice.",future_penalty:"Risk of discovery (25% per case)  instant termination + bad ending"},{id:"bribe_security",name:"Bribe Airport Security",type:"sleep",replaces_spot:"sleep",time_saved:7,notoriety_gain:1,description:"Pay off airport security to let you work through the night. No sleep needed.",choice_text:"Here's $500. I was never here, understand?",success_text:"Security looks the other way. You keep working while others sleep.",consequence:"Corruption. Security can blackmail you. Money problems mount.",future_penalty:"Random gadget unavailable (sold to pay debts) + blackmail risk"},{id:"destroy_property",name:"Destroy Property",type:"investigation",replaces_spot:"any",time_saved:3,notoriety_gain:2,description:"Set fire to a building to force suspects to flee. Interrogate them in the chaos.",choice_text:"Sometimes you need to smoke them out. Literally.",success_text:"The building burns. Suspects flee in panic. You grab one and get answers.",consequence:"Arson. Property damage. Civilians endangered. Media firestorm.",future_penalty:"Suspension risk (skips next case if notoriety too high) + lawsuit"},{id:"fake_credentials",name:"Fake Credentials",type:"investigation",replaces_spot:"police",time_saved:4,notoriety_gain:1,description:"Forge diplomatic credentials to access restricted areas immediately.",choice_text:"I'm with the State Department. Give me access. Now.",success_text:"They buy it. You're escorted to the secure files without question.",consequence:"Identity fraud. International incident if caught. Diplomatic crisis.",future_penalty:"Random countries refuse entry (destinations unavailable)"},{id:"intimidate_suspect",name:"Intimidate Suspect",type:"final_city",replaces_spot:"catch",time_saved:0,notoriety_gain:2,description:"Beat a confession out of the suspect. Skip the warrant, go straight to arrest.",choice_text:"Confess now or this gets much worse for you.",success_text:"They confess under duress. You have your confession, but at what cost?",consequence:"Confession inadmissible. Police brutality charges. Cover-up required.",future_penalty:"Trial auto-fails if no other evidence + brutality investigation"}]},Dp={henchman_encounters:[{id:"street_tailing",type:"henchman",name:"Street Tailing",description:"A shadowy figure is following you through the crowded market...",correct_gadget:"smoke_bomb",time_penalty_wrong:4,time_penalty_none:6,success_text:"You deploy the Smoke Bomb! The henchman loses sight of you in the thick cloud. You escape without losing any time!",failure_text:"By the time backup arrives, the henchman has already slowed you down and escaped.",no_gadget_text:"You try to evade manually but the henchman is persistent. After a lengthy chase through back alleys, you finally lose them."},{id:"alley_ambush",type:"henchman",name:"Alley Ambush",description:"Someone jumps out from the shadows! They're blocking your path!",correct_gadget:"smoke_bomb",time_penalty_wrong:4,time_penalty_none:6,success_text:"You throw the Smoke Bomb at your feet! In the confusion, you slip past your attacker unseen.",failure_text:"Your chosen gadget doesn't help in this close-quarters situation. You're forced to fight your way out.",no_gadget_text:"A dangerous scuffle ensues. You eventually overcome your attacker but precious time is lost."},{id:"booby_trap",type:"henchman",name:"Booby Trap",description:"Your hotel room door is rigged with a trap... A tripwire glints in the dim light.",correct_gadget:"xray_glasses",time_penalty_wrong:4,time_penalty_none:6,success_text:"Using the X-Ray Glasses, you spot the entire mechanism! You carefully disarm it without incident.",failure_text:"Your gadget can't detect the hidden components. You trigger the trap and barely escape.",no_gadget_text:"You try to disarm it blind. The trap springs, filling the room with gas. You stumble out, coughing and disoriented."},{id:"suspicious_package",type:"henchman",name:"Suspicious Package",description:"A package addressed to you arrives at the hotel desk. It's ticking...",correct_gadget:"xray_glasses",time_penalty_wrong:4,time_penalty_none:6,success_text:"The X-Ray Glasses reveal it's a harmless clock attached to confetti! A distraction, but now you know.",failure_text:"You waste time trying to defuse what turns out to be a elaborate fake. They've bought time to escape.",no_gadget_text:"You evacuate the building and call the bomb squad. Hours pass before the all-clear is given."},{id:"surrounded_by_goons",type:"henchman",name:"Surrounded by Goons",description:"Three burly henchmen corner you in an alley. They're cracking their knuckles menacingly.",correct_gadget:"shoe_phone",time_penalty_wrong:4,time_penalty_none:6,success_text:"You activate the Shoe Phone! Backup arrives in minutes, and the goons scatter.",failure_text:"Your gadget won't help against multiple attackers. You take a beating before they flee.",no_gadget_text:"You fight valiantly but you're outnumbered. Eventually they retreat, but you're bruised and exhausted."},{id:"police_interrogation",type:"henchman",name:"Police Interrogation",description:`Corrupt local police have detained you for "questioning." They're working for the Syndicate!`,correct_gadget:"shoe_phone",time_penalty_wrong:4,time_penalty_none:6,success_text:"The Shoe Phone connects you to your agency. They apply diplomatic pressure and you're released immediately.",failure_text:"Your gadget doesn't help with bureaucracy. You're stuck in the cell for hours.",no_gadget_text:"You argue your case but they're unmoved. It takes hours before your credentials are verified."}],assassination_attempts:[{id:"rooftop_sniper",type:"assassination",name:"Rooftop Sniper",description:"A glint of light from a rooftop! A sniper is taking aim at you!",timer_duration:5,animation:"crosshairs_zeroing",animation_description:"Sniper crosshairs slowly zeroing in, red laser dot on chest",correct_gadget:"grappling_hook",time_penalty_wrong:6,time_penalty_none:8,success_text:"You fire the Grappling Hook and swing up to the roof! The sniper flees before you can reach them, but the threat is neutralized.",failure_text:"Your gadget won't help you reach the sniper. You dive for cover as bullets chip the pavement. You're pinned down for hours.",no_gadget_text:"You sprint for cover as shots ring out! After a harrowing chase through the streets, you finally lose your pursuer.",timeout_text:"Time runs out! The shot rings out and you barely dodge, crashing through a window. You're injured and disoriented for hours."},{id:"poisoned_drink",type:"assassination",name:"Poisoned Drink",description:"Your coffee tastes bitter. Something's wrong... Your vision is already blurring!",timer_duration:6,animation:"poison_spreading",animation_description:"Dark poison visibly spreading through the liquid in slow motion",correct_gadget:"antidote_pills",time_penalty_wrong:6,time_penalty_none:8,success_text:"You immediately swallow the Antidote Pills! The effects are reversed within minutes. Close call!",failure_text:"Your gadget won't cure poison! You barely make it to the hospital. Hours pass in recovery.",no_gadget_text:"You force yourself to vomit and stumble to a hospital. The doctors work for hours to stabilize you.",timeout_text:"You collapse! The poison spreads through your system. You wake up hours later in a hospital bed."},{id:"locked_room",type:"assassination",name:"Locked Room",description:"The door slams shut! The room is filling with gas! The lock is sophisticated...",timer_duration:7,animation:"gas_filling",animation_description:"Deadly gas slowly filling the room from floor to ceiling",correct_gadget:"laser_watch",time_penalty_wrong:6,time_penalty_none:8,success_text:"The Laser Watch cuts through the lock mechanism like butter! You escape before the gas takes effect.",failure_text:"Your gadget won't cut metal! You eventually force the door but you've inhaled dangerous amounts of gas.",no_gadget_text:"You bash at the door until your shoulder is bruised. You finally break through, weak and gasping.",timeout_text:"The gas reaches your face! You barely break free but you're severely affected. Hours of medical treatment follow."},{id:"falling_safe",type:"assassination",name:"Falling Safe",description:"You hear a loud CRACK above you! A massive safe is plummeting toward you!",timer_duration:5,animation:"safe_falling",animation_description:"Heavy safe falling from above with growing shadow beneath",correct_gadget:"grappling_hook",time_penalty_wrong:6,time_penalty_none:8,success_text:"You fire the Grappling Hook and swing clear! The safe crashes where you were standing moments ago.",failure_text:"Your gadget won't help you escape! You dive aside at the last second but you're injured by debris.",no_gadget_text:"You roll aside desperately! The safe misses by inches but falling debris pins you down for hours.",timeout_text:"CRASH! You're too slow! The safe doesn't hit you directly but the impact throws you into a wall. You're badly injured."},{id:"ticking_bomb",type:"assassination",name:"Ticking Bomb",description:"A package under the table starts beeping! The timer shows 5 seconds and counting!",timer_duration:5,animation:"burning_fuse",animation_description:"Sparking fuse burning toward explosive, digital timer counting down",correct_gadget:"xray_glasses",time_penalty_wrong:6,time_penalty_none:8,success_text:"The X-Ray Glasses let you see which wire to cut! You defuse it with one second to spare!",failure_text:"Your gadget can't help identify the right wire! You run but the blast still catches you.",no_gadget_text:"You grab the bomb and hurl it out the window! It detonates mid-air. The blast still knocks you down.",timeout_text:"BOOM! You didn't act fast enough! The explosion throws you across the room. You're unconscious for hours."},{id:"knife_assassin",type:"assassination",name:"Knife Assassin",description:"A shadowy figure lunges from behind! A gleaming knife arcs toward you in slow motion!",timer_duration:6,animation:"knife_arc",animation_description:"Knife slowly arcing through air toward player, assassin's silhouette",correct_gadget:"smoke_bomb",time_penalty_wrong:6,time_penalty_none:8,success_text:"You deploy the Smoke Bomb! The assassin's blade cuts through empty smoke as you vanish!",failure_text:"Your gadget won't make you disappear! You deflect the blade but suffer a deep cut. Medical treatment takes hours.",no_gadget_text:"You twist away at the last second! The knife grazes your shoulder. You fight off the assassin but you're injured.",timeout_text:"The blade strikes! You barely deflect it but you're badly cut. The assassin escapes while you seek medical help."}]},Bp={gadgets:[{id:"smoke_bomb",name:"Smoke Bomb",icon:"",description:"A miniature smoke grenade for quick escapes",works_on:["street_tailing","alley_ambush"],flavor:"Deploy a thick cloud of smoke to vanish from sight"},{id:"xray_glasses",name:"X-Ray Glasses",icon:"",description:"See through walls and detect hidden threats",works_on:["booby_trap","suspicious_package"],flavor:"Peer through surfaces to reveal what's hidden"},{id:"shoe_phone",name:"Shoe Phone",icon:"",description:"Call for backup in tight situations",works_on:["surrounded_by_goons","police_interrogation"],flavor:"A concealed communication device in your footwear"},{id:"laser_watch",name:"Laser Watch",icon:"",description:"A precision cutting tool disguised as a timepiece",works_on:["locked_room","tied_up_scenario"],flavor:"Cut through metal and restraints with ease"},{id:"grappling_hook",name:"Grappling Hook Ring",icon:"",description:"Scale buildings or swing to safety",works_on:["rooftop_sniper","building_escape"],flavor:"Reach new heights or escape danger from above"},{id:"antidote_pills",name:"Antidote Pills",icon:"",description:"Universal antitoxin for various poisons",works_on:["poisoned_drink","nerve_gas"],flavor:"Counteract any toxin before it takes effect"}]},Hp={witness_closing_phrases:["That's all I know, I swear!","Please, don't hurt me!","I've told you everything!","I don't know anything else!","That's everything, I promise!","You gotta believe me!","I'm just a bystander!","Don't shoot the messenger!","That's all I saw, honest!","I wish I knew more!","Please, I have a family!","That's the truth, I swear it!"]};function zi(s){const a=[...s];for(let u=a.length-1;u>0;u--){const h=Math.floor(Math.random()*(u+1));[a[u],a[h]]=[a[h],a[u]]}return a}function sr(s){return!s||s.length===0?null:s[Math.floor(Math.random()*s.length)]}function Zp(s,a="id"){return Object.fromEntries(s.map(u=>[u[a],u]))}function Fp(s,a){return s.reduce((u,h)=>{const m=h[a];return u[m]||(u[m]=[]),u[m].push(h),u},{})}function Up(s,a){return[...s].sort((h,m)=>m.min_cases-h.min_cases).find(h=>a>=h.min_cases)||s[0]}function Wp(s){const a=[];return Gp(s,a),$p(s,a),Vp(s,a),Yp(s,a),a.length>0&&(console.warn("Game data validation warnings:"),a.forEach(u=>console.warn(`  - ${u}`))),a}function Gp(s,a){const{suspects:u,suspectClues:h}=s,m=Object.keys(h),y=[],v=(x,w={})=>{if(x.length===0){y.push({...w});return}const[S,...M]=x,T=Object.keys(h[S]);for(const b of T)v(M,{...w,[S]:b})};v(m);for(const x of y){const w=u.filter(S=>m.every(M=>S[M]===x[M]));w.length===0?a.push(`Missing suspect for combination: ${JSON.stringify(x)}`):w.length>1&&a.push(`Multiple suspects for combination: ${JSON.stringify(x)}`)}}function $p(s,a){const{cityIds:u,destinationClues:h}=s;for(const m of u)h[m]||a.push(`City "${m}" has no destination clues`)}function Vp(s,a){const{destinationClues:u,suspectClues:h}=s;for(const[m,y]of Object.entries(u))y.length<3&&a.push(`City "${m}" has only ${y.length} destination clues (recommend 3+)`);for(const[m,y]of Object.entries(h))for(const[v,x]of Object.entries(y))x.length<2&&a.push(`Trait "${m}:${v}" has only ${x.length} clues (recommend 2+)`)}function Yp(s,a){const{investigationSpots:u}=s;u.some(v=>v.gives.includes("suspect"))||a.push("No investigation spot provides suspect clues");const m=u.map(v=>v.time_cost),y=[...m].sort((v,x)=>v-x);JSON.stringify(m)!==JSON.stringify(y)&&a.push("Investigation spots are not sorted by time_cost ascending")}function qp(){const s=kh.cities,a=kh.backgrounds,u=jp.suspects,h=zp.ranks,m=Lp.investigation_spots,y=Ip.stolen_items,v=Mp.assassination_attempts,x=Op.final_city_clues,w=Ap.dead_ends,S=Pp.destination_clues,M=Np.suspect_clues,T=Sh.good_deeds,b=Sh.fake_good_deeds,z=Rp.rogue_actions,A=Bp.gadgets,O=Hp.witness_closing_phrases,W=Vu.settings,Q=Vu.difficulty,$=Vu.encounter_timers,ee={settings:W,difficulty:Q,encounterTimers:$,backgrounds:a,witnessPhrases:O,cities:s,suspects:u,ranks:h,investigationSpots:m,stolenItems:y,assassinationAttempts:v,finalCityClues:x,deadEnds:w,goodDeeds:T,fakeGoodDeeds:b,rogueActions:z,gadgets:A,encounters:Dp,destinationClues:S,suspectClues:M,citiesById:Zp(s),citiesByRegion:Fp(s,"region"),cityIds:s.map(ue=>ue.id),traitNames:Object.keys(M)};return Wp(ee),ee}function Kp(s){const{cityIds:a,citiesById:u,suspects:h,stolenItems:m,traitNames:y,settings:v,gadgets:x,encounters:w,destinationClues:S,suspectClues:M,finalCityClues:T,deadEnds:b,investigationSpots:z,rogueActions:A}=s,W=zi([...a]).slice(0,v.cities_per_case),Q=sr(h),$=sr(m),ee=zi([...y]),ue=zi([...x]).slice(0,3),Pe=(w==null?void 0:w.henchman_encounters)||[],oe=zi(ue.map(J=>{const ve=Pe.filter(_e=>_e.correct_gadget===J.id);return ve.length>0?sr(ve):null}).filter(Boolean)),Te=sr((w==null?void 0:w.assassination_attempts)||[]),je=(A==null?void 0:A.filter(J=>J.type==="investigation"))||[];console.log("ROGUE ACTION DEBUG - Original order:",je.map(J=>J.id));const Ue=zi([...je]);console.log("ROGUE ACTION DEBUG - Shuffled order:",Ue.map(J=>J.id));const Oe=W.map((J,ve)=>{var Qe;const _e=ve===W.length-1,we=u[J],xe=ee[ve%ee.length],Le=Q[xe],F=((Qe=M[xe])==null?void 0:Qe[Le])||[],fe=Math.floor(Math.random()*z.length),G=sr(F);let j;if(_e)j=zi([...T]).slice(0,2).map(ut=>ut.text);else{const Ve=W[ve+1],ut=S[Ve]||[];j=zi([...ut]).slice(0,2).map(wt=>wt.text)}let U=[];if(!_e){const Ve=W[ve+1],ut=a.filter(wt=>wt!==J&&wt!==Ve),Nt=zi([...ut]).slice(0,3);U=zi([{cityId:Ve,isCorrect:!0},...Nt.map(wt=>({cityId:wt,isCorrect:!1}))]).map(wt=>({...wt,...u[wt.cityId]}))}const ce=zi([...b]),se=(we==null?void 0:we.landmarks)||[],ie=se.find(Ve=>Ve.type==="hotel")||null,ne=se.find(Ve=>Ve.type==="rogue")||null,Ee=se.filter(Ve=>Ve.type==="investigation"),ke=Ee.length>0?Ee:z,Re=Ue[ve%Ue.length]||null;return{cityId:J,cityName:(we==null?void 0:we.name)||J,isFinalCity:_e,traitToReveal:xe,suspectSpotIndex:fe,suspectClue:G,locationClues:j,destinations:U,deadEndClues:ce.slice(0,3),investigationSpots:ke,hotel:ie,rogueLocation:ne,rogueAction:Re,encounter:_e?Te:ve>0&&ve<W.length-1&&oe[ve-1]||null}}),te={cities:W,suspect:Q,stolenItem:$,traitOrder:ee,gadgets:ue,encounterSequence:oe,assassinationAttempt:Te,cityData:Oe,investigationSpots:z};return v.debug_mode&&(console.log("=== NEW MISSION GENERATED ==="),console.log("Suspect:",Q.name,`(${Q.gender}, ${Q.hair} hair, ${Q.hobby})`),console.log("Stolen:",$.name),console.log("Trail:",W.map(J=>{var ve;return(ve=u[J])==null?void 0:ve.name}).join("  ")),console.log("Trait reveal order:",ee),console.log("Gadgets:",ue.map(J=>J.name)),console.log("Encounters:",oe.map(J=>(J==null?void 0:J.name)||"none")),console.log("Assassination:",Te==null?void 0:Te.name),console.log("--- City Details ---"),Oe.forEach((J,ve)=>{var _e,we;console.log(`City ${ve} (${J.cityName}):`,{trait:J.traitToReveal,suspectSpot:J.suspectSpotIndex,suspectClue:J.suspectClue,locationClues:J.locationClues,encounter:((_e=J.encounter)==null?void 0:_e.name)||"none",rogueAction:((we=J.rogueAction)==null?void 0:we.id)||"none",destinations:J.destinations.map(xe=>`${xe.name}${xe.isCorrect?" ":""}`)})}),console.log("=== END MISSION DATA ==="),typeof window<"u"&&(window.__CARMEN_DEBUG__={currentCase:te,getCorrectPath:()=>W.map(J=>{var ve;return(ve=u[J])==null?void 0:ve.name}),getSuspect:()=>Q,getTraitOrder:()=>ee})),te}function bh(s,a,u,h){const{investigationSpots:m}=s,y=a.cityData[u];if(!y)return console.warn("No pre-generated data for city index:",u),m.map(w=>({spot:w,destinationClue:"No information available.",suspectClue:null}));const v=y.investigationSpots||m;if(h)return v.map((w,S)=>({spot:w,destinationClue:y.deadEndClues[S%y.deadEndClues.length],suspectClue:null}));let x=0;return v.map((w,S)=>{if(S===y.suspectSpotIndex)return{spot:w,destinationClue:null,suspectClue:y.suspectClue};{const M=y.locationClues[x%y.locationClues.length];return x++,{spot:w,destinationClue:M||"No information available.",suspectClue:null}}})}function Qp(s,a,u){const h=a.cityData[u];return h?h.destinations:(console.warn("No pre-generated data for city index:",u),[])}const lc="1.0.0",ef="carmen-save-state",Ch="carmen-profile",Xp=s=>({version:lc,savedAt:new Date().toISOString(),profile:{karma:s.karma,notoriety:s.notoriety,solvedCases:s.solvedCases,savedNPCs:s.savedNPCs,injuries:s.permanentInjuries},activeCase:s.currentCase?{case:s.currentCase,currentCityIndex:s.currentCityIndex,timeRemaining:s.timeRemaining,currentHour:s.currentHour,collectedClues:s.collectedClues,investigatedLocations:s.investigatedLocations,selectedWarrant:s.selectedWarrant,usedGadgets:s.usedGadgets,hadGoodDeedInCase:s.hadGoodDeedInCase,hadEncounterInCity:s.hadEncounterInCity,rogueUsedInCity:s.rogueUsedInCity,selectedTraits:s.selectedTraits,wrongCity:s.wrongCity,wrongCityData:s.wrongCityData}:null}),Jp=()=>{try{const s=localStorage.getItem(ef);if(!s)return tm();const a=JSON.parse(s);return a.version!==lc?(console.warn(`Save version mismatch: ${a.version} !== ${lc}`),{profile:a.profile,activeCase:null,versionMismatch:!0,oldVersion:a.version}):{profile:a.profile,activeCase:a.activeCase,versionMismatch:!1}}catch(s){return console.error("Failed to load save state:",s),{profile:null,activeCase:null,error:!0}}};let Th;const em=(s,a=!1)=>{const u=()=>{try{const h=Xp(s);localStorage.setItem(ef,JSON.stringify(h))}catch(h){console.error("Failed to save state:",h)}};a?u():(clearTimeout(Th),Th=setTimeout(u,500))},tm=()=>{try{const s=localStorage.getItem(Ch);if(s){const a=JSON.parse(s);return localStorage.removeItem(Ch),{profile:a,activeCase:null,migrated:!0}}}catch(s){console.error("Failed to migrate legacy profile:",s)}return{profile:null,activeCase:null}};function nm(s){var ri,qt,ct,_n,He,si;const[a,u]=P.useState("menu"),[h,m]=P.useState(null),[y,v]=P.useState(0),[x,w]=P.useState(72),[S,M]=P.useState(8),[T,b]=P.useState({city:[],suspect:[]}),[z,A]=P.useState([]),[O,W]=P.useState(null),[Q,$]=P.useState("home"),[ee,ue]=P.useState(0),[Pe,oe]=P.useState(null),[Te,je]=P.useState(!1),[Ue,Oe]=P.useState(""),[te,J]=P.useState(!1),[ve,_e]=P.useState(null),[we,xe]=P.useState(null),[Le,F]=P.useState({city:null,suspect:null}),[fe,G]=P.useState(null),[j,U]=P.useState(null),[ce,se]=P.useState(null),[ie,ne]=P.useState(!1),[Ee,ke]=P.useState(!1),[Re,Qe]=P.useState(null),[Ve,ut]=P.useState(0),[Nt,wt]=P.useState(0),[Be,bt]=P.useState([]),[Ye,Rt]=P.useState([]),[Lt,nn]=P.useState(null),[fn,pi]=P.useState(!1),[Oi,or]=P.useState(null),[ar,jt]=P.useState(null),[rn,Pn]=P.useState(null),[pn,Tt]=P.useState(null),[sn,Zn]=P.useState([]),[mt,Fn]=P.useState(!1),[on,Ut]=P.useState({gender:null,hair:null,hobby:null}),[Nn,mi]=P.useState(!1),[Ln,It]=P.useState(!1),[mn,Yt]=P.useState(null),[gi,yi]=P.useState(null),Ri=P.useRef(null),Un=P.useRef(null);P.useEffect(()=>{Ri.current=mn},[mn]),P.useEffect(()=>{Un.current=gi},[gi]);const[Di,ni]=P.useState(!1),[ii,gn]=P.useState(null),[yn,Wn]=P.useState(null),{settings:et,citiesById:rt,investigationSpots:me,assassinationAttempts:lr,goodDeeds:_i,fakeGoodDeeds:ur,rogueActions:ao,encounters:Fr}=s;et.time_tick_speed;const ht=P.useMemo(()=>h?rt[h.cities[y]]:null,[h,y,rt]),Wt=y===et.cities_per_case-1;P.useEffect(()=>{if(h&&ht&&a==="playing"){const ae=bh(s,h,y,te);xe(ae)}},[h,ht,y,te,a,s]),P.useEffect(()=>{const{profile:ae,activeCase:de,versionMismatch:Me}=Jp();ae&&(ut(ae.karma||0),wt(ae.notoriety||0),ue(ae.solvedCases||0),bt(ae.savedNPCs||[]),Rt(ae.injuries||[])),de&&!Me&&(m(de.case),v(de.currentCityIndex),w(de.timeRemaining),M(de.currentHour),b(de.collectedClues),A(de.investigatedLocations),W(de.selectedWarrant),Zn(de.usedGadgets),Fn(de.hadGoodDeedInCase),ke(de.hadEncounterInCity),ne(de.rogueUsedInCity),Ut(de.selectedTraits),J(de.wrongCity),_e(de.wrongCityData),u("playing")),Me&&mi(!0)},[]);const Dt=P.useCallback(()=>{em({karma:Ve,notoriety:Nt,solvedCases:ee,savedNPCs:Be,permanentInjuries:Ye,currentCase:h,currentCityIndex:y,timeRemaining:x,currentHour:S,collectedClues:T,investigatedLocations:z,selectedWarrant:O,usedGadgets:sn,hadGoodDeedInCase:mt,hadEncounterInCity:Ee,rogueUsedInCity:ie,selectedTraits:on,wrongCity:te,wrongCityData:ve},!0)},[Ve,Nt,ee,Be,Ye,h,y,x,S,T,z,O,sn,mt,Ee,ie,on,te,ve]),lo=P.useCallback(()=>{const ae=Kp(s),de=bh(s,ae,0,!1);m(ae),v(0),w(et.total_time),M(8),b({city:[],suspect:[]}),A([]),W(null),$("investigate"),u("briefing"),oe(null),je(!1),J(!1),_e(null),xe(de),F({city:null,suspect:null}),G(null),U(null),se(null),jt(null),nn(null),Tt(null),Zn([]),Fn(!1),ne(!1),ke(!1),Ut({gender:null,hair:null,hobby:null})},[s,et.total_time]),gs=P.useCallback(()=>{u("playing"),$("home"),Dt()},[Dt]),Ur=P.useCallback(ae=>{let de=ae,Me=(S+ae)%24;return(Me<S?S<23:S<23&&Me>=23)&&(de+=7,Me=6,U({message:"You rested for 7 hours. (11pm  6am)",hoursLost:7})),M(Me),w(ft=>ft-de),x-de<=0?(u("debrief"),!0):!1},[S,x]),ys=P.useCallback(()=>{const ae=(S+1)%24;return S===5&&ae===6&&U({message:"You rested until 6am.",hoursLost:0}),M(ae),w(de=>{const Me=de-1;return Me<=0&&u("debrief"),Me}),ae===23},[S]),vi=P.useCallback(ae=>2*Math.pow(2,ae),[]),uo=P.useMemo(()=>vi(z.length),[z.length,vi]),jn=P.useCallback(()=>{let ae=0;return Ye.some(de=>de.type==="limp")&&(ae+=2),Ye.some(de=>de.type==="scarred_lungs")&&(ae+=1),ae},[Ye]),ot=P.useCallback(()=>!!(Ye.some(ae=>ae.type==="head_trauma")&&Math.random()<.33||Ye.some(ae=>ae.type==="eye_patch")&&Math.random()<.5),[Ye]),co=P.useCallback(ae=>{if(!we||!we[ae]||Ln)return null;const de=we[ae],Me=de.spot,qe=vi(z.length),ft=jn(),Xe=qe+ft;return x<Xe?(oe("Not enough time for this investigation!"),null):z.includes(Me.id)?null:(It(!0),Yt({locationIndex:ae,spot:Me,clue:de}),F({city:null,suspect:null}),jt(null),se(null),U(null),A(Je=>[...Je,Me.id]),{type:"investigate",hoursCost:Xe,spinnerDuration:500,label:`Investigating ${Me.name}...`})},[x,we,z,jn,vi,Ln]),Wr=P.useCallback(()=>{var ft;const ae=Ri.current;if(!ae)return;const{spot:de,clue:Me}=ae;if(It(!1),Yt(null),Pn(de),ot())oe(`You investigated the ${de.name}, but your injuries made you miss the clue...`);else{F({city:Me.destinationClue,suspect:Me.suspectClue});const Xe=(ht==null?void 0:ht.name)||"Unknown",Je=de.name,gt=S;Me.destinationClue&&b(yt=>({...yt,city:[...yt.city,{text:Me.destinationClue,cityName:Xe,locationName:Je,timeCollected:gt}]})),Me.suspectClue&&b(yt=>({...yt,suspect:[...yt.suspect,{text:Me.suspectClue,cityName:Xe,locationName:Je,timeCollected:gt}]})),Dt()}if(!te&&!Ee){ke(!0);const Xe=(ft=h==null?void 0:h.cityData)==null?void 0:ft[y],Je=Xe==null?void 0:Xe.encounter;if(Je){Tt({...Je,type:Wt?"assassination":"henchman"});return}}if(!te&&!Wt&&!mt&&_i&&!Lt&&Math.random()<.25){const Xe=Ve>=5&&ur&&Math.random()<.25;if(Fn(!0),Xe){const Je=sr(ur);nn({...Je,isFake:!0})}else{const Je=sr(_i);nn({...Je,isFake:!1})}return}if(Wt&&Ee&&!pn)if(O){oe(`SUSPECT APPREHENDED! ${O.name} is now in custody.`),u("apprehended");return}else{oe("You've cornered the suspect! Issue a warrant in the Dossier tab to make an arrest.");return}},[te,Ve,_i,ur,Fr,ot,Ee,Wt,pn,O,ht,S,y,mt,h,Dt]),_s=P.useCallback(ae=>{if(!we||ie||Ln)return null;const de=2;if(x<de)return oe("Not enough time for this action!"),null;const Me=we.find(Je=>Je.destinationClue),qe=we.find(Je=>Je.suspectClue),ft=Me==null?void 0:Me.destinationClue,Xe=qe==null?void 0:qe.suspectClue;return It(!0),yi({rogueAction:ae,locationClue:ft,suspectClue:Xe}),F({city:null,suspect:null}),jt(null),se(null),U(null),ne(!0),{type:"rogue",hoursCost:de,spinnerDuration:300,label:`${ae.name}...`}},[x,we,ie,Ln]),cr=P.useCallback(()=>{var yt,kt;const ae=Un.current;if(!ae)return;const{rogueAction:de,locationClue:Me,suspectClue:qe}=ae;It(!1),yi(null);const ft=((kt=(yt=h==null?void 0:h.cityData)==null?void 0:yt[y])==null?void 0:kt.rogueLocation)||null;ft&&Pn(ft),Qe({action:de,locationClue:Me,suspectClue:qe}),F({city:null,suspect:null}),jt(null);const Xe=(ht==null?void 0:ht.name)||"Unknown",Je=de.name,gt=S;Me&&b(Gt=>({...Gt,city:[...Gt.city,{text:Me,cityName:Xe,locationName:Je,timeCollected:gt}]})),qe&&b(Gt=>({...Gt,suspect:[...Gt.suspect,{text:qe,cityName:Xe,locationName:Je,timeCollected:gt}]})),wt(Gt=>Gt+de.notoriety_gain)},[ht,S,h,y]),Gr=P.useCallback(()=>{if(!Re)return;const{locationClue:ae,suspectClue:de,action:Me}=Re;Qe(null),F({city:ae,suspect:de}),jt(Me)},[Re]),xi=P.useMemo(()=>!h||a!=="playing"?[]:Qp(s,h,y),[s,h,y,a]),Bi=P.useMemo(()=>((h==null?void 0:h.gadgets)||[]).map(de=>({...de,used:sn.includes(de.id)})),[h==null?void 0:h.gadgets,sn]),an=P.useCallback(ae=>{const de=jn(),Me=et.travel_time+de;if(x<Me)return oe("Not enough time to travel!"),null;let qe=te&&ve?rt[ve.id]||ve:ht;return rn&&rn.lat&&rn.lon&&(qe={...qe,lat:rn.lat,lon:rn.lon,name:rn.name||qe.name}),gn(qe),Wn(ae),ni(!0),Me},[x,et.travel_time,jn,ht,te,ve,rt,rn]),Hi=P.useCallback(()=>{if(!yn)return null;const ae=jn();return{type:"travel",hoursCost:et.travel_time+ae,spinnerDuration:0,label:"Arriving..."}},[yn,et.travel_time,jn]),Ae=P.useCallback(()=>{if(!yn)return;const ae=yn;ni(!1),gn(null),Wn(null),A([]),F({city:null,suspect:null}),jt(null),G(null),U(null),se(null),ne(!1),ke(!1),It(!1),Pn(null),ae.isCorrect?(J(!1),_e(null),v(de=>de+1),$("home")):(J(!0),_e({name:ae.name,country:ae.country,id:ae.cityId}),oe(`You've arrived in ${ae.name}, but something feels off...`),$("home")),Dt()},[yn,Dt]),st=P.useCallback(()=>{if(!O){oe("Select a suspect first!");return}oe(`Warrant issued for ${O.name}! ${Wt?"Investigate to apprehend the suspect.":"Continue tracking the suspect."}`)},[O,Wt]),dr=P.useCallback(()=>{(O==null?void 0:O.id)===(h==null?void 0:h.suspect.id)&&ue(ae=>ae+1),u("debrief"),Dt()},[O,h,Dt]),wi=P.useCallback(()=>{u("trial"),Dt()},[Dt]),In=P.useCallback(ae=>{const de={gender:[null,"male","female"],hair:[null,"dark","light"],hobby:[null,"intellectual","physical"]};Ut(Me=>{const qe=de[ae],Xe=(qe.indexOf(Me[ae])+1)%qe.length;return{...Me,[ae]:qe[Xe]}})},[]),ki=P.useCallback(()=>{Ut({gender:null,hair:null,hobby:null})},[]),Ie=P.useCallback(()=>{je(!1)},[]),tt=P.useCallback(ae=>{if(!ae)return;const{type:de,outcome:Me,timeLost:qe,gadgetId:ft,karmaGain:Xe,isTrap:Je,injuryChance:gt,npcName:yt}=ae;if(qe>0&&Ur(qe),ft&&Zn(kt=>[...kt,ft]),de==="good_deed"){if(Me==="helped"&&Xe)ut(kt=>kt+Xe),yt&&bt(kt=>[...kt,{id:Lt==null?void 0:Lt.id,name:yt,title:Lt==null?void 0:Lt.npc_title,hasRescued:!1}]);else if(Me==="trap"&&Je&&gt&&Math.random()<gt){const Gt=sr([{type:"limp",effect:"+2h investigations",icon:""},{type:"broken_hand",effect:"Gadgets 2x slower",icon:""},{type:"scarred_lungs",effect:"+1h all costs",icon:""},{type:"head_trauma",effect:"33% miss clues",icon:""},{type:"eye_patch",effect:"Miss visual clues",icon:""},{type:"nerve_damage",effect:"25% gadget failure",icon:""}]);Rt(Ne=>[...Ne,Gt])}nn(null)}else Tt(null)},[Ur,Lt]),$r=P.useCallback(()=>{u("menu"),Dt()},[Dt]),hr=((qt=(ri=h==null?void 0:h.cityData)==null?void 0:ri[y])==null?void 0:qt.hotel)||null,Bt=((_n=(ct=h==null?void 0:h.cityData)==null?void 0:ct[y])==null?void 0:_n.rogueLocation)||null,vs=((si=(He=h==null?void 0:h.cityData)==null?void 0:He[y])==null?void 0:si.rogueAction)||null;return{gameState:a,currentCase:h,currentCity:ht,currentCityIndex:y,timeRemaining:x,currentHour:S,collectedClues:T,investigatedLocations:z,selectedWarrant:O,activeTab:Q,solvedCases:ee,message:Pe,showCutscene:Te,cutsceneText:Ue,wrongCity:te,wrongCityData:ve,cityClues:we,lastFoundClue:Le,lastGoodDeedResult:fe,lastSleepResult:j,lastEncounterResult:ce,rogueUsedInCity:ie,isFinalCity:Wt,destinations:xi,nextInvestigationCost:uo,hotel:hr,rogueLocation:Bt,cityRogueAction:vs,karma:Ve,notoriety:Nt,savedNPCs:Be,permanentInjuries:Ye,showVersionWarning:Nn,dismissVersionWarning:()=>mi(!1),currentGoodDeed:Lt,showRogueActionModal:fn,currentRogueAction:Oi,lastRogueAction:ar,activeRogueAction:Re,currentEncounter:pn,availableGadgets:Bi,selectedTraits:on,cycleSelectedTrait:In,resetSelectedTraits:ki,isInvestigating:Ln,isTraveling:Di,travelOrigin:ii,travelDestination:yn,advanceTimeByOne:ys,startNewCase:lo,acceptBriefing:gs,investigate:co,completeInvestigation:Wr,rogueInvestigate:_s,completeRogueInvestigation:cr,resolveRogueAction:Gr,travel:an,getTravelTimeConfig:Hi,completeTravelAnimation:Ae,issueWarrant:st,completeTrial:dr,proceedToTrial:wi,dismissCutscene:Ie,returnToMenu:$r,handleEncounterResolve:tt,setActiveTab:$,setSelectedWarrant:W,setMessage:oe}}function im(s,a,u,h){const y=ul(u-s),v=ul(h-a),x=Math.sin(y/2)*Math.sin(y/2)+Math.cos(ul(s))*Math.cos(ul(u))*Math.sin(v/2)*Math.sin(v/2);return 6371*(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)))}function ul(s){return s*(Math.PI/180)}function Eh(s,a,u,h){const m=(a+180)/360*u,y=(90-s)/180*h;return{x:m,y}}function rm(s){const v=(Math.max(500,Math.min(15e3,s))-500)/14500;return Math.round(2e3+v*3e3)}function sm(s,a){const u=(s.x+a.x)/2,h=(s.y+a.y)/2,m=a.x-s.x,y=a.y-s.y,v=Math.sqrt(m*m+y*y),x=Math.min(v*.3,80),w=-y/v,S=m/v;return{x:u+w*x,y:h-Math.abs(S*x)}}function om(s,a,u,h){const m=1-h;return{x:m*m*s.x+2*m*h*a.x+h*h*u.x,y:m*m*s.y+2*m*h*a.y+h*h*u.y}}function am(s,a,u,h){const m=2*(1-h)*(a.x-s.x)+2*h*(u.x-a.x),y=2*(1-h)*(a.y-s.y)+2*h*(u.y-a.y);return Math.atan2(y,m)*(180/Math.PI)}function lm(s,a,u){return`M ${s.x} ${s.y} Q ${a.x} ${a.y} ${u.x} ${u.y}`}function um(s,a,u){const h=Math.sqrt(Math.pow(u.x-s.x,2)+Math.pow(u.y-s.y,2)),m=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))+Math.sqrt(Math.pow(u.x-a.x,2)+Math.pow(u.y-a.y,2));return(h+m)/2}function cm(s){const[a,u]=P.useState(!1),[h,m]=P.useState(0),[y,v]=P.useState(null),x=P.useRef(null),w=P.useRef(null),S=P.useRef(3e3),M=P.useRef(s);P.useEffect(()=>{M.current=s},[s]);const T=P.useCallback(A=>{w.current||(w.current=A);const O=A-w.current,W=S.current,Q=Math.min(O/W,1);m(Q),Q<1?x.current=requestAnimationFrame(T):setTimeout(()=>{u(!1),w.current=null,M.current&&M.current()},100)},[]),b=P.useCallback((A,O)=>{if(!(A!=null&&A.lat)||!(O!=null&&O.lat)){M.current&&M.current();return}const W=im(A.lat,A.lon,O.lat,O.lon),Q=rm(W);S.current=Q;const $=800,ee=400,ue=Eh(A.lat,A.lon,$,ee),Pe=Eh(O.lat,O.lon,$,ee),oe=sm(ue,Pe);v({origin:A,destination:O,distance:Math.round(W),duration:Q,fromPoint:ue,toPoint:Pe,controlPoint:oe,svgWidth:$,svgHeight:ee}),m(0),u(!0),w.current=null,x.current=requestAnimationFrame(T)},[T]);P.useEffect(()=>()=>{x.current&&cancelAnimationFrame(x.current)},[]);const z=P.useCallback(()=>{x.current&&cancelAnimationFrame(x.current),u(!1),m(0),v(null),w.current=null},[]);return{isAnimating:a,progress:h,travelData:y,startAnimation:b,resetAnimation:z}}function dm({onTickHour:s,tickSpeed:a=300,spinnerDuration:u=500}={}){const[h,m]=P.useState("idle"),[y,v]=P.useState(null),[x,w]=P.useState(0),[S,M]=P.useState(0),T=P.useRef(s),b=P.useRef(null);P.useEffect(()=>{T.current=s},[s]),P.useEffect(()=>{b.current=y},[y]),P.useEffect(()=>{if(h!=="pending"||!y)return;const W=y.spinnerDuration??u,Q=setTimeout(()=>{w(y.hoursCost),M(y.hoursCost),m("ticking")},W);return()=>clearTimeout(Q)},[h,y,u]),P.useEffect(()=>{if(h!=="ticking"||x<=0)return;const W=setTimeout(()=>{var $;T.current&&T.current(1);const Q=x-1;w(Q),Q<=0&&(m("complete"),($=b.current)!=null&&$.onComplete&&b.current.onComplete())},a);return()=>clearTimeout(W)},[h,x,a]);const z=P.useCallback(W=>h!=="idle"?(console.warn("Action already in progress, ignoring new action"),!1):(v(W),m("pending"),!0),[h]),A=P.useCallback(()=>{v(null),w(0),M(0),m("idle")},[]);return{phase:h,pendingAction:y,hoursRemaining:x,totalHours:S,isBusy:h!=="idle",queueAction:z,completeAction:A}}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tf=(...s)=>s.filter((a,u,h)=>!!a&&a.trim()!==""&&h.indexOf(a)===u).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=P.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:m="",children:y,iconNode:v,...x},w)=>P.createElement("svg",{ref:w,...fm,width:a,height:a,stroke:s,strokeWidth:h?Number(u)*24/Number(a):u,className:tf("lucide",m),...x},[...v.map(([S,M])=>P.createElement(S,M)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(s,a)=>{const u=P.forwardRef(({className:h,...m},y)=>P.createElement(pm,{ref:y,iconNode:a,className:tf(`lucide-${hm(s)}`,h),...m}));return u.displayName=`${s}`,u};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=lt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=lt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=lt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=lt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=lt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=lt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=lt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=lt("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=lt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=lt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=lt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=lt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=lt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=lt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=lt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=lt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=lt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=lt("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=lt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=lt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=lt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=lt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=lt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Lm({solvedCases:s,ranks:a,onStartNewCase:u}){const h=Up(a,s);return f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-red-900 to-red-950 flex items-center justify-center p-4",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-6xl font-bold text-yellow-400 mb-2",style:{fontFamily:"serif"},children:"WHERE IN THE WORLD IS"}),f.jsx("h2",{className:"text-4xl font-bold text-yellow-200",style:{fontFamily:"serif"},children:"THE SHADOW SYNDICATE?"})]}),f.jsxs("div",{className:"bg-red-800/50 rounded-lg p-6 mb-8 inline-block",children:[f.jsxs("div",{className:"flex items-center gap-3 text-yellow-100 mb-2",children:[f.jsx(uc,{size:24}),f.jsxs("span",{className:"text-xl",children:["Rank: ",h.label]})]}),f.jsxs("div",{className:"text-yellow-200/70",children:["Cases Solved: ",s]})]}),f.jsx("div",{children:f.jsx("button",{onClick:u,className:"bg-yellow-400 hover:bg-yellow-300 text-red-900 font-bold text-2xl px-12 py-4 rounded-lg transition-all transform hover:scale-105 shadow-lg",children:"NEW CASE"})})]})})}function jm(s){const a=(s%24+24)%24,u=a%12||12,h=a<12?"AM":"PM";return`${u}:00 ${h}`}function Im({targetHour:s,tickSpeed:a=.5,onAnimatingChange:u}){const[h,m]=P.useState(s),y=h!==s;return P.useEffect(()=>{u==null||u(y)},[y,u]),P.useEffect(()=>{if(h===s)return;const v=setTimeout(()=>{m(x=>(x+1)%24)},a*1e3);return()=>clearTimeout(v)},[h,s,a]),f.jsx("span",{className:y?"text-yellow-300":"",children:jm(h)})}function Mm({timeRemaining:s,maxTime:a=72}){const u=Math.max(0,Math.min(100,s/a*100)),h=()=>s<=12?"bg-red-500":s<=24?"bg-orange-500":"bg-green-500";return f.jsx("div",{className:"w-16 sm:w-20 h-2 bg-gray-800 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full transition-all duration-500 ${h()}`,style:{width:`${u}%`}})})}function zm({show:s}){return s?f.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 z-50",children:f.jsxs("div",{className:"bg-blue-900 border border-blue-400 rounded-full px-4 py-2 flex items-center gap-2 shadow-lg animate-pulse",children:[f.jsx(km,{size:16,className:"text-blue-300"}),f.jsx("span",{className:"text-blue-100 font-bold text-sm",children:"SLEEPING"})]})}):null}function sf({currentCity:s,wrongCity:a,wrongCityData:u,timeRemaining:h,currentHour:m,maxTime:y=72,timeTickSpeed:v=.5,lastSleepResult:x}){const[w,S]=P.useState(!1),M=a&&u?`${u.name}, ${u.country}`:s?`${s.name}, ${s.country}`:"Unknown Location";return f.jsx("div",{className:"sticky top-0 z-40 bg-gray-900/95 backdrop-blur border-b border-yellow-400/50",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-2 relative",children:[f.jsxs("div",{className:"flex justify-between items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[f.jsx(ml,{size:18,className:"text-yellow-400 flex-shrink-0"}),f.jsx("span",{className:"text-yellow-100 font-medium truncate",children:M}),a&&f.jsx("span",{className:"text-red-400 text-xs font-bold flex-shrink-0",children:"WRONG"})]}),f.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 whitespace-nowrap",children:[f.jsxs("div",{className:"flex items-center gap-1 text-yellow-100 font-mono text-sm",children:[f.jsx(xl,{size:14,className:"text-yellow-400"}),f.jsx(Im,{targetHour:m,tickSpeed:v,onAnimatingChange:S})]}),f.jsx(Mm,{timeRemaining:h,maxTime:y})]})]}),f.jsx(zm,{show:w&&!!x})]})})}const cl=[{id:"home",icon:wm,label:"Home"},{id:"investigate",icon:bm,label:"Investigate"},{id:"airport",icon:nf,label:"Airport"},{id:"dossier",icon:_c,label:"Evidence"}];function Yu({active:s,onClick:a,icon:u,label:h}){return f.jsxs("button",{onClick:a,className:`flex-1 flex flex-col items-center justify-center gap-1 px-2 py-3 min-h-[56px] font-bold transition-all ${s?"bg-yellow-400 text-red-900":"bg-red-800 text-yellow-100 hover:bg-red-700 active:bg-red-600"}`,children:[f.jsx(u,{size:20}),f.jsx("span",{className:"text-xs",children:h})]})}function Am({active:s,onClick:a,icon:u,label:h}){return f.jsxs("button",{onClick:a,className:`flex items-center gap-3 px-4 py-4 text-left font-bold transition-all w-full ${s?"bg-yellow-400 text-red-900":"text-yellow-100 hover:bg-red-800/50"}`,children:[f.jsx(u,{size:20}),f.jsx("span",{children:h})]})}function jh({activeTab:s,setActiveTab:a,variant:u="auto"}){return u==="sidebar"?f.jsx("div",{className:"hidden md:flex flex-col w-60 flex-shrink-0 bg-red-900/50 border-r border-yellow-400/30",children:cl.map(h=>f.jsx(Am,{active:s===h.id,onClick:()=>a(h.id),icon:h.icon,label:h.label},h.id))}):u==="mobile"?f.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 border-t-2 border-yellow-400 bg-red-900",children:f.jsx("div",{className:"flex",children:cl.map(h=>f.jsx(Yu,{active:s===h.id,onClick:()=>a(h.id),icon:h.icon,label:h.label},h.id))})}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 border-t-2 border-yellow-400 bg-red-900",children:f.jsx("div",{className:"flex",children:cl.map(h=>f.jsx(Yu,{active:s===h.id,onClick:()=>a(h.id),icon:h.icon,label:h.label},h.id))})}),f.jsx("div",{className:"hidden md:block max-w-6xl mx-auto",children:f.jsx("div",{className:"flex",children:cl.map(h=>f.jsx(Yu,{active:s===h.id,onClick:()=>a(h.id),icon:h.icon,label:h.label},h.id))})})]})}function Om({currentCity:s,cityFact:a}){return f.jsxs("div",{className:"relative h-[600px] flex items-center justify-center",children:[a&&f.jsx("div",{className:"max-w-2xl mx-auto bg-gray-900/90 backdrop-blur-sm rounded-lg overflow-hidden shadow-2xl",children:f.jsxs("div",{className:"p-8 border-l-4 border-blue-400",children:[f.jsxs("p",{className:"text-yellow-100 italic text-lg leading-relaxed",children:['"',a,'"']}),s&&f.jsxs("p",{className:"text-blue-400 text-sm mt-4 text-right font-medium",children:[" ",s.name,", ",s.country]})]})}),!a&&s&&f.jsx("div",{className:"max-w-2xl mx-auto bg-gray-900/90 backdrop-blur-sm rounded-lg overflow-hidden shadow-2xl",children:f.jsxs("div",{className:"p-8 text-center",children:[f.jsx("h2",{className:"text-4xl font-bold text-yellow-400 mb-2",children:s.name}),f.jsx("p",{className:"text-blue-400 text-xl",children:s.country})]})})]})}function Rm(s,a,u=!0){const[h,m]=P.useState(s),[y,v]=P.useState(!1);P.useEffect(()=>{if(!u||y)return;const S=setInterval(()=>{m(M=>M<=.1?(v(!0),clearInterval(S),setTimeout(()=>a(),500),0):M-.1)},100);return()=>clearInterval(S)},[u,y,a]);const x=h/s*100,w=h<2?"critical":h<s*.4?"warning":"normal";return{timeLeft:h,hasTimedOut:y,timerPercent:x,urgencyLevel:w}}const qu=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Ih=["","","","",""];function Dm(s){let a=0;for(let u=0;u<s.length;u++){const h=s.charCodeAt(u);a=(a<<5)-a+h,a=a&a}return Math.abs(a)}function Bm(s){const a=Dm(s),u=a%qu.length,h=qu[u],m=Math.floor(a/qu.length)%Ih.length,y=Ih[m];return h.replace(/(\u{1F468}|\u{1F469})/u,`$1${y}`)}function fl({type:s,personEmoji:a,quote:u,descriptiveText:h,headerTitle:m,headerIcon:y,setupText:v,timerDuration:x,onTimeout:w,choices:S=[],onChoice:M,warningText:T,result:b,onContinue:z,autoStream:A=!0,hideEmojiAndQuotes:O=!1,showQuotes:W=void 0}){const Q=s==="witness"?"complete":b?"resolved":"active",[$,ee]=P.useState(""),[ue,Pe]=P.useState(!1),oe=P.useRef(null),Te=P.useRef(0),je=P.useMemo(()=>O?"":a||(u?Bm(u):""),[a,u,O]),Ue=P.useCallback(()=>{Q!=="active"||!w||w()},[Q,w]),{timeLeft:Oe,hasTimedOut:te,timerPercent:J,urgencyLevel:ve}=Rm(x||0,Ue,Q==="active"&&!!x);P.useEffect(()=>{if(!u||!A){ee(u||""),Pe(!0);return}oe.current&&(clearInterval(oe.current),oe.current=null),ee(""),Pe(!1),Te.current=0;const xe=u.trim().replace(/\bundefined\b/gi,"").replace(/\bnull\b/gi,"").replace(/\s+/g," ").trim();if(!xe)return;const Le=xe.split(" ").filter(F=>F.length>0);if(Le.length!==0)return oe.current=setInterval(()=>{const F=Te.current;if(F<Le.length){const fe=Le[F];fe!=null&&ee(G=>G+(G?" ":"")+fe),Te.current++}else Pe(!0),oe.current&&(clearInterval(oe.current),oe.current=null)},150),()=>{oe.current&&(clearInterval(oe.current),oe.current=null)}},[u,A]);const _e=P.useCallback(xe=>{Q!=="active"||te||M&&M(xe)},[Q,te,M]),we=Zm(s,m,y);if(s==="witness")return f.jsxs("div",{className:"space-y-2",children:[we&&f.jsx("div",{className:"bg-gray-900/95 backdrop-blur-sm rounded-lg p-4 border-l-4 border-yellow-500",children:f.jsx(Ku,{icon:we.icon,title:we.title,titleColor:we.titleColor})}),h&&f.jsx("div",{className:"bg-gray-900/95 backdrop-blur-sm rounded-lg p-4 border-l-4 border-yellow-500",children:f.jsx("p",{className:"text-yellow-100 text-lg leading-relaxed",children:h})}),f.jsx(Mh,{emoji:O||h?null:je,displayedText:$,isComplete:ue,borderColor:"border-yellow-500",showQuotes:W!==void 0?W:O?!1:!h}),z&&f.jsx("div",{className:"px-2",children:f.jsx("button",{onClick:z,className:"w-full font-bold py-3 rounded transition-colors bg-gray-700 hover:bg-gray-600 text-white",children:"CONTINUE"})})]});if(Q==="active")return f.jsxs("div",{className:"space-y-2",children:[we&&f.jsx("div",{className:"bg-gray-900/95 backdrop-blur-sm rounded-lg p-4 border-l-4 border-yellow-500",children:f.jsx(Ku,{icon:we.icon,title:we.title,titleColor:we.titleColor})}),v&&f.jsx("div",{className:"text-yellow-200/70 text-sm px-2",children:v}),T&&f.jsx("div",{className:"bg-red-900/50 border-l-4 border-red-500 p-3 rounded-lg",children:f.jsxs("p",{className:"text-red-400 text-sm flex items-center gap-2",children:[f.jsx(to,{size:14}),T]})}),s==="encounter_assassination"&&Oe<3&&f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-red-300 text-2xl font-bold",children:Oe<1?"NOOOOOO!":"N..."})}),f.jsx(Mh,{emoji:null,displayedText:$,isComplete:ue,borderColor:"border-yellow-500",showQuotes:W!==void 0?W:s!=="encounter_henchman"&&s!=="encounter_assassination"&&s!=="encounter_good_deed"}),S.length>0&&f.jsx("div",{className:"px-2",children:f.jsx(Hm,{choices:S,onChoice:_e,hasTimedOut:te,type:s,timerPercent:J,urgencyLevel:ve,showTimer:!!x})})]});if(Q==="resolved"&&b){const xe=b.type==="success"?"border-green-500":b.type==="failure"?"border-red-500":"border-yellow-500",Le=s!=="encounter_henchman",F=s==="encounter_good_deed"||s==="encounter_assassination";return f.jsxs("div",{className:"space-y-2",children:[we&&f.jsx("div",{className:"bg-gray-900/95 backdrop-blur-sm rounded-lg p-4 border-l-4 border-yellow-500",children:f.jsx(Ku,{icon:we.icon,title:we.title,titleColor:we.titleColor})}),f.jsxs("div",{className:`flex items-start gap-4 p-6 bg-gray-900/95 backdrop-blur-sm rounded-lg border-l-4 ${xe}`,children:[Le&&f.jsx("div",{className:"flex-shrink-0 text-7xl leading-none select-none",children:je}),f.jsx("div",{className:`flex-1 ${Le?"pt-2":""}`,children:f.jsxs("p",{className:"text-yellow-100 text-lg italic leading-relaxed",children:[F?'"':"",b.message,F?'"':""]})})]}),s==="encounter_good_deed"&&b.type==="success"&&f.jsx("div",{className:"bg-green-900/50 border-l-4 border-green-500 p-3 rounded-lg",children:f.jsxs("p",{className:"text-green-400 text-sm flex items-center gap-2",children:[f.jsx(wl,{size:14}),"Your integrity strengthens your reputation."]})}),z&&f.jsx("div",{className:"px-2",children:f.jsx("button",{onClick:z,className:"w-full font-bold py-3 rounded transition-colors bg-gray-700 hover:bg-gray-600 text-white",children:"CONTINUE"})})]})}return null}function Ku({icon:s,title:a,titleColor:u}){return f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s,f.jsx("h3",{className:`text-lg font-bold ${u}`,children:a})]})}function Mh({emoji:s,displayedText:a,isComplete:u,borderColor:h,showQuotes:m=!0}){return f.jsxs("div",{className:`flex items-start gap-4 p-6 bg-gray-900/95 backdrop-blur-sm rounded-lg border-l-4 ${h}`,children:[s&&f.jsx("div",{className:"flex-shrink-0 text-7xl leading-none select-none",children:s}),f.jsx("div",{className:`flex-1 ${s?"pt-2":""}`,children:f.jsxs("p",{className:"text-yellow-100 text-lg italic leading-relaxed",children:[m&&'"',a,!u&&f.jsx("span",{className:"animate-pulse",children:"|"}),m&&'"']})})]})}function Hm({choices:s,onChoice:a,hasTimedOut:u,type:h,timerPercent:m=100,urgencyLevel:y="normal",showTimer:v=!1}){const x={critical:"bg-red-500",warning:"bg-orange-500",normal:"bg-green-500"};if(h==="encounter_good_deed"){const w=s[0];return f.jsx("div",{className:"relative",children:f.jsxs("button",{onClick:()=>a(w.id),disabled:w.disabled||u,className:`w-full text-white font-bold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 relative overflow-hidden ${w.disabled||u?"bg-gray-700 cursor-not-allowed":"bg-green-700 hover:bg-green-600"}`,children:[v&&!u&&f.jsx("div",{className:`absolute inset-0 transition-all duration-100 ${x[y]} opacity-20`,style:{width:`${m}%`}}),f.jsx(wl,{size:20,className:"relative z-10"}),f.jsx("span",{className:"relative z-10",children:w.label})]})})}return f.jsx("div",{className:"grid grid-cols-3 gap-2",children:s.map(w=>f.jsxs("button",{onClick:()=>a(w.id),disabled:w.disabled||u,className:`p-3 rounded-lg flex flex-col items-center gap-1 transition-all relative overflow-hidden ${w.disabled?"bg-gray-700 text-gray-400 cursor-not-allowed":u?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600 text-white cursor-pointer"}`,children:[v&&!u&&!w.disabled&&f.jsx("div",{className:`absolute inset-0 transition-all duration-100 ${x[y]} opacity-20`,style:{width:`${m}%`}}),w.icon&&f.jsx("span",{className:"text-2xl relative z-10",children:w.icon}),f.jsx("span",{className:"text-xs font-bold relative z-10",children:w.label}),w.disabled&&f.jsx("span",{className:"text-xs relative z-10",children:"Used"})]},w.id))})}function Zm(s,a,u){return s==="witness"&&!a?null:s==="encounter_assassination"?{icon:u||f.jsx(Tm,{size:24,className:"text-red-500"}),title:a||"ASSASSINATION ATTEMPT",titleColor:"text-red-400"}:s==="encounter_henchman"?{icon:u||f.jsx(Nm,{size:24,className:"text-orange-400"}),title:a||"HENCHMAN ENCOUNTER",titleColor:"text-orange-400"}:s==="encounter_good_deed"?{icon:u||f.jsx(wl,{size:24,className:"text-yellow-400"}),title:a||"SOMEONE NEEDS HELP",titleColor:"text-yellow-400"}:s==="rogue_action"?{icon:u||f.jsx("span",{className:"text-2xl",children:""}),title:a||"ROGUE ACTION",titleColor:"text-purple-400"}:s==="apprehension"?{icon:u||f.jsx("span",{className:"text-2xl",children:""}),title:a||"SUSPECT APPREHENDED",titleColor:"text-blue-400"}:a?{icon:u||null,title:a,titleColor:"text-yellow-400"}:null}function Fm({type:s,encounter:a,timerDuration:u,availableGadgets:h,karma:m,timeRemaining:y,onResolve:v}){const[x,w]=P.useState(null),S=s==="good_deed"&&(a==null?void 0:a.isFake),M=(a==null?void 0:a.time_penalty_wrong)||4,T=(a==null?void 0:a.time_penalty_none)||(s==="assassination"?8:6),b=(a==null?void 0:a.time_cost)||3,z=P.useCallback(()=>{let Q;s==="good_deed"?Q={message:"You didn't have time to help.",type:"neutral",outcome:"skipped",helped:!1,timeLost:0}:Q={message:(a==null?void 0:a.timeout_text)||(a==null?void 0:a.no_gadget_text)||"Time ran out!",type:"failure",outcome:"timeout",gadgetId:null,timeLost:T},w(Q)},[s,a,T]),A=P.useCallback(Q=>{let $;s==="good_deed"?Q==="help"?S?$={message:(a==null?void 0:a.setup_reveal)||"It was a trap!",type:"failure",outcome:"trap",helped:!0,timeLost:8,isTrap:!0,injuryChance:(a==null?void 0:a.injury_chance)||.75}:$={message:(a==null?void 0:a.gratitude)||"Thank you for helping!",type:"success",outcome:"helped",helped:!0,timeLost:b,karmaGain:1,npcName:a==null?void 0:a.npc_name}:$={message:"You kept moving. The mission comes first.",type:"neutral",outcome:"skipped",helped:!1,timeLost:0}:Q===(a==null?void 0:a.correct_gadget)?$={message:(a==null?void 0:a.success_text)||"Perfect choice!",type:"success",outcome:"success",gadgetId:Q,timeLost:0}:$={message:(a==null?void 0:a.failure_text)||"Wrong gadget!",type:"failure",outcome:"wrong_gadget",gadgetId:Q,timeLost:M},w($)},[s,a,S,b,M]),O=P.useCallback(()=>{x&&v&&v({...x,type:s})},[x,s,v]),W=s==="good_deed"?[{id:"help",label:"HELP",type:"continue"}]:(h==null?void 0:h.map(Q=>({id:Q.id,label:Q.name,icon:Q.icon,disabled:Q.used,type:"gadget"})))||[];return f.jsx(fl,{type:s==="henchman"?"encounter_henchman":s==="assassination"?"encounter_assassination":s==="good_deed"?"encounter_good_deed":"witness",quote:(a==null?void 0:a.description)||(a==null?void 0:a.plea)||"",timerDuration:u,onTimeout:z,choices:W,onChoice:A,warningText:s==="good_deed"&&m>=1&&!S?"Could be a trap...":void 0,result:x,onContinue:O})}function Um(s,a){const u=P.useRef(a);P.useEffect(function(){a!==u.current&&s.attributionControl!=null&&(u.current!=null&&s.attributionControl.removeAttribution(u.current),a!=null&&s.attributionControl.addAttribution(a)),u.current=a},[s,a])}function Wm(s,a,u){a.center!==u.center&&s.setLatLng(a.center),a.radius!=null&&a.radius!==u.radius&&s.setRadius(a.radius)}Jh();const Gm=1;function $m(s){return Object.freeze({__version:Gm,map:s})}function of(s,a){return Object.freeze({...s,...a})}const af=P.createContext(null),lf=af.Provider;function vc(){const s=P.useContext(af);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function Vm(s){function a(u,h){const{instance:m,context:y}=s(u).current;return P.useImperativeHandle(h,()=>m),u.children==null?null:ac.createElement(lf,{value:y},u.children)}return P.forwardRef(a)}function Ym(s){function a(u,h){const{instance:m}=s(u).current;return P.useImperativeHandle(h,()=>m),null}return P.forwardRef(a)}function uf(s,a){const u=P.useRef();P.useEffect(function(){return a!=null&&s.instance.on(a),u.current=a,function(){u.current!=null&&s.instance.off(u.current),u.current=null}},[s,a])}function xc(s,a){const u=s.pane??a.pane;return u?{...s,pane:u}:s}var Qo={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var qm=Qo.exports,zh;function Km(){return zh||(zh=1,(function(s,a){(function(u,h){h(a)})(qm,(function(u){var h="1.9.4";function m(t){var i,o,c,g;for(o=1,c=arguments.length;o<c;o++){g=arguments[o];for(i in g)t[i]=g[i]}return t}var y=Object.create||(function(){function t(){}return function(i){return t.prototype=i,new t}})();function v(t,i){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var c=o.call(arguments,2);return function(){return t.apply(i,c.length?c.concat(o.call(arguments)):arguments)}}var x=0;function w(t){return"_leaflet_id"in t||(t._leaflet_id=++x),t._leaflet_id}function S(t,i,o){var c,g,k,E;return E=function(){c=!1,g&&(k.apply(o,g),g=!1)},k=function(){c?g=arguments:(t.apply(o,arguments),setTimeout(E,i),c=!0)},k}function M(t,i,o){var c=i[1],g=i[0],k=c-g;return t===c&&o?t:((t-g)%k+k)%k+g}function T(){return!1}function b(t,i){if(i===!1)return t;var o=Math.pow(10,i===void 0?6:i);return Math.round(t*o)/o}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function A(t){return z(t).split(/\s+/)}function O(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?y(t.options):{});for(var o in i)t.options[o]=i[o];return t.options}function W(t,i,o){var c=[];for(var g in t)c.push(encodeURIComponent(o?g.toUpperCase():g)+"="+encodeURIComponent(t[g]));return(!i||i.indexOf("?")===-1?"?":"&")+c.join("&")}var Q=/\{ *([\w_ -]+) *\}/g;function $(t,i){return t.replace(Q,function(o,c){var g=i[c];if(g===void 0)throw new Error("No value provided for variable "+o);return typeof g=="function"&&(g=g(i)),g})}var ee=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ue(t,i){for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1}var Pe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function oe(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Te=0;function je(t){var i=+new Date,o=Math.max(0,16-(i-Te));return Te=i+o,window.setTimeout(t,o)}var Ue=window.requestAnimationFrame||oe("RequestAnimationFrame")||je,Oe=window.cancelAnimationFrame||oe("CancelAnimationFrame")||oe("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function te(t,i,o){if(o&&Ue===je)t.call(i);else return Ue.call(window,v(t,i))}function J(t){t&&Oe.call(window,t)}var ve={__proto__:null,extend:m,create:y,bind:v,get lastId(){return x},stamp:w,throttle:S,wrapNum:M,falseFn:T,formatNum:b,trim:z,splitWords:A,setOptions:O,getParamString:W,template:$,isArray:ee,indexOf:ue,emptyImageUrl:Pe,requestFn:Ue,cancelFn:Oe,requestAnimFrame:te,cancelAnimFrame:J};function _e(){}_e.extend=function(t){var i=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,c=y(o);c.constructor=i,i.prototype=c;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(i[g]=this[g]);return t.statics&&m(i,t.statics),t.includes&&(we(t.includes),m.apply(null,[c].concat(t.includes))),m(c,t),delete c.statics,delete c.includes,c.options&&(c.options=o.options?y(o.options):{},m(c.options,t.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,E=c._initHooks.length;k<E;k++)c._initHooks[k].call(this)}},i},_e.include=function(t){var i=this.prototype.options;return m(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},_e.mergeOptions=function(t){return m(this.prototype.options,t),this},_e.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function we(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=ee(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xe={on:function(t,i,o){if(typeof t=="object")for(var c in t)this._on(c,t[c],i);else{t=A(t);for(var g=0,k=t.length;g<k;g++)this._on(t[g],i,o)}return this},off:function(t,i,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var c in t)this._off(c,t[c],i);else{t=A(t);for(var g=arguments.length===1,k=0,E=t.length;k<E;k++)g?this._off(t[k]):this._off(t[k],i,o)}return this},_on:function(t,i,o,c){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,o)===!1){o===this&&(o=void 0);var g={fn:i,ctx:o};c&&(g.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(g)}},_off:function(t,i,o){var c,g,k;if(this._events&&(c=this._events[t],!!c)){if(arguments.length===1){if(this._firingCount)for(g=0,k=c.length;g<k;g++)c[g].fn=T;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var E=this._listens(t,i,o);if(E!==!1){var R=c[E];this._firingCount&&(R.fn=T,this._events[t]=c=c.slice()),c.splice(E,1)}}},fire:function(t,i,o){if(!this.listens(t,o))return this;var c=m({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var g=this._events[t];if(g){this._firingCount=this._firingCount+1||1;for(var k=0,E=g.length;k<E;k++){var R=g[k],H=R.fn;R.once&&this.off(t,H,R.ctx),H.call(R.ctx||this,c)}this._firingCount--}}return o&&this._propagateEvent(c),this},listens:function(t,i,o,c){typeof t!="string"&&console.warn('"string" type argument expected');var g=i;typeof i!="function"&&(c=!!i,g=void 0,o=void 0);var k=this._events&&this._events[t];if(k&&k.length&&this._listens(t,g,o)!==!1)return!0;if(c){for(var E in this._eventParents)if(this._eventParents[E].listens(t,i,o,c))return!0}return!1},_listens:function(t,i,o){if(!this._events)return!1;var c=this._events[t]||[];if(!i)return!!c.length;o===this&&(o=void 0);for(var g=0,k=c.length;g<k;g++)if(c[g].fn===i&&c[g].ctx===o)return g;return!1},once:function(t,i,o){if(typeof t=="object")for(var c in t)this._on(c,t[c],i,!0);else{t=A(t);for(var g=0,k=t.length;g<k;g++)this._on(t[g],i,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[w(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[w(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,m({layer:t.target,propagatedFrom:t.target},t),!0)}};xe.addEventListener=xe.on,xe.removeEventListener=xe.clearAllEventListeners=xe.off,xe.addOneTimeEventListener=xe.once,xe.fireEvent=xe.fire,xe.hasEventListeners=xe.listens;var Le=_e.extend(xe);function F(t,i,o){this.x=o?Math.round(t):t,this.y=o?Math.round(i):i}var fe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(G(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(G(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(t){t=G(t);var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(t){return t=G(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=G(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function G(t,i,o){return t instanceof F?t:ee(t)?new F(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,i,o)}function j(t,i){if(t)for(var o=i?[t,i]:t,c=0,g=o.length;c<g;c++)this.extend(o[c])}j.prototype={extend:function(t){var i,o;if(!t)return this;if(t instanceof F||typeof t[0]=="number"||"x"in t)i=o=G(t);else if(t=U(t),i=t.min,o=t.max,!i||!o)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=o.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,o;return typeof t[0]=="number"||t instanceof F?t=G(t):t=U(t),t instanceof j?(i=t.min,o=t.max):i=o=t,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=U(t);var i=this.min,o=this.max,c=t.min,g=t.max,k=g.x>=i.x&&c.x<=o.x,E=g.y>=i.y&&c.y<=o.y;return k&&E},overlaps:function(t){t=U(t);var i=this.min,o=this.max,c=t.min,g=t.max,k=g.x>i.x&&c.x<o.x,E=g.y>i.y&&c.y<o.y;return k&&E},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,o=this.max,c=Math.abs(i.x-o.x)*t,g=Math.abs(i.y-o.y)*t;return U(G(i.x-c,i.y-g),G(o.x+c,o.y+g))},equals:function(t){return t?(t=U(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function U(t,i){return!t||t instanceof j?t:new j(t,i)}function ce(t,i){if(t)for(var o=i?[t,i]:t,c=0,g=o.length;c<g;c++)this.extend(o[c])}ce.prototype={extend:function(t){var i=this._southWest,o=this._northEast,c,g;if(t instanceof ie)c=t,g=t;else if(t instanceof ce){if(c=t._southWest,g=t._northEast,!c||!g)return this}else return t?this.extend(ne(t)||se(t)):this;return!i&&!o?(this._southWest=new ie(c.lat,c.lng),this._northEast=new ie(g.lat,g.lng)):(i.lat=Math.min(c.lat,i.lat),i.lng=Math.min(c.lng,i.lng),o.lat=Math.max(g.lat,o.lat),o.lng=Math.max(g.lng,o.lng)),this},pad:function(t){var i=this._southWest,o=this._northEast,c=Math.abs(i.lat-o.lat)*t,g=Math.abs(i.lng-o.lng)*t;return new ce(new ie(i.lat-c,i.lng-g),new ie(o.lat+c,o.lng+g))},getCenter:function(){return new ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ie||"lat"in t?t=ne(t):t=se(t);var i=this._southWest,o=this._northEast,c,g;return t instanceof ce?(c=t.getSouthWest(),g=t.getNorthEast()):c=g=t,c.lat>=i.lat&&g.lat<=o.lat&&c.lng>=i.lng&&g.lng<=o.lng},intersects:function(t){t=se(t);var i=this._southWest,o=this._northEast,c=t.getSouthWest(),g=t.getNorthEast(),k=g.lat>=i.lat&&c.lat<=o.lat,E=g.lng>=i.lng&&c.lng<=o.lng;return k&&E},overlaps:function(t){t=se(t);var i=this._southWest,o=this._northEast,c=t.getSouthWest(),g=t.getNorthEast(),k=g.lat>i.lat&&c.lat<o.lat,E=g.lng>i.lng&&c.lng<o.lng;return k&&E},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=se(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(t,i){return t instanceof ce?t:new ce(t,i)}function ie(t,i,o){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,o!==void 0&&(this.alt=+o)}ie.prototype={equals:function(t,i){if(!t)return!1;t=ne(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+b(this.lat,t)+", "+b(this.lng,t)+")"},distanceTo:function(t){return ke.distance(this,ne(t))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,o=i/Math.cos(Math.PI/180*this.lat);return se([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new ie(this.lat,this.lng,this.alt)}};function ne(t,i,o){return t instanceof ie?t:ee(t)&&typeof t[0]!="object"?t.length===3?new ie(t[0],t[1],t[2]):t.length===2?new ie(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ie(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new ie(t,i,o)}var Ee={latLngToPoint:function(t,i){var o=this.projection.project(t),c=this.scale(i);return this.transformation._transform(o,c)},pointToLatLng:function(t,i){var o=this.scale(i),c=this.transformation.untransform(t,o);return this.projection.unproject(c)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(t),c=this.transformation.transform(i.min,o),g=this.transformation.transform(i.max,o);return new j(c,g)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?M(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?M(t.lat,this.wrapLat,!0):t.lat,c=t.alt;return new ie(o,i,c)},wrapLatLngBounds:function(t){var i=t.getCenter(),o=this.wrapLatLng(i),c=i.lat-o.lat,g=i.lng-o.lng;if(c===0&&g===0)return t;var k=t.getSouthWest(),E=t.getNorthEast(),R=new ie(k.lat-c,k.lng-g),H=new ie(E.lat-c,E.lng-g);return new ce(R,H)}},ke=m({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var o=Math.PI/180,c=t.lat*o,g=i.lat*o,k=Math.sin((i.lat-t.lat)*o/2),E=Math.sin((i.lng-t.lng)*o/2),R=k*k+Math.cos(c)*Math.cos(g)*E*E,H=2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R));return this.R*H}}),Re=6378137,Qe={R:Re,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,o=this.MAX_LATITUDE,c=Math.max(Math.min(o,t.lat),-o),g=Math.sin(c*i);return new F(this.R*t.lng*i,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(t){var i=180/Math.PI;return new ie((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:(function(){var t=Re*Math.PI;return new j([-t,-t],[t,t])})()};function Ve(t,i,o,c){if(ee(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=o,this._d=c}Ve.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new F((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function ut(t,i,o,c){return new Ve(t,i,o,c)}var Nt=m({},ke,{code:"EPSG:3857",projection:Qe,transformation:(function(){var t=.5/(Math.PI*Qe.R);return ut(t,.5,-t,.5)})()}),wt=m({},Nt,{code:"EPSG:900913"});function Be(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function bt(t,i){var o="",c,g,k,E,R,H;for(c=0,k=t.length;c<k;c++){for(R=t[c],g=0,E=R.length;g<E;g++)H=R[g],o+=(g?"L":"M")+H.x+" "+H.y;o+=i?me.svg?"z":"x":""}return o||"M0 0"}var Ye=document.documentElement.style,Rt="ActiveXObject"in window,Lt=Rt&&!document.addEventListener,nn="msLaunchUri"in navigator&&!("documentMode"in document),fn=rt("webkit"),pi=rt("android"),Oi=rt("android 2")||rt("android 3"),or=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ar=pi&&rt("Google")&&or<537&&!("AudioNode"in window),jt=!!window.opera,rn=!nn&&rt("chrome"),Pn=rt("gecko")&&!fn&&!jt&&!Rt,pn=!rn&&rt("safari"),Tt=rt("phantom"),sn="OTransition"in Ye,Zn=navigator.platform.indexOf("Win")===0,mt=Rt&&"transition"in Ye,Fn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oi,on="MozPerspective"in Ye,Ut=!window.L_DISABLE_3D&&(mt||Fn||on)&&!sn&&!Tt,Nn=typeof orientation<"u"||rt("mobile"),mi=Nn&&fn,Ln=Nn&&Fn,It=!window.PointerEvent&&window.MSPointerEvent,mn=!!(window.PointerEvent||It),Yt="ontouchstart"in window||!!window.TouchEvent,gi=!window.L_NO_TOUCH&&(Yt||mn),yi=Nn&&jt,Ri=Nn&&Pn,Un=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Di=(function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",T,i),window.removeEventListener("testPassiveEventSupport",T,i)}catch{}return t})(),ni=(function(){return!!document.createElement("canvas").getContext})(),ii=!!(document.createElementNS&&Be("svg").createSVGRect),gn=!!ii&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),yn=!ii&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}})(),Wn=navigator.platform.indexOf("Mac")===0,et=navigator.platform.indexOf("Linux")===0;function rt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var me={ie:Rt,ielt9:Lt,edge:nn,webkit:fn,android:pi,android23:Oi,androidStock:ar,opera:jt,chrome:rn,gecko:Pn,safari:pn,phantom:Tt,opera12:sn,win:Zn,ie3d:mt,webkit3d:Fn,gecko3d:on,any3d:Ut,mobile:Nn,mobileWebkit:mi,mobileWebkit3d:Ln,msPointer:It,pointer:mn,touch:gi,touchNative:Yt,mobileOpera:yi,mobileGecko:Ri,retina:Un,passiveEvents:Di,canvas:ni,svg:ii,vml:yn,inlineSvg:gn,mac:Wn,linux:et},lr=me.msPointer?"MSPointerDown":"pointerdown",_i=me.msPointer?"MSPointerMove":"pointermove",ur=me.msPointer?"MSPointerUp":"pointerup",ao=me.msPointer?"MSPointerCancel":"pointercancel",Fr={touchstart:lr,touchmove:_i,touchend:ur,touchcancel:ao},ht={touchstart:ot,touchmove:jn,touchend:jn,touchcancel:jn},Wt={},Dt=!1;function lo(t,i,o){return i==="touchstart"&&uo(),ht[i]?(o=ht[i].bind(this,o),t.addEventListener(Fr[i],o,!1),o):(console.warn("wrong event specified:",i),T)}function gs(t,i,o){if(!Fr[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(Fr[i],o,!1)}function Ur(t){Wt[t.pointerId]=t}function ys(t){Wt[t.pointerId]&&(Wt[t.pointerId]=t)}function vi(t){delete Wt[t.pointerId]}function uo(){Dt||(document.addEventListener(lr,Ur,!0),document.addEventListener(_i,ys,!0),document.addEventListener(ur,vi,!0),document.addEventListener(ao,vi,!0),Dt=!0)}function jn(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var o in Wt)i.touches.push(Wt[o]);i.changedTouches=[i],t(i)}}function ot(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&_t(i),jn(t,i)}function co(t){var i={},o,c;for(c in t)o=t[c],i[c]=o&&o.bind?o.bind(t):o;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var Wr=200;function _s(t,i){t.addEventListener("dblclick",i);var o=0,c;function g(k){if(k.detail!==1){c=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var E=Fi(k);if(!(E.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!E.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var R=Date.now();R-o<=Wr?(c++,c===2&&i(co(k))):c=1,o=R}}}return t.addEventListener("click",g),{dblclick:i,simDblclick:g}}function cr(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var Gr=ri(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xi=ri(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bi=xi==="webkitTransition"||xi==="OTransition"?xi+"End":"transitionend";function an(t){return typeof t=="string"?document.getElementById(t):t}function Hi(t,i){var o=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!o||o==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(t,null);o=c?c[i]:null}return o==="auto"?null:o}function Ae(t,i,o){var c=document.createElement(t);return c.className=i||"",o&&o.appendChild(c),c}function st(t){var i=t.parentNode;i&&i.removeChild(t)}function dr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function wi(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function In(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function ki(t,i){if(t.classList!==void 0)return t.classList.contains(i);var o=hr(t);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)}function Ie(t,i){if(t.classList!==void 0)for(var o=A(i),c=0,g=o.length;c<g;c++)t.classList.add(o[c]);else if(!ki(t,i)){var k=hr(t);$r(t,(k?k+" ":"")+i)}}function tt(t,i){t.classList!==void 0?t.classList.remove(i):$r(t,z((" "+hr(t)+" ").replace(" "+i+" "," ")))}function $r(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function hr(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Bt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&vs(t,i)}function vs(t,i){var o=!1,c="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(c)}catch{if(i===1)return}i=Math.round(i*100),o?(o.Enabled=i!==100,o.Opacity=i):t.style.filter+=" progid:"+c+"(opacity="+i+")"}function ri(t){for(var i=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in i)return t[o];return!1}function qt(t,i,o){var c=i||new F(0,0);t.style[Gr]=(me.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(o?" scale("+o+")":"")}function ct(t,i){t._leaflet_pos=i,me.any3d?qt(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function _n(t){return t._leaflet_pos||new F(0,0)}var He,si,ae;if("onselectstart"in document)He=function(){Ne(window,"selectstart",_t)},si=function(){nt(window,"selectstart",_t)};else{var de=ri(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);He=function(){if(de){var t=document.documentElement.style;ae=t[de],t[de]="none"}},si=function(){de&&(document.documentElement.style[de]=ae,ae=void 0)}}function Me(){Ne(window,"dragstart",_t)}function qe(){nt(window,"dragstart",_t)}var ft,Xe;function Je(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(gt(),ft=t,Xe=t.style.outlineStyle,t.style.outlineStyle="none",Ne(window,"keydown",gt))}function gt(){ft&&(ft.style.outlineStyle=Xe,ft=void 0,Xe=void 0,nt(window,"keydown",gt))}function yt(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function kt(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var Gt={__proto__:null,TRANSFORM:Gr,TRANSITION:xi,TRANSITION_END:Bi,get:an,getStyle:Hi,create:Ae,remove:st,empty:dr,toFront:wi,toBack:In,hasClass:ki,addClass:Ie,removeClass:tt,setClass:$r,getClass:hr,setOpacity:Bt,testProp:ri,setTransform:qt,setPosition:ct,getPosition:_n,get disableTextSelection(){return He},get enableTextSelection(){return si},disableImageDrag:Me,enableImageDrag:qe,preventOutline:Je,restoreOutline:gt,getSizedParentNode:yt,getScale:kt};function Ne(t,i,o,c){if(i&&typeof i=="object")for(var g in i)fo(t,g,i[g],o);else{i=A(i);for(var k=0,E=i.length;k<E;k++)fo(t,i[k],o,c)}return this}var Mt="_leaflet_events";function nt(t,i,o,c){if(arguments.length===1)ho(t),delete t[Mt];else if(i&&typeof i=="object")for(var g in i)xs(t,g,i[g],o);else if(i=A(i),arguments.length===2)ho(t,function(R){return ue(i,R)!==-1});else for(var k=0,E=i.length;k<E;k++)xs(t,i[k],o,c);return this}function ho(t,i){for(var o in t[Mt]){var c=o.split(/\d/)[0];(!i||i(c))&&xs(t,c,null,null,o)}}var Zi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fo(t,i,o,c){var g=i+w(o)+(c?"_"+w(c):"");if(t[Mt]&&t[Mt][g])return this;var k=function(R){return o.call(c||t,R||window.event)},E=k;!me.touchNative&&me.pointer&&i.indexOf("touch")===0?k=lo(t,i,k):me.touch&&i==="dblclick"?k=_s(t,k):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Zi[i]||i,k,me.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(k=function(R){R=R||window.event,qr(t,R)&&E(R)},t.addEventListener(Zi[i],k,!1)):t.addEventListener(i,E,!1):t.attachEvent("on"+i,k),t[Mt]=t[Mt]||{},t[Mt][g]=k}function xs(t,i,o,c,g){g=g||i+w(o)+(c?"_"+w(c):"");var k=t[Mt]&&t[Mt][g];if(!k)return this;!me.touchNative&&me.pointer&&i.indexOf("touch")===0?gs(t,i,k):me.touch&&i==="dblclick"?cr(t,k):"removeEventListener"in t?t.removeEventListener(Zi[i]||i,k,!1):t.detachEvent("on"+i,k),t[Mt][g]=null}function Gn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ws(t){return fo(t,"wheel",Gn),this}function Vr(t){return Ne(t,"mousedown touchstart dblclick contextmenu",Gn),t._leaflet_disable_click=!0,this}function _t(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Mn(t){return _t(t),Gn(t),this}function Fi(t){if(t.composedPath)return t.composedPath();for(var i=[],o=t.target;o;)i.push(o),o=o.parentNode;return i}function Yr(t,i){if(!i)return new F(t.clientX,t.clientY);var o=kt(i),c=o.boundingClientRect;return new F((t.clientX-c.left)/o.x-i.clientLeft,(t.clientY-c.top)/o.y-i.clientTop)}var Sl=me.linux&&me.chrome?window.devicePixelRatio:me.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function na(t){return me.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Sl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function qr(t,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var ks={__proto__:null,on:Ne,off:nt,stopPropagation:Gn,disableScrollPropagation:ws,disableClickPropagation:Vr,preventDefault:_t,stop:Mn,getPropagationPath:Fi,getMousePosition:Yr,getWheelDelta:na,isExternalTarget:qr,addListener:Ne,removeListener:nt},Ss=Le.extend({run:function(t,i,o,c){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=_n(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,o=this._duration*1e3;i<o?this._runFrame(this._easeOut(i/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var o=this._startPos.add(this._offset.multiplyBy(t));i&&o._round(),ct(this._el,o),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Fe=Le.extend({options:{crs:Nt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=O(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=v(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(ne(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xi&&me.any3d&&!me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,Bi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(ne(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=m({animate:o.animate},o.zoom),o.pan=m({animate:o.animate,duration:o.duration},o.pan));var c=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var c=this.getZoomScale(i),g=this.getSize().divideBy(2),k=t instanceof F?t:this.latLngToContainerPoint(t),E=k.subtract(g).multiplyBy(1-1/c),R=this.containerPointToLatLng(g.add(E));return this.setView(R,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():se(t);var o=G(i.paddingTopLeft||i.padding||[0,0]),c=G(i.paddingBottomRight||i.padding||[0,0]),g=this.getBoundsZoom(t,!1,o.add(c));if(g=typeof i.maxZoom=="number"?Math.min(i.maxZoom,g):g,g===1/0)return{center:t.getCenter(),zoom:g};var k=c.subtract(o).divideBy(2),E=this.project(t.getSouthWest(),g),R=this.project(t.getNorthEast(),g),H=this.unproject(E.add(R).divideBy(2).add(k),g);return{center:H,zoom:g}},fitBounds:function(t,i){if(t=se(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=G(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ss,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,o){if(o=o||{},o.animate===!1||!me.any3d)return this.setView(t,i,o);this._stop();var c=this.project(this.getCenter()),g=this.project(t),k=this.getSize(),E=this._zoom;t=ne(t),i=i===void 0?E:i;var R=Math.max(k.x,k.y),H=R*this.getZoomScale(E,i),V=g.distanceTo(c)||1,re=1.42,Se=re*re;function De(Ke){var Er=Ke?-1:1,Rl=Ke?H:R,Dl=H*H-R*R+Er*Se*Se*V*V,qi=2*Rl*Se*V,Ki=Dl/qi,Qi=Math.sqrt(Ki*Ki+1)-Ki,Rs=Qi<1e-9?-18:Math.log(Qi);return Rs}function zt(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function Et(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function cn(Ke){return zt(Ke)/Et(Ke)}var Qt=De(0);function Cr(Ke){return R*(Et(Qt)/Et(Qt+re*Ke))}function zo(Ke){return R*(Et(Qt)*cn(Qt+re*Ke)-zt(Qt))/Se}function Li(Ke){return 1-Math.pow(1-Ke,1.5)}var Sa=Date.now(),Yi=(De(1)-Qt)/re,qn=o.duration?1e3*o.duration:1e3*Yi*.8;function Tr(){var Ke=(Date.now()-Sa)/qn,Er=Li(Ke)*Yi;Ke<=1?(this._flyToFrame=te(Tr,this),this._move(this.unproject(c.add(g.subtract(c).multiplyBy(zo(Er)/V)),E),this.getScaleZoom(R/Cr(Er),E),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),Tr.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(t){return t=se(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),c=this._limitCenter(o,this._zoom,se(t));return o.equals(c)||this.panTo(c,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var o=G(i.paddingTopLeft||i.padding||[0,0]),c=G(i.paddingBottomRight||i.padding||[0,0]),g=this.project(this.getCenter()),k=this.project(t),E=this.getPixelBounds(),R=U([E.min.add(o),E.max.subtract(c)]),H=R.getSize();if(!R.contains(k)){this._enforcingBounds=!0;var V=k.subtract(R.getCenter()),re=R.extend(k).getSize().subtract(H);g.x+=V.x<0?-re.x:re.x,g.y+=V.y<0?-re.y:re.y,this.panTo(this.unproject(g),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=m({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),c=i.divideBy(2).round(),g=o.divideBy(2).round(),k=c.subtract(g);return!k.x&&!k.y?this:(t.animate&&t.pan?this.panBy(k):(t.pan&&this._rawPanBy(k),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(v(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=m({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=v(this._handleGeolocationResponse,this),o=v(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,o=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,o=t.coords.longitude,c=new ie(i,o),g=c.toBounds(t.coords.accuracy*2),k=this._locateOptions;if(k.setView){var E=this.getBoundsZoom(g);this.setView(c,k.maxZoom?Math.min(E,k.maxZoom):E)}var R={latlng:c,bounds:g,timestamp:t.timestamp};for(var H in t.coords)typeof t.coords[H]=="number"&&(R[H]=t.coords[H]);this.fire("locationfound",R)}},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)st(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),c=Ae("div",o,i||this._mapPane);return t&&(this._panes[t]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new ce(i,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=se(t),o=G(o||[0,0]);var c=this.getZoom()||0,g=this.getMinZoom(),k=this.getMaxZoom(),E=t.getNorthWest(),R=t.getSouthEast(),H=this.getSize().subtract(o),V=U(this.project(R,c),this.project(E,c)).getSize(),re=me.any3d?this.options.zoomSnap:1,Se=H.x/V.x,De=H.y/V.y,zt=i?Math.max(Se,De):Math.min(Se,De);return c=this.getScaleZoom(zt,c),re&&(c=Math.round(c/(re/100))*(re/100),c=i?Math.ceil(c/re)*re:Math.floor(c/re)*re),Math.max(g,Math.min(k,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new j(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=i===void 0?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=i===void 0?this._zoom:i;var c=o.zoom(t*o.scale(i));return isNaN(c)?1/0:c},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(ne(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(G(t),i)},layerPointToLatLng:function(t){var i=G(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(ne(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ne(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(se(t))},distance:function(t,i){return this.options.crs.distance(ne(t),ne(i))},containerPointToLayerPoint:function(t){return G(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return G(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(G(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(t)))},mouseEventToContainerPoint:function(t){return Yr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=an(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(i,"scroll",this._onScroll,this),this._containerId=w(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&me.any3d,Ie(t,"leaflet-container"+(me.touch?" leaflet-touch":"")+(me.retina?" leaflet-retina":"")+(me.ielt9?" leaflet-oldie":"")+(me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=Hi(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ct(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(t.markerPane,"leaflet-zoom-hide"),Ie(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,o){ct(this._mapPane,new F(0,0));var c=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var g=this._zoom!==i;this._moveStart(g,o)._move(t,i)._moveEnd(g),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,o,c){i===void 0&&(i=this._zoom);var g=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),c?o&&o.pinch&&this.fire("zoom",o):((g||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ct(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[w(this._container)]=this;var i=t?nt:Ne;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),me.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o=[],c,g=i==="mouseout"||i==="mouseover",k=t.target||t.srcElement,E=!1;k;){if(c=this._targets[w(k)],c&&(i==="click"||i==="preclick")&&this._draggableMoved(c)){E=!0;break}if(c&&c.listens(i,!0)&&(g&&!qr(k,t)||(o.push(c),g))||k===this._container)break;k=k.parentNode}return!o.length&&!E&&!g&&this.listens(i,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var o=t.type;o==="mousedown"&&Je(i),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){if(t.type==="click"){var c=m({},t);c.type="preclick",this._fireDOMEvent(c,c.type,o)}var g=this._findEventTargets(t,i);if(o){for(var k=[],E=0;E<o.length;E++)o[E].listens(i,!0)&&k.push(o[E]);g=k.concat(g)}if(g.length){i==="contextmenu"&&_t(t);var R=g[0],H={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var V=R.getLatLng&&(!R._radius||R._radius<=10);H.containerPoint=V?this.latLngToContainerPoint(R.getLatLng()):this.mouseEventToContainerPoint(t),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=V?R.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(E=0;E<g.length;E++)if(g[E].fire(i,H,!0),H.originalEvent._stopped||g[E].options.bubblingMouseEvents===!1&&ue(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return _n(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var o=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var c=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(c)},_latLngBoundsToNewLayerBounds:function(t,i,o){var c=this._getNewPixelOrigin(o,i);return U([this.project(t.getSouthWest(),i)._subtract(c),this.project(t.getNorthWest(),i)._subtract(c),this.project(t.getSouthEast(),i)._subtract(c),this.project(t.getNorthEast(),i)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var c=this.project(t,i),g=this.getSize().divideBy(2),k=new j(c.subtract(g),c.add(g)),E=this._getBoundsOffset(k,o,i);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?t:this.unproject(c.add(E),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),c=new j(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(c,i))},_getBoundsOffset:function(t,i,o){var c=U(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),g=c.min.subtract(t.min),k=c.max.subtract(t.max),E=this._rebound(g.x,-k.x),R=this._rebound(g.y,-k.y);return new F(E,R)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),c=me.any3d?this.options.zoomSnap:1;return c&&(t=Math.round(t/c)*c),Math.max(i,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,i),!0)},_createAnimProxy:function(){var t=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var o=Gr,c=this._proxy.style[o];qt(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),c===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();qt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(i),g=this._getCenterOffset(t)._divideBy(1-1/c);return o.animate!==!0&&!this.getSize().contains(g)?!1:(te(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,o,c){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(v(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Si(t,i){return new Fe(t,i)}var ln=_e.extend({options:{position:"topright"},initialize:function(t){O(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),c=t._controlCorners[o];return Ie(i,"leaflet-control"),o.indexOf("bottom")!==-1?c.insertBefore(i,c.firstChild):c.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),bi=function(t){return new ln(t)};Fe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",o=this._controlContainer=Ae("div",i+"control-container",this._container);function c(g,k){var E=i+g+" "+i+k;t[g+k]=Ae("div",E,o)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)st(this._controlCorners[t]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var po=ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,o,c){return o<c?-1:c<o?1:0}},initialize:function(t,i,o){O(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in t)this._addLayer(t[c],c);for(c in i)this._addLayer(i[c],c,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ln.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(w(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=Ae("div",t),o=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Vr(i),ws(i);var c=this._section=Ae("section",t+"-list");o&&(this._map.on("click",this.collapse,this),Ne(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ae("a",t+"-toggle",i);g.href="#",g.title="Layers",g.setAttribute("role","button"),Ne(g,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){_t(k),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=Ae("div",t+"-base",c),this._separator=Ae("div",t+"-separator",c),this._overlaysList=Ae("div",t+"-overlays",c),i.appendChild(c)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&w(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:o}),this.options.sortLayers&&this._layers.sort(v(function(c,g){return this.options.sortFunction(c.layer,g.layer,c.name,g.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dr(this._baseLayersList),dr(this._overlaysList),this._layerControlInputs=[];var t,i,o,c,g=0;for(o=0;o<this._layers.length;o++)c=this._layers[o],this._addItem(c),i=i||c.overlay,t=t||!c.overlay,g+=c.overlay?0:1;return this.options.hideSingleBase&&(t=t&&g>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(w(t.target)),o=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(t,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=o,c.firstChild},_addItem:function(t){var i=document.createElement("label"),o=this._map.hasLayer(t.layer),c;t.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=o):c=this._createRadioElement("leaflet-base-layers_"+w(this),o),this._layerControlInputs.push(c),c.layerId=w(t.layer),Ne(c,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+t.name;var k=document.createElement("span");i.appendChild(k),k.appendChild(c),k.appendChild(g);var E=t.overlay?this._overlaysList:this._baseLayersList;return E.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,o,c=[],g=[];this._handlingClick=!0;for(var k=t.length-1;k>=0;k--)i=t[k],o=this._getLayer(i.layerId).layer,i.checked?c.push(o):i.checked||g.push(o);for(k=0;k<g.length;k++)this._map.hasLayer(g[k])&&this._map.removeLayer(g[k]);for(k=0;k<c.length;k++)this._map.hasLayer(c[k])||this._map.addLayer(c[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,o,c=this._map.getZoom(),g=t.length-1;g>=0;g--)i=t[g],o=this._getLayer(i.layerId).layer,i.disabled=o.options.minZoom!==void 0&&c<o.options.minZoom||o.options.maxZoom!==void 0&&c>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Ne(t,"click",_t),this.expand();var i=this;setTimeout(function(){nt(t,"click",_t),i._preventClick=!1})}}),bs=function(t,i,o){return new po(t,i,o)},fr=ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",o=Ae("div",i+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,o,c,g){var k=Ae("a",o,c);return k.innerHTML=t,k.href="#",k.title=i,k.setAttribute("role","button"),k.setAttribute("aria-label",i),Vr(k),Ne(k,"click",Mn),Ne(k,"click",g,this),Ne(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";tt(this._zoomInButton,i),tt(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ie(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ie(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fr,this.addControl(this.zoomControl))});var ia=function(t){return new fr(t)},Kt=ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",o=Ae("div",i),c=this.options;return this._addScales(c,i+"-line",o),t.on(c.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,o){t.metric&&(this._mScale=Ae("div",i,o)),t.imperial&&(this._iScale=Ae("div",i,o))},_update:function(){var t=this._map,i=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/t)},_updateImperial:function(t){var i=t*3.2808399,o,c,g;i>5280?(o=i/5280,c=this._getRoundNum(o),this._updateScale(this._iScale,c+" mi",c/o)):(g=this._getRoundNum(i),this._updateScale(this._iScale,g+" ft",g/i))},_updateScale:function(t,i,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),o=t/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),pr=function(t){return new Kt(t)},mo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ui=ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(me.inlineSvg?mo+" ":"")+"Leaflet</a>"},initialize:function(t){O(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),Vr(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook(function(){this.options.attributionControl&&new Ui().addTo(this)});var bl=function(t){return new Ui(t)};ln.Layers=po,ln.Zoom=fr,ln.Scale=Kt,ln.Attribution=Ui,bi.layers=bs,bi.zoom=ia,bi.scale=pr,bi.attribution=bl;var vn=_e.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vn.addTo=function(t,i){return t.addHandler(i,this),this};var go={Events:xe},mr=me.touch?"touchstart mousedown":"mousedown",zn=Le.extend({options:{clickTolerance:3},initialize:function(t,i,o,c){O(this,c),this._element=t,this._dragStartTarget=i||t,this._preventOutline=o},enable:function(){this._enabled||(Ne(this._dragStartTarget,mr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(zn._dragging===this&&this.finishDrag(!0),nt(this._dragStartTarget,mr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ki(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){zn._dragging===this&&this.finishDrag();return}if(!(zn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(zn._dragging=this,this._preventOutline&&Je(this._element),Me(),He(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,o=yt(this._element);this._startPoint=new F(i.clientX,i.clientY),this._startPos=_n(this._element),this._parentScale=kt(o);var c=t.type==="mousedown";Ne(document,c?"mousemove":"touchmove",this._onMove,this),Ne(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,o=new F(i.clientX,i.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,_t(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ct(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nt(document,"mousemove touchmove",this._onMove,this),nt(document,"mouseup touchend touchcancel",this._onUp,this),qe(),si();var i=this._moved&&this._moving;this._moving=!1,zn._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function yo(t,i,o){var c,g=[1,4,2,8],k,E,R,H,V,re,Se,De;for(k=0,re=t.length;k<re;k++)t[k]._code=Wi(t[k],i);for(R=0;R<4;R++){for(Se=g[R],c=[],k=0,re=t.length,E=re-1;k<re;E=k++)H=t[k],V=t[E],H._code&Se?V._code&Se||(De=Ts(V,H,Se,i,o),De._code=Wi(De,i),c.push(De)):(V._code&Se&&(De=Ts(V,H,Se,i,o),De._code=Wi(De,i),c.push(De)),c.push(H));t=c}return t}function ra(t,i){var o,c,g,k,E,R,H,V,re;if(!t||t.length===0)throw new Error("latlngs not passed");xn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Se=ne([0,0]),De=se(t),zt=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());zt<1700&&(Se=_o(t));var Et=t.length,cn=[];for(o=0;o<Et;o++){var Qt=ne(t[o]);cn.push(i.project(ne([Qt.lat-Se.lat,Qt.lng-Se.lng])))}for(R=H=V=0,o=0,c=Et-1;o<Et;c=o++)g=cn[o],k=cn[c],E=g.y*k.x-k.y*g.x,H+=(g.x+k.x)*E,V+=(g.y+k.y)*E,R+=E*3;R===0?re=cn[0]:re=[H/R,V/R];var Cr=i.unproject(G(re));return ne([Cr.lat+Se.lat,Cr.lng+Se.lng])}function _o(t){for(var i=0,o=0,c=0,g=0;g<t.length;g++){var k=ne(t[g]);i+=k.lat,o+=k.lng,c++}return ne([i/c,o/c])}var Cl={__proto__:null,clipPolygon:yo,polygonCenter:ra,centroid:_o};function Cs(t,i){if(!i||!t.length)return t.slice();var o=i*i;return t=Pl(t,o),t=El(t,o),t}function sa(t,i,o){return Math.sqrt(Gi(t,i,o,!0))}function Tl(t,i,o){return Gi(t,i,o)}function El(t,i){var o=t.length,c=typeof Uint8Array<"u"?Uint8Array:Array,g=new c(o);g[0]=g[o-1]=1,vo(t,g,i,0,o-1);var k,E=[];for(k=0;k<o;k++)g[k]&&E.push(t[k]);return E}function vo(t,i,o,c,g){var k=0,E,R,H;for(R=c+1;R<=g-1;R++)H=Gi(t[R],t[c],t[g],!0),H>k&&(E=R,k=H);k>o&&(i[E]=1,vo(t,i,o,c,E),vo(t,i,o,E,g))}function Pl(t,i){for(var o=[t[0]],c=1,g=0,k=t.length;c<k;c++)Nl(t[c],t[g])>i&&(o.push(t[c]),g=c);return g<k-1&&o.push(t[k-1]),o}var xo;function oa(t,i,o,c,g){var k=c?xo:Wi(t,o),E=Wi(i,o),R,H,V;for(xo=E;;){if(!(k|E))return[t,i];if(k&E)return!1;R=k||E,H=Ts(t,i,R,o,g),V=Wi(H,o),R===k?(t=H,k=V):(i=H,E=V)}}function Ts(t,i,o,c,g){var k=i.x-t.x,E=i.y-t.y,R=c.min,H=c.max,V,re;return o&8?(V=t.x+k*(H.y-t.y)/E,re=H.y):o&4?(V=t.x+k*(R.y-t.y)/E,re=R.y):o&2?(V=H.x,re=t.y+E*(H.x-t.x)/k):o&1&&(V=R.x,re=t.y+E*(R.x-t.x)/k),new F(V,re,g)}function Wi(t,i){var o=0;return t.x<i.min.x?o|=1:t.x>i.max.x&&(o|=2),t.y<i.min.y?o|=4:t.y>i.max.y&&(o|=8),o}function Nl(t,i){var o=i.x-t.x,c=i.y-t.y;return o*o+c*c}function Gi(t,i,o,c){var g=i.x,k=i.y,E=o.x-g,R=o.y-k,H=E*E+R*R,V;return H>0&&(V=((t.x-g)*E+(t.y-k)*R)/H,V>1?(g=o.x,k=o.y):V>0&&(g+=E*V,k+=R*V)),E=t.x-g,R=t.y-k,c?E*E+R*R:new F(g,k)}function xn(t){return!ee(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function aa(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xn(t)}function la(t,i){var o,c,g,k,E,R,H,V;if(!t||t.length===0)throw new Error("latlngs not passed");xn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var re=ne([0,0]),Se=se(t),De=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());De<1700&&(re=_o(t));var zt=t.length,Et=[];for(o=0;o<zt;o++){var cn=ne(t[o]);Et.push(i.project(ne([cn.lat-re.lat,cn.lng-re.lng])))}for(o=0,c=0;o<zt-1;o++)c+=Et[o].distanceTo(Et[o+1])/2;if(c===0)V=Et[0];else for(o=0,k=0;o<zt-1;o++)if(E=Et[o],R=Et[o+1],g=E.distanceTo(R),k+=g,k>c){H=(k-c)/g,V=[R.x-H*(R.x-E.x),R.y-H*(R.y-E.y)];break}var Qt=i.unproject(G(V));return ne([Qt.lat+re.lat,Qt.lng+re.lng])}var ua={__proto__:null,simplify:Cs,pointToSegmentDistance:sa,closestPointOnSegment:Tl,clipSegment:oa,_getEdgeIntersection:Ts,_getBitCode:Wi,_sqClosestPointOnSegment:Gi,isFlat:xn,_flat:aa,polylineCenter:la},wo={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new ie(t.y,t.x)},bounds:new j([-180,-90],[180,90])},ko={R:6378137,R_MINOR:6356752314245179e-9,bounds:new j([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,o=this.R,c=t.lat*i,g=this.R_MINOR/o,k=Math.sqrt(1-g*g),E=k*Math.sin(c),R=Math.tan(Math.PI/4-c/2)/Math.pow((1-E)/(1+E),k/2);return c=-o*Math.log(Math.max(R,1e-10)),new F(t.lng*i*o,c)},unproject:function(t){for(var i=180/Math.PI,o=this.R,c=this.R_MINOR/o,g=Math.sqrt(1-c*c),k=Math.exp(-t.y/o),E=Math.PI/2-2*Math.atan(k),R=0,H=.1,V;R<15&&Math.abs(H)>1e-7;R++)V=g*Math.sin(E),V=Math.pow((1-V)/(1+V),g/2),H=Math.PI/2-2*Math.atan(k*V)-E,E+=H;return new ie(E*i,t.x*i/o)}},Ll={__proto__:null,LonLat:wo,Mercator:ko,SphericalMercator:Qe},jl=m({},ke,{code:"EPSG:3395",projection:ko,transformation:(function(){var t=.5/(Math.PI*ko.R);return ut(t,.5,-t,.5)})()}),ca=m({},ke,{code:"EPSG:4326",projection:wo,transformation:ut(1/180,1,-1/180,.5)}),Il=m({},Ee,{projection:wo,transformation:ut(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var o=i.lng-t.lng,c=i.lat-t.lat;return Math.sqrt(o*o+c*c)},infinite:!0});Ee.Earth=ke,Ee.EPSG3395=jl,Ee.EPSG3857=Nt,Ee.EPSG900913=wt,Ee.EPSG4326=ca,Ee.Simple=Il;var An=Le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[w(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[w(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});Fe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=w(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=w(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return w(t)in this._layers},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},_addLayers:function(t){t=t?ee(t)?t:[t]:[];for(var i=0,o=t.length;i<o;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[w(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=w(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,o=this._getZoomSpan();for(var c in this._zoomBoundLayers){var g=this._zoomBoundLayers[c].options;t=g.minZoom===void 0?t:Math.min(t,g.minZoom),i=g.maxZoom===void 0?i:Math.max(i,g.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ci=An.extend({initialize:function(t,i){O(this,i),this._layers={};var o,c;if(t)for(o=0,c=t.length;o<c;o++)this.addLayer(t[o])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),o,c;for(o in this._layers)c=this._layers[o],c[t]&&c[t].apply(c,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return w(t)}}),Kr=function(t,i){return new Ci(t,i)},oi=Ci.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ci.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ci.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ce;for(var i in this._layers){var o=this._layers[i];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),da=function(t,i){return new oi(t,i)},$i=_e.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){O(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(c,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(t,i){var o=this.options,c=o[i+"Size"];typeof c=="number"&&(c=[c,c]);var g=G(c),k=G(i==="shadow"&&o.shadowAnchor||o.iconAnchor||g&&g.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(o.className||""),k&&(t.style.marginLeft=-k.x+"px",t.style.marginTop=-k.y+"px"),g&&(t.style.width=g.x+"px",t.style.height=g.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return me.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ha(t){return new $i(t)}var gr=$i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof gr.imagePath!="string"&&(gr.imagePath=this._detectIconPath()),(this.options.imagePath||gr.imagePath)+$i.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(o,c,g){var k=c.exec(o);return k&&k[g]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ae("div","leaflet-default-icon-path",document.body),i=Hi(t,"background-image")||Hi(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),So=vn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new zn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,o=i._map,c=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,k=_n(i._icon),E=o.getPixelBounds(),R=o.getPixelOrigin(),H=U(E.min._subtract(R).add(g),E.max._subtract(R).subtract(g));if(!H.contains(k)){var V=G((Math.max(H.max.x,k.x)-H.max.x)/(E.max.x-H.max.x)-(Math.min(H.min.x,k.x)-H.min.x)/(E.min.x-H.min.x),(Math.max(H.max.y,k.y)-H.max.y)/(E.max.y-H.max.y)-(Math.min(H.min.y,k.y)-H.min.y)/(E.min.y-H.min.y)).multiplyBy(c);o.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),ct(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=te(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,o=i._shadow,c=_n(i._icon),g=i._map.layerPointToLatLng(c);o&&ct(o,c),i._latlng=g,t.latlng=g,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ai=An.extend({options:{icon:new gr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){O(this,i),this._latlng=ne(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=ne(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),c=!1;o!==this._icon&&(this._icon&&this._removeIcon(),c=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),Ie(o,i),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(o,"focus",this._panOnFocus,this);var g=t.icon.createShadow(this._shadow),k=!1;g!==this._shadow&&(this._removeShadow(),k=!0),g&&(Ie(g,i),g.alt=""),this._shadow=g,t.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&k&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(this._icon,"focus",this._panOnFocus,this),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ct(this._icon,t),this._shadow&&ct(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),So)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new So(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Bt(this._icon,t),this._shadow&&Bt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,o=i.iconSize?G(i.iconSize):G(0,0),c=i.iconAnchor?G(i.iconAnchor):G(0,0);t.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:o.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ml(t,i){return new ai(t,i)}var Ti=An.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return O(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Es=Ti.extend({options:{fill:!0,radius:10},initialize:function(t,i){O(this,i),this._latlng=ne(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=ne(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Ti.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,o=this._clickTolerance(),c=[t+o,i+o];this._pxBounds=new j(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fa(t,i){return new Es(t,i)}var Ps=Es.extend({initialize:function(t,i,o){if(typeof i=="number"&&(i=m({},o,{radius:i})),O(this,i),this._latlng=ne(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ti.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,o=this._map,c=o.options.crs;if(c.distance===ke.distance){var g=Math.PI/180,k=this._mRadius/ke.R/g,E=o.project([i+k,t]),R=o.project([i-k,t]),H=E.add(R).divideBy(2),V=o.unproject(H).lat,re=Math.acos((Math.cos(k*g)-Math.sin(i*g)*Math.sin(V*g))/(Math.cos(i*g)*Math.cos(V*g)))/g;(isNaN(re)||re===0)&&(re=k/Math.cos(Math.PI/180*i)),this._point=H.subtract(o.getPixelOrigin()),this._radius=isNaN(re)?0:H.x-o.project([V,t-re]).x,this._radiusY=H.y-E.y}else{var Se=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(Se).x}this._updateBounds()}});function Qr(t,i,o){return new Ps(t,i,o)}var un=Ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){O(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,o=null,c=Gi,g,k,E=0,R=this._parts.length;E<R;E++)for(var H=this._parts[E],V=1,re=H.length;V<re;V++){g=H[V-1],k=H[V];var Se=c(t,g,k,!0);Se<i&&(i=Se,o=c(t,g,k))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return la(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=ne(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ce,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],o=xn(t),c=0,g=t.length;c<g;c++)o?(i[c]=ne(t[c]),this._bounds.extend(i[c])):i[c]=this._convertLatLngs(t[c]);return i},_project:function(){var t=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new F(t,t);this._rawPxBounds&&(this._pxBounds=new j([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,o){var c=t[0]instanceof ie,g=t.length,k,E;if(c){for(E=[],k=0;k<g;k++)E[k]=this._map.latLngToLayerPoint(t[k]),o.extend(E[k]);i.push(E)}else for(k=0;k<g;k++)this._projectLatlngs(t[k],i,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,o,c,g,k,E,R,H;for(o=0,g=0,k=this._rings.length;o<k;o++)for(H=this._rings[o],c=0,E=H.length;c<E-1;c++)R=oa(H[c],H[c+1],t,c,!0),R&&(i[g]=i[g]||[],i[g].push(R[0]),(R[1]!==H[c+1]||c===E-2)&&(i[g].push(R[1]),g++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,o=0,c=t.length;o<c;o++)t[o]=Cs(t[o],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var o,c,g,k,E,R,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,k=this._parts.length;o<k;o++)for(R=this._parts[o],c=0,E=R.length,g=E-1;c<E;g=c++)if(!(!i&&c===0)&&sa(t,R[g],R[c])<=H)return!0;return!1}});function zl(t,i){return new un(t,i)}un._flat=aa;var li=un.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ra(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=un.prototype._convertLatLngs.call(this,t),o=i.length;return o>=2&&i[0]instanceof ie&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(t){un.prototype._setLatLngs.call(this,t),xn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,o=new F(i,i);if(t=new j(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,g=this._rings.length,k;c<g;c++)k=yo(this._rings[c],t,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,o,c,g,k,E,R,H,V;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(k=0,H=this._parts.length;k<H;k++)for(o=this._parts[k],E=0,V=o.length,R=V-1;E<V;R=E++)c=o[E],g=o[R],c.y>t.y!=g.y>t.y&&t.x<(g.x-c.x)*(t.y-c.y)/(g.y-c.y)+c.x&&(i=!i);return i||un.prototype._containsPoint.call(this,t,!0)}});function Al(t,i){return new li(t,i)}var $n=oi.extend({initialize:function(t,i){O(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=ee(t)?t:t.features,o,c,g;if(i){for(o=0,c=i.length;o<c;o++)g=i[o],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var k=this.options;if(k.filter&&!k.filter(t))return this;var E=yr(t,k);return E?(E.feature=Ms(t),E.defaultOptions=E.options,this.resetStyle(E),k.onEachFeature&&k.onEachFeature(t,E),this.addLayer(E)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=m({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function yr(t,i){var o=t.type==="Feature"?t.geometry:t,c=o?o.coordinates:null,g=[],k=i&&i.pointToLayer,E=i&&i.coordsToLatLng||Ls,R,H,V,re;if(!c&&!o)return null;switch(o.type){case"Point":return R=E(c),Ns(k,t,R,i);case"MultiPoint":for(V=0,re=c.length;V<re;V++)R=E(c[V]),g.push(Ns(k,t,R,i));return new oi(g);case"LineString":case"MultiLineString":return H=Xr(c,o.type==="LineString"?0:1,E),new un(H,i);case"Polygon":case"MultiPolygon":return H=Xr(c,o.type==="Polygon"?1:2,E),new li(H,i);case"GeometryCollection":for(V=0,re=o.geometries.length;V<re;V++){var Se=yr({geometry:o.geometries[V],type:"Feature",properties:t.properties},i);Se&&g.push(Se)}return new oi(g);case"FeatureCollection":for(V=0,re=o.features.length;V<re;V++){var De=yr(o.features[V],i);De&&g.push(De)}return new oi(g);default:throw new Error("Invalid GeoJSON object.")}}function Ns(t,i,o,c){return t?t(i,o):new ai(o,c&&c.markersInheritOptions&&c)}function Ls(t){return new ie(t[1],t[0],t[2])}function Xr(t,i,o){for(var c=[],g=0,k=t.length,E;g<k;g++)E=i?Xr(t[g],i-1,o):(o||Ls)(t[g]),c.push(E);return c}function js(t,i){return t=ne(t),t.alt!==void 0?[b(t.lng,i),b(t.lat,i),b(t.alt,i)]:[b(t.lng,i),b(t.lat,i)]}function Is(t,i,o,c){for(var g=[],k=0,E=t.length;k<E;k++)g.push(i?Is(t[k],xn(t[k])?0:i-1,o,c):js(t[k],c));return!i&&o&&g.length>0&&g.push(g[0].slice()),g}function _r(t,i){return t.feature?m({},t.feature,{geometry:i}):Ms(i)}function Ms(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var bo={toGeoJSON:function(t){return _r(this,{type:"Point",coordinates:js(this.getLatLng(),t)})}};ai.include(bo),Ps.include(bo),Es.include(bo),un.include({toGeoJSON:function(t){var i=!xn(this._latlngs),o=Is(this._latlngs,i?1:0,!1,t);return _r(this,{type:(i?"Multi":"")+"LineString",coordinates:o})}}),li.include({toGeoJSON:function(t){var i=!xn(this._latlngs),o=i&&!xn(this._latlngs[0]),c=Is(this._latlngs,o?2:i?1:0,!0,t);return i||(c=[c]),_r(this,{type:(o?"Multi":"")+"Polygon",coordinates:c})}}),Ci.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(o){i.push(o.toGeoJSON(t).geometry.coordinates)}),_r(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var o=i==="GeometryCollection",c=[];return this.eachLayer(function(g){if(g.toGeoJSON){var k=g.toGeoJSON(t);if(o)c.push(k.geometry);else{var E=Ms(k);E.type==="FeatureCollection"?c.push.apply(c,E.features):c.push(E)}}}),o?_r(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function pa(t,i){return new $n(t,i)}var On=pa,Ei=An.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,o){this._url=t,this._bounds=se(i),O(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&wi(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=se(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:Ae("img");if(Ie(i,"leaflet-image-layer"),this._zoomAnimated&&Ie(i,"leaflet-zoom-animated"),this.options.className&&Ie(i,this.options.className),i.onselectstart=T,i.onmousemove=T,i.onload=v(this.fire,this,"load"),i.onerror=v(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;qt(this._image,o,i)},_reset:function(){var t=this._image,i=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();ct(t,i.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){Bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ma=function(t,i,o){return new Ei(t,i,o)},Co=Ei.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:Ae("video");if(Ie(i,"leaflet-image-layer"),this._zoomAnimated&&Ie(i,"leaflet-zoom-animated"),this.options.className&&Ie(i,this.options.className),i.onselectstart=T,i.onmousemove=T,i.onloadeddata=v(this.fire,this,"load"),t){for(var o=i.getElementsByTagName("source"),c=[],g=0;g<o.length;g++)c.push(o[g].src);this._url=o.length>0?c:[i.src];return}ee(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var E=Ae("source");E.src=this._url[k],i.appendChild(E)}}});function ga(t,i,o){return new Co(t,i,o)}var To=Ei.extend({_initImage:function(){var t=this._image=this._url;Ie(t,"leaflet-image-layer"),this._zoomAnimated&&Ie(t,"leaflet-zoom-animated"),this.options.className&&Ie(t,this.options.className),t.onselectstart=T,t.onmousemove=T}});function Eo(t,i,o){return new To(t,i,o)}var Vn=An.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof ie||ee(t))?(this._latlng=ne(t),O(this,i)):(O(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Bt(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Bt(this._container,0),this._removeTimeout=setTimeout(v(st,void 0,this._container),200)):st(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ne(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wi(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof oi){i=null;var o=this._source._layers;for(var c in o)if(o[c]._map){i=o[c];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=G(this.options.offset),o=this._getAnchor();this._zoomAnimated?ct(this._container,t.add(o)):i=i.add(t).add(o);var c=this._containerBottom=-i.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=c+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Fe.include({_initOverlay:function(t,i,o,c){var g=i;return g instanceof t||(g=new t(c).setContent(i)),o&&g.setLatLng(o),g}}),An.include({_initOverlay:function(t,i,o,c){var g=o;return g instanceof t?(O(g,c),g._source=this):(g=i&&!c?i:new t(c,this),g.setContent(o)),g}});var zs=Vn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Vn.prototype.openOn.call(this,t)},onAdd:function(t){Vn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ti||this._source.on("preclick",Gn))},onRemove:function(t){Vn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ti||this._source.off("preclick",Gn))},getEvents:function(){var t=Vn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=Ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=Ae("div",t+"-content-wrapper",i);if(this._contentNode=Ae("div",t+"-content",o),Vr(i),ws(this._contentNode),Ne(i,"contextmenu",Gn),this._tipContainer=Ae("div",t+"-tip-container",i),this._tip=Ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=Ae("a",t+"-close-button",i);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(c,"click",function(g){_t(g),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var c=t.offsetHeight,g=this.options.maxHeight,k="leaflet-popup-scrolled";g&&c>g?(i.height=g+"px",Ie(t,k)):tt(t,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();ct(this._container,i.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(Hi(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+i,c=this._containerWidth,g=new F(this._containerLeft,-o-this._containerBottom);g._add(_n(this._container));var k=t.layerPointToContainerPoint(g),E=G(this.options.autoPanPadding),R=G(this.options.autoPanPaddingTopLeft||E),H=G(this.options.autoPanPaddingBottomRight||E),V=t.getSize(),re=0,Se=0;k.x+c+H.x>V.x&&(re=k.x+c-V.x+H.x),k.x-re-R.x<0&&(re=k.x-R.x),k.y+o+H.y>V.y&&(Se=k.y+o-V.y+H.y),k.y-Se-R.y<0&&(Se=k.y-R.y),(re||Se)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([re,Se]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vr=function(t,i){return new zs(t,i)};Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(t,i,o){return this._initOverlay(zs,t,i,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),An.include({bindPopup:function(t,i){return this._popup=this._initOverlay(zs,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof oi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Mn(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof Ti)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var xr=Vn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Vn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Vn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Vn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,o,c=this._map,g=this._container,k=c.latLngToContainerPoint(c.getCenter()),E=c.layerPointToContainerPoint(t),R=this.options.direction,H=g.offsetWidth,V=g.offsetHeight,re=G(this.options.offset),Se=this._getAnchor();R==="top"?(i=H/2,o=V):R==="bottom"?(i=H/2,o=0):R==="center"?(i=H/2,o=V/2):R==="right"?(i=0,o=V/2):R==="left"?(i=H,o=V/2):E.x<k.x?(R="right",i=0,o=V/2):(R="left",i=H+(re.x+Se.x)*2,o=V/2),t=t.subtract(G(i,o,!0)).add(re).add(Se),tt(g,"leaflet-tooltip-right"),tt(g,"leaflet-tooltip-left"),tt(g,"leaflet-tooltip-top"),tt(g,"leaflet-tooltip-bottom"),Ie(g,"leaflet-tooltip-"+R),ct(g,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Bt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Jr=function(t,i){return new xr(t,i)};Fe.include({openTooltip:function(t,i,o){return this._initOverlay(xr,t,i,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),An.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xr,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[i](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof oi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(Ne(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Ne(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,o,c;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),c=this._map.containerPointToLayerPoint(o),i=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(i)}});var As=$i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(dr(i),i.appendChild(o.html)):i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var c=G(o.bgPos);i.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function ya(t){return new As(t)}$i.Default=gr;var Pi=An.extend({options:{tileSize:256,opacity:1,updateWhenIdle:me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){O(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),st(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,o=-t(-1/0,1/0),c=0,g=i.length,k;c<g;c++)k=i[c].style.zIndex,i[c]!==this._container&&k&&(o=t(o,+k));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!me.ielt9){Bt(this._container,this.options.opacity);var t=+new Date,i=!1,o=!1;for(var c in this._tiles){var g=this._tiles[c];if(!(!g.current||!g.loaded)){var k=Math.min(1,(t-g.loaded)/200);Bt(g.el,k),k<1?i=!0:(g.active?o=!0:this._onOpaqueTile(g),g.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(J(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=i-Math.abs(t-o),this._onUpdateLevel(o)):(st(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var c=this._levels[t],g=this._map;return c||(c=this._levels[t]={},c.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=i,c.origin=g.project(g.unproject(g.getPixelOrigin()),t).round(),c.zoom=t,this._setZoomTransform(c,g.getCenter(),g.getZoom()),T(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var t,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var c=i.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)st(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,o,c){var g=Math.floor(t/2),k=Math.floor(i/2),E=o-1,R=new F(+g,+k);R.z=+E;var H=this._tileCoordsToKey(R),V=this._tiles[H];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),E>c?this._retainParent(g,k,E,c):!1)},_retainChildren:function(t,i,o,c){for(var g=2*t;g<2*t+2;g++)for(var k=2*i;k<2*i+2;k++){var E=new F(g,k);E.z=o+1;var R=this._tileCoordsToKey(E),H=this._tiles[R];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);o+1<c&&this._retainChildren(g,k,o+1,c)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,o,c){var g=Math.round(i);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var k=this.options.updateWhenZooming&&g!==this._tileZoom;(!c||k)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,i)},_setZoomTransform:function(t,i,o){var c=this._map.getZoomScale(o,t.zoom),g=t.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(i,o)).round();me.any3d?qt(t.el,g,c):ct(t.el,g)},_resetGrid:function(){var t=this._map,i=t.options.crs,o=this._tileSize=this.getTileSize(),c=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],c).x/o.x),Math.ceil(t.project([0,i.wrapLng[1]],c).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],c).y/o.x),Math.ceil(t.project([i.wrapLat[1],0],c).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),c=i.getZoomScale(o,this._tileZoom),g=i.project(t,this._tileZoom).floor(),k=i.getSize().divideBy(c*2);return new j(g.subtract(k),g.add(k))},_update:function(t){var i=this._map;if(i){var o=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(t),g=this._pxBoundsToTileRange(c),k=g.getCenter(),E=[],R=this.options.keepBuffer,H=new j(g.getBottomLeft().subtract([R,-R]),g.getTopRight().add([R,-R]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var re=this._tiles[V].coords;(re.z!==this._tileZoom||!H.contains(new F(re.x,re.y)))&&(this._tiles[V].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var Se=g.min.y;Se<=g.max.y;Se++)for(var De=g.min.x;De<=g.max.x;De++){var zt=new F(De,Se);if(zt.z=this._tileZoom,!!this._isValidTile(zt)){var Et=this._tiles[this._tileCoordsToKey(zt)];Et?Et.current=!0:E.push(zt)}}if(E.sort(function(Qt,Cr){return Qt.distanceTo(k)-Cr.distanceTo(k)}),E.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var cn=document.createDocumentFragment();for(De=0;De<E.length;De++)this._addTile(E[De],cn);this._level.el.appendChild(cn)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!i.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(t);return se(this.options.bounds).overlaps(c)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,o=this.getTileSize(),c=t.scaleBy(o),g=c.add(o),k=i.unproject(c,t.z),E=i.unproject(g,t.z);return[k,E]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),o=new ce(i[0],i[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),o=new F(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(t){var i=this._tiles[t];i&&(st(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ie(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=T,t.onmousemove=T,me.ielt9&&this.options.opacity<1&&Bt(t,this.options.opacity)},_addTile:function(t,i){var o=this._getTilePos(t),c=this._tileCoordsToKey(t),g=this.createTile(this._wrapCoords(t),v(this._tileReady,this,t));this._initTile(g),this.createTile.length<2&&te(v(this._tileReady,this,t,null,g)),ct(g,o),this._tiles[c]={el:g,coords:t,current:!0},i.appendChild(g),this.fire("tileloadstart",{tile:g,coords:t})},_tileReady:function(t,i,o){i&&this.fire("tileerror",{error:i,tile:o,coords:t});var c=this._tileCoordsToKey(t);o=this._tiles[c],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Bt(o.el,0),J(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(Ie(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),me.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(v(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new F(this._wrapX?M(t.x,this._wrapX):t.x,this._wrapY?M(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new j(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function wr(t){return new Pi(t)}var Ni=Pi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=O(this,i),i.detectRetina&&me.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=document.createElement("img");return Ne(o,"load",v(this._tileOnLoad,this,i,o)),Ne(o,"error",v(this._tileOnError,this,i,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:me.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return $(this._url,m(i,this.options))},_tileOnLoad:function(t,i){me.ielt9?setTimeout(v(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var c=this.options.errorTileUrl;c&&i.getAttribute("src")!==c&&(i.src=c),t(o,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,o=this.options.zoomReverse,c=this.options.zoomOffset;return o&&(t=i-t),t+c},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=T,i.onerror=T,!i.complete)){i.src=Pe;var o=this._tiles[t].coords;st(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:o})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",Pe),Pi.prototype._removeTile.call(this,t)},_tileReady:function(t,i,o){if(!(!this._map||o&&o.getAttribute("src")===Pe))return Pi.prototype._tileReady.call(this,t,i,o)}});function Po(t,i){return new Ni(t,i)}var es=Ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=m({},this.defaultWmsParams);for(var c in i)c in this.options||(o[c]=i[c]);i=O(this,i);var g=i.detectRetina&&me.retina?2:1,k=this.getTileSize();o.width=k.x*g,o.height=k.y*g,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Ni.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),o=this._crs,c=U(o.project(i[0]),o.project(i[1])),g=c.min,k=c.max,E=(this._wmsVersion>=1.3&&this._crs===ca?[g.y,g.x,k.y,k.x]:[g.x,g.y,k.x,k.y]).join(","),R=Ni.prototype.getTileUrl.call(this,t);return R+W(this.wmsParams,R,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(t,i){return m(this.wmsParams,t),i||this.redraw(),this}});function _a(t,i){return new es(t,i)}Ni.WMS=es,Po.wms=_a;var Yn=An.extend({options:{padding:.1},initialize:function(t){O(this,t),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var o=this._map.getZoomScale(i,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,i),k=c.multiplyBy(-o).add(g).subtract(this._map._getNewPixelOrigin(t,i));me.any3d?qt(this._container,k,o):ct(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new j(o,o.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),No=Yn.extend({options:{tolerance:0},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Yn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ne(t,"mousemove",this._onMouseMove,this),Ne(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,st(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Yn.prototype._update.call(this);var t=this._bounds,i=this._container,o=t.getSize(),c=me.retina?2:1;ct(i,t.min),i.width=c*o.x,i.height=c*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",me.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Yn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[w(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,o=i.next,c=i.prev;o?o.prev=c:this._drawLast=c,c?c.next=o:this._drawFirst=o,delete t._order,delete this._layers[w(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),o=[],c,g;for(g=0;g<i.length;g++){if(c=Number(i[g]),isNaN(c))return;o.push(c)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)t=c.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var o,c,g,k,E=t._parts,R=E.length,H=this._ctx;if(R){for(H.beginPath(),o=0;o<R;o++){for(c=0,g=E[o].length;c<g;c++)k=E[o][c],H[c?"lineTo":"moveTo"](k.x,k.y);i&&H.closePath()}this._fillStroke(H,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,o=this._ctx,c=Math.max(Math.round(t._radius),1),g=(Math.max(Math.round(t._radiusY),1)||c)/c;g!==1&&(o.save(),o.scale(1,g)),o.beginPath(),o.arc(i.x,i.y/g,c,0,Math.PI*2,!1),g!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,i){var o=i.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),o,c,g=this._drawFirst;g;g=g.next)o=g.layer,o.options.interactive&&o._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(c=o);this._fireEvent(c?[c]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(tt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var o,c,g=this._drawFirst;g;g=g.next)o=g.layer,o.options.interactive&&o._containsPoint(i)&&(c=o);c!==this._hoveredLayer&&(this._handleMouseOut(t),c&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([c],t,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(v(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,o){this._map._fireDOMEvent(i,o||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var o=i.next,c=i.prev;if(o)o.prev=c;else return;c?c.next=o:o&&(this._drawFirst=o),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var o=i.next,c=i.prev;if(c)c.next=o;else return;o?o.prev=c:c&&(this._drawLast=c),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Lo(t){return me.canvas?new No(t):null}var kr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),va={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Yn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=kr("shape");Ie(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=kr("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;st(i),t.removeInteractiveTarget(i),delete this._layers[w(t)]},_updateStyle:function(t){var i=t._stroke,o=t._fill,c=t.options,g=t._container;g.stroked=!!c.stroke,g.filled=!!c.fill,c.stroke?(i||(i=t._stroke=kr("stroke")),g.appendChild(i),i.weight=c.weight+"px",i.color=c.color,i.opacity=c.opacity,c.dashArray?i.dashStyle=ee(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=c.lineCap.replace("butt","flat"),i.joinstyle=c.lineJoin):i&&(g.removeChild(i),t._stroke=null),c.fill?(o||(o=t._fill=kr("fill")),g.appendChild(o),o.color=c.fillColor||c.color,o.opacity=c.fillOpacity):o&&(g.removeChild(o),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),o=Math.round(t._radius),c=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+c+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){wi(t._container)},_bringToBack:function(t){In(t._container)}},Rn=me.vml?kr:Be,Vi=Yn.extend({_initContainer:function(){this._container=Rn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Rn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Yn.prototype._update.call(this);var t=this._bounds,i=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),ct(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Rn("path");t.options.className&&Ie(i,t.options.className),t.options.interactive&&Ie(i,"leaflet-interactive"),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){st(t._path),t.removeInteractiveTarget(t._path),delete this._layers[w(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,o=t.options;i&&(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,bt(t._parts,i))},_updateCircle:function(t){var i=t._point,o=Math.max(Math.round(t._radius),1),c=Math.max(Math.round(t._radiusY),1)||o,g="a"+o+","+c+" 0 1,0 ",k=t._empty()?"M0 0":"M"+(i.x-o)+","+i.y+g+o*2+",0 "+g+-o*2+",0 ";this._setPath(t,k)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){wi(t._path)},_bringToBack:function(t){In(t._path)}});me.vml&&Vi.include(va);function Os(t){return me.svg||me.vml?new Vi(t):null}Fe.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Lo(t)||Os(t)}});var xa=li.extend({initialize:function(t,i){li.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=se(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ol(t,i){return new xa(t,i)}Vi.create=Rn,Vi.pointsToPath=bt,$n.geometryToLayer=yr,$n.coordsToLatLng=Ls,$n.coordsToLatLngs=Xr,$n.latLngToCoords=js,$n.latLngsToCoords=Is,$n.getFeature=_r,$n.asFeature=Ms,Fe.mergeOptions({boxZoom:!0});var Sr=vn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),He(),Me(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ne(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new j(this._point,this._startPoint),o=i.getSize();ct(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(st(this._box),tt(this._container,"leaflet-crosshair")),si(),qe(),nt(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(v(this._resetState,this),0);var i=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fe.addInitHook("addHandler","boxZoom",Sr),Fe.mergeOptions({doubleClickZoom:!0});var wa=vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,o=i.getZoom(),c=i.options.zoomDelta,g=t.originalEvent.shiftKey?o-c:o+c;i.options.doubleClickZoom==="center"?i.setZoom(g):i.setZoomAround(t.containerPoint,g)}});Fe.addInitHook("addHandler","doubleClickZoom",wa),Fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var jo=vn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new zn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=se(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),o=this._initialWorldOffset,c=this._draggable._newPos.x,g=(c-i+o)%t+i-o,k=(c+i+o)%t-i-o,E=Math.abs(g+o)<Math.abs(k+o)?g:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(t){var i=this._map,o=i.options,c=!o.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),c)i.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,E=o.easeLinearity,R=g.multiplyBy(E/k),H=R.distanceTo([0,0]),V=Math.min(o.inertiaMaxSpeed,H),re=R.multiplyBy(V/H),Se=V/(o.inertiaDeceleration*E),De=re.multiplyBy(-Se/2).round();!De.x&&!De.y?i.fire("moveend"):(De=i._limitOffset(De,i.options.maxBounds),te(function(){i.panBy(De,{duration:Se,easeLinearity:E,noMoveStart:!0,animate:!0})}))}}});Fe.addInitHook("addHandler","dragging",jo),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Io=vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ne(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,o=t.scrollTop||i.scrollTop,c=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(c,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},o=this.keyCodes,c,g;for(c=0,g=o.left.length;c<g;c++)i[o.left[c]]=[-1*t,0];for(c=0,g=o.right.length;c<g;c++)i[o.right[c]]=[t,0];for(c=0,g=o.down.length;c<g;c++)i[o.down[c]]=[0,t];for(c=0,g=o.up.length;c<g;c++)i[o.up[c]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},o=this.keyCodes,c,g;for(c=0,g=o.zoomIn.length;c<g;c++)i[o.zoomIn[c]]=t;for(c=0,g=o.zoomOut.length;c<g;c++)i[o.zoomOut[c]]=-t},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,o=this._map,c;if(i in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(c=this._panKeys[i],t.shiftKey&&(c=G(c).multiplyBy(3)),o.options.maxBounds&&(c=o._limitOffset(G(c),o.options.maxBounds)),o.options.worldCopyJump){var g=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(c)));o.panTo(g)}else o.panBy(c)}else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Mn(t)}}});Fe.addInitHook("addHandler","keyboard",Io),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var it=vn.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=na(t),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var c=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(v(this._performZoom,this),c),Mn(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,k=o?Math.ceil(g/o)*o:g,E=t._limitZoom(i+(this._delta>0?k:-k))-i;this._delta=0,this._startTime=null,E&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+E):t.setZoomAround(this._lastMousePos,i+E))}});Fe.addInitHook("addHandler","scrollWheelZoom",it);var Mo=600;Fe.mergeOptions({tapHold:me.touchNative&&me.safari&&me.mobile,tapTolerance:15});var ts=vn.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new F(i.clientX,i.clientY),this._holdTimeout=setTimeout(v(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",_t),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Mo),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){nt(document,"touchend",_t),nt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new F(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});o._simulated=!0,i.target.dispatchEvent(o)}});Fe.addInitHook("addHandler","tapHold",ts),Fe.mergeOptions({touchZoom:me.touch,bounceAtZoomLimits:!0});var br=vn.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var o=i.mouseEventToContainerPoint(t.touches[0]),c=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(c)._divideBy(2))),this._startDist=o.distanceTo(c),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),_t(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,o=i.mouseEventToContainerPoint(t.touches[0]),c=i.mouseEventToContainerPoint(t.touches[1]),g=o.distanceTo(c)/this._startDist;if(this._zoom=i.getScaleZoom(g,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&g<1||this._zoom>i.getMaxZoom()&&g>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var k=o._add(c)._divideBy(2)._subtract(this._centerPoint);if(g===1&&k.x===0&&k.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var E=v(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(E,this,!0),_t(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fe.addInitHook("addHandler","touchZoom",br),Fe.BoxZoom=Sr,Fe.DoubleClickZoom=wa,Fe.Drag=jo,Fe.Keyboard=Io,Fe.ScrollWheelZoom=it,Fe.TapHold=ts,Fe.TouchZoom=br,u.Bounds=j,u.Browser=me,u.CRS=Ee,u.Canvas=No,u.Circle=Ps,u.CircleMarker=Es,u.Class=_e,u.Control=ln,u.DivIcon=As,u.DivOverlay=Vn,u.DomEvent=ks,u.DomUtil=Gt,u.Draggable=zn,u.Evented=Le,u.FeatureGroup=oi,u.GeoJSON=$n,u.GridLayer=Pi,u.Handler=vn,u.Icon=$i,u.ImageOverlay=Ei,u.LatLng=ie,u.LatLngBounds=ce,u.Layer=An,u.LayerGroup=Ci,u.LineUtil=ua,u.Map=Fe,u.Marker=ai,u.Mixin=go,u.Path=Ti,u.Point=F,u.PolyUtil=Cl,u.Polygon=li,u.Polyline=un,u.Popup=zs,u.PosAnimation=Ss,u.Projection=Ll,u.Rectangle=xa,u.Renderer=Yn,u.SVG=Vi,u.SVGOverlay=To,u.TileLayer=Ni,u.Tooltip=xr,u.Transformation=Ve,u.Util=ve,u.VideoOverlay=Co,u.bind=v,u.bounds=U,u.canvas=Lo,u.circle=Qr,u.circleMarker=fa,u.control=bi,u.divIcon=ya,u.extend=m,u.featureGroup=da,u.geoJSON=pa,u.geoJson=On,u.gridLayer=wr,u.icon=ha,u.imageOverlay=ma,u.latLng=ne,u.latLngBounds=se,u.layerGroup=Kr,u.map=Si,u.marker=Ml,u.point=G,u.polygon=Al,u.polyline=zl,u.popup=vr,u.rectangle=Ol,u.setOptions=O,u.stamp=w,u.svg=Os,u.svgOverlay=Eo,u.tileLayer=Po,u.tooltip=Jr,u.transformation=ut,u.version=h,u.videoOverlay=ga;var ka=window.L;u.noConflict=function(){return window.L=ka,this},window.L=u}))})(Qo,Qo.exports)),Qo.exports}var ea=Km();const Qm=Xh(ea);function wc(s,a,u){return Object.freeze({instance:s,context:a,container:u})}function cf(s,a){return a==null?function(h,m){const y=P.useRef();return y.current||(y.current=s(h,m)),y}:function(h,m){const y=P.useRef();y.current||(y.current=s(h,m));const v=P.useRef(h),{instance:x}=y.current;return P.useEffect(function(){v.current!==h&&(a(x,h,v.current),v.current=h)},[x,h,m]),y}}function df(s,a){P.useEffect(function(){return(a.layerContainer??a.map).addLayer(s.instance),function(){var y;(y=a.layerContainer)==null||y.removeLayer(s.instance),a.map.removeLayer(s.instance)}},[a,s])}function Xm(s){return function(u){const h=vc(),m=s(xc(u,h),h);return Um(h.map,u.attribution),uf(m.current,u.eventHandlers),df(m.current,h),m}}function Jm(s,a){const u=P.useRef();P.useEffect(function(){if(a.pathOptions!==u.current){const m=a.pathOptions??{};s.instance.setStyle(m),u.current=m}},[s,a])}function eg(s){return function(u){const h=vc(),m=s(xc(u,h),h);return uf(m.current,u.eventHandlers),df(m.current,h),Jm(m.current,u),m}}function hf(s,a){const u=cf(s,a),h=eg(u);return Vm(h)}function tg(s,a){const u=cf(s,a),h=Xm(u);return Ym(h)}function ng(s,a,u){const{opacity:h,zIndex:m}=a;h!=null&&h!==u.opacity&&s.setOpacity(h),m!=null&&m!==u.zIndex&&s.setZIndex(m)}function oo(){return vc().map}const Xo=hf(function({center:a,children:u,...h},m){const y=new ea.CircleMarker(a,h);return wc(y,of(m,{overlayContainer:y}))},Wm);function cc(){return cc=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var u=arguments[a];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])}return s},cc.apply(this,arguments)}function ig({bounds:s,boundsOptions:a,center:u,children:h,className:m,id:y,placeholder:v,style:x,whenReady:w,zoom:S,...M},T){const[b]=P.useState({className:m,id:y,style:x}),[z,A]=P.useState(null);P.useImperativeHandle(T,()=>(z==null?void 0:z.map)??null,[z]);const O=P.useCallback(Q=>{if(Q!==null&&z===null){const $=new ea.Map(Q,M);u!=null&&S!=null?$.setView(u,S):s!=null&&$.fitBounds(s,a),w!=null&&$.whenReady(w),A($m($))}},[]);P.useEffect(()=>()=>{z==null||z.map.remove()},[z]);const W=z?ac.createElement(lf,{value:z},h):v??null;return ac.createElement("div",cc({},b,{ref:O}),W)}const kc=P.forwardRef(ig),rg=hf(function({positions:a,...u},h){const m=new ea.Polyline(a,u);return wc(m,of(h,{overlayContainer:m}))},function(a,u,h){u.positions!==h.positions&&a.setLatLngs(u.positions)}),Sc=tg(function({url:a,...u},h){const m=new ea.TileLayer(a,xc(u,h));return wc(m,h)},function(a,u,h){ng(a,u,h);const{url:m}=u;m!=null&&m!==h.url&&a.setUrl(m)});function bc(s,a){const u=a.x,h=s.y,m=Math.abs(a.x-s.x),y=Math.abs(a.y-s.y),v=m+y;return{corner:{x:u,y:h},horizontalDist:m,verticalDist:y,totalDist:v}}function ff(s,a,u){const{corner:h,horizontalDist:m,verticalDist:y,totalDist:v}=bc(s,a),x=u*v;if(x<=m){const w=m>0?x/m:0;return{x:s.x+(h.x-s.x)*w,y:s.y}}else{const w=x-m,S=y>0?w/y:0;return{x:h.x,y:h.y+(a.y-h.y)*S}}}function sg(s,a){const{corner:u}=bc(s,a);return`M ${s.x} ${s.y} L ${u.x} ${u.y} L ${a.x} ${a.y}`}function og(s,a,u){const h=ff(s,a,u),{corner:m,horizontalDist:y,totalDist:v}=bc(s,a);return u*v<=y?`M ${s.x} ${s.y} L ${h.x} ${h.y}`:`M ${s.x} ${s.y} L ${m.x} ${m.y} L ${h.x} ${h.y}`}function ag({startPos:s,endPos:a,progress:u,pathType:h="orthogonal",icon:m="",color:y="#fbbf24",glowColor:v="rgba(251, 191, 36, 0.5)",dashColor:x="rgba(251, 191, 36, 0.4)",size:w=22}){if(!s||!a)return null;const S=h==="orthogonal"?ff(s,a,u):s,M=h==="orthogonal"?sg(s,a):`M ${s.x} ${s.y} L ${a.x} ${a.y}`,T=h==="orthogonal"?og(s,a,u):`M ${s.x} ${s.y} L ${S.x} ${S.y}`;return f.jsxs("g",{className:"path-animation",children:[f.jsx("path",{d:M,fill:"none",stroke:x,strokeWidth:"4",strokeDasharray:"8 8"}),f.jsx("path",{d:T,fill:"none",stroke:v,strokeWidth:"12",strokeLinecap:"round",filter:"blur(4px)"}),f.jsx("path",{d:T,fill:"none",stroke:y,strokeWidth:"6",strokeLinecap:"round",opacity:"1"}),f.jsxs("g",{transform:`translate(${S.x}, ${S.y})`,children:[f.jsx("circle",{r:"30",fill:y,opacity:"0.3",className:"animate-pulse"}),f.jsx("circle",{r:w,fill:"#1f2937",stroke:y,strokeWidth:"3"}),f.jsx("text",{textAnchor:"middle",dominantBaseline:"central",fontSize:"28",className:"pointer-events-none",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.8))",children:m})]})]})}function lg({spots:s,hotel:a,rogueLocation:u,investigatedSpots:h}){const m=oo(),[y,v]=P.useState([]);P.useEffect(()=>{const w=()=>{const S=[];if(a!=null&&a.lat&&(a!=null&&a.lon)){const M=m.latLngToContainerPoint([a.lat,a.lon]);S.push({id:"hotel",name:a.name,x:M.x,y:M.y,color:"#22c55e"})}if(s.forEach(M=>{const T=M.spot;if(T.lat&&T.lon){const b=h.includes(T.id),z=m.latLngToContainerPoint([T.lat,T.lon]);S.push({id:T.id,name:T.name,x:z.x,y:z.y,color:b?"#9ca3af":"#3b82f6"})}}),u!=null&&u.lat&&(u!=null&&u.lon)){const M=m.latLngToContainerPoint([u.lat,u.lon]);S.push({id:"rogue",name:u.name,x:M.x,y:M.y,color:"#f97316"})}v(S)};return w(),m.on("move",w),m.on("zoom",w),()=>{m.off("move",w),m.off("zoom",w)}},[s,a,u,h,m]);const x=m.getSize();return f.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},viewBox:`0 0 ${x.x} ${x.y}`,children:y.map(w=>f.jsx("text",{x:w.x,y:w.y-12,textAnchor:"middle",fill:w.color,fontSize:"20",fontWeight:"bold",fontFamily:"monospace",children:w.name.toUpperCase()},w.id))})}function ug({playerPos:s,destination:a}){const u=oo();return P.useEffect(()=>{if(a&&s){const h=Qm.latLngBounds([[s.lat,s.lon],[a.lat,a.lon]]);u.fitBounds(h,{padding:[80,80,220,80],maxZoom:16,animate:!0,duration:.5})}},[a,s,u]),null}function cg({startPos:s,endPos:a,progress:u,pathType:h,icon:m,color:y,glowColor:v,dashColor:x,size:w}){const S=oo(),[M,T]=P.useState({start:null,end:null});if(P.useEffect(()=>{if(s&&a){const z=S.latLngToContainerPoint([s.lat,s.lon]),A=S.latLngToContainerPoint([a.lat,a.lon]);T({start:z,end:A})}},[s,a,S]),!M.start||!M.end)return null;const b=S.getSize();return f.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},viewBox:`0 0 ${b.x} ${b.y}`,children:f.jsx(ag,{startPos:M.start,endPos:M.end,progress:u,pathType:h,icon:m,color:y,glowColor:v,dashColor:x,size:w})})}function dg({currentCity:s,spots:a,investigatedSpots:u=[],onSpotClick:h,hoveredSpotId:m,onSpotHover:y,investigatingSpotIndex:v=null,hotel:x=null,rogueLocation:w=null,lastInvestigatedSpotId:S=null,onRogueClick:M=null,rogueUsed:T=!1,isInvestigatingRogue:b=!1,isAnimating:z=!1}){var Ue;const A=P.useRef(null),[O,W]=P.useState(0),[Q,$]=P.useState(null),ee=()=>{const Oe=[];return a.forEach(te=>{te.spot.lat&&te.spot.lon&&Oe.push([te.spot.lat,te.spot.lon])}),x!=null&&x.lat&&(x!=null&&x.lon)&&Oe.push([x.lat,x.lon]),w!=null&&w.lat&&(w!=null&&w.lon)&&Oe.push([w.lat,w.lon]),Oe.length===0?[[s.lat,s.lon]]:Oe};P.useEffect(()=>{var Oe;if(v!==null||b){if(W(0),b&&(w!=null&&w.lat)&&(w!=null&&w.lon))$({lat:w.lat,lon:w.lon});else if(v!==null){const _e=(Oe=a[v])==null?void 0:Oe.spot;_e!=null&&_e.lat&&(_e!=null&&_e.lon)&&$({lat:_e.lat,lon:_e.lon})}const te=Date.now(),J=1500,ve=()=>{const _e=Date.now()-te,we=Math.min(_e/J,1);W(we),we<1&&requestAnimationFrame(ve)};requestAnimationFrame(ve)}else W(0)},[v,b,a,w]);const ue=v!==null?(Ue=a[v])==null?void 0:Ue.spot:b?w:null,Pe=()=>{var Oe;if(S){const te=(Oe=a.find(J=>J.spot.id===S))==null?void 0:Oe.spot;if(te!=null&&te.lat&&(te!=null&&te.lon))return{lat:te.lat,lon:te.lon}}return x?{lat:x.lat,lon:x.lon}:null},oe=()=>{var Oe;if(b&&(w!=null&&w.lat)&&(w!=null&&w.lon))return{lat:w.lat,lon:w.lon};if(v!==null){const te=(Oe=a[v])==null?void 0:Oe.spot;if(te!=null&&te.lat&&(te!=null&&te.lon))return{lat:te.lat,lon:te.lon}}return Q},Te=Pe(),je=oe();return f.jsx("div",{style:{width:"100%",height:"100%"},children:f.jsxs(kc,{ref:A,bounds:ee(),style:{width:"100%",height:"100%"},zoomControl:!0,touchZoom:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,minZoom:12,maxZoom:18,boundsOptions:{padding:[80,80,220,80]},children:[f.jsx(Sc,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),(x==null?void 0:x.lat)&&(x==null?void 0:x.lon)&&f.jsx(Xo,{center:[x.lat,x.lon],radius:6,pathOptions:{fillColor:"#22c55e",fillOpacity:.9,color:"white",weight:2}}),a==null?void 0:a.map((Oe,te)=>{const J=Oe.spot,ve=u.includes(J.id);return!J.lat||!J.lon?null:f.jsx(Xo,{center:[J.lat,J.lon],radius:6,pathOptions:{fillColor:ve?"#9ca3af":"#3b82f6",fillOpacity:.9,color:"white",weight:2},eventHandlers:{click:()=>!ve&&(h==null?void 0:h(te)),mouseover:()=>y==null?void 0:y(J.id),mouseout:()=>y==null?void 0:y(null)}},J.id)}),(w==null?void 0:w.lat)&&(w==null?void 0:w.lon)&&f.jsx(Xo,{center:[w.lat,w.lon],radius:6,pathOptions:{fillColor:T?"#9ca3af":"#f97316",fillOpacity:.9,color:"white",weight:2},eventHandlers:{click:M&&!T?M:void 0}}),x&&ue&&ue.lat&&ue.lon&&f.jsx(ug,{playerPos:{lat:x.lat,lon:x.lon},destination:{lat:ue.lat,lon:ue.lon}}),f.jsx(lg,{spots:a,hotel:x,rogueLocation:w,investigatedSpots:u}),(v!==null||b||z)&&Te&&je&&f.jsx(cg,{startPos:Te,endPos:je,progress:v!==null||b?O:1,pathType:"orthogonal",icon:"",color:b?"#f97316":"#fbbf24",glowColor:b?"rgba(249, 115, 22, 0.5)":"rgba(251, 191, 36, 0.5)",dashColor:b?"rgba(249, 115, 22, 0.4)":"rgba(251, 191, 36, 0.4)",size:22})]})})}function dc({icon:s,title:a,subtitle:u,duration:h,transfers:m=0,disabled:y=!1,selected:v=!1,onClick:x,variant:w="travel"}){return f.jsxs("button",{onClick:x,disabled:y,className:`
        flex flex-col items-center gap-2 p-4 rounded-lg
        transition-all duration-200
        ${y?"bg-gray-800/50 opacity-50 cursor-not-allowed grayscale":v?"bg-gray-800/90 border-2 border-green-500 shadow-lg shadow-green-500/20":"bg-gray-800/90 border-2 border-gray-700 hover:border-yellow-500 hover:scale-105 hover:shadow-lg hover:shadow-yellow-500/20 cursor-pointer"}
        backdrop-blur-sm
        min-w-[180px] w-[180px]
      `,children:[f.jsx("div",{className:"text-5xl leading-none",children:s}),f.jsx("div",{className:"text-yellow-100 font-bold text-center text-sm leading-tight",children:a}),f.jsx("div",{className:"text-gray-400 text-xs text-center leading-tight",children:u}),f.jsxs("div",{className:"flex items-center gap-1 text-yellow-200/70 text-xs",children:[f.jsx(xl,{size:12}),f.jsxs("span",{children:[h,"h",m>0&&f.jsxs(f.Fragment,{children:["  ",m," ",m===1?"stop":"stops"]})]})]})]})}function pf({children:s,orientation:a="horizontal",className:u=""}){const h="flex gap-3 scroll-smooth",m=a==="horizontal"?"flex-row overflow-x-auto pb-2 snap-x snap-mandatory":"flex-col overflow-y-auto pr-2 snap-y snap-mandatory";return f.jsx("div",{className:`${h} ${m} 
    scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800/50
    hover:scrollbar-thumb-yellow-500
   ${u}`,style:{scrollSnapType:a==="horizontal"?"x mandatory":"y mandatory"},children:s})}function hg({isFinalCity:s,wrongCity:a,cityClues:u,investigatedLocations:h,timeRemaining:m,nextInvestigationCost:y,collectedClues:v,lastFoundClue:x,lastRogueAction:w,activeRogueAction:S,onResolveRogueAction:M,rogueUsedInCity:T,currentGoodDeed:b,karma:z,onInvestigate:A,cityRogueAction:O,onRogueAction:W,notoriety:Q,currentEncounter:$,availableGadgets:ee,onEncounterResolve:ue,isApprehended:Pe,selectedWarrant:oe,onProceedToTrial:Te,encounterTimers:je,isInvestigating:Ue,cityFact:Oe,actionPhase:te,actionLabel:J,actionHoursRemaining:ve,currentCity:_e,hotel:we,rogueLocation:xe,witnessPhrases:Le}){const[F,fe]=P.useState(null),[G,j]=P.useState(null),[U,ce]=P.useState(!1),se=h.length>1?h[h.length-2]:null,ie=Be=>{j(Be),A(Be)};P.useEffect(()=>{if(G!==null){const Be=setTimeout(()=>{j(null)},1500);return()=>clearTimeout(Be)}},[G]),P.useEffect(()=>{if(U){const Be=setTimeout(()=>{ce(!1)},1500);return()=>clearTimeout(Be)}},[U]);const ne=()=>{ke&&W&&(ce(!0),W(ke))};if(!u)return null;const Ee=2,ke=O,Re=$||b,Qe=($==null?void 0:$.type)||(b?"good_deed":null),Ve=()=>($==null?void 0:$.type)==="assassination"?$.timer_duration||5:($==null?void 0:$.type)==="henchman"?(je==null?void 0:je.henchman_duration)||10:b?(je==null?void 0:je.good_deed_duration)||8:10,ut=te==="ticking"||te==="pending",Nt=P.useMemo(()=>{if(!w)return"";const Be=(x==null?void 0:x.city)||"",bt=(x==null?void 0:x.suspect)||"";let Ye="";if(Be&&bt){const Rt=/[.!?]$/.test(Be)?"":".";Ye=`${Be}${Rt} ${bt}`}else Ye=Be||bt||"";if(Ye&&Le&&Le.length>0){const Rt=sr(Le),Lt=!/[.!?]$/.test(Ye);return`${Ye}${Lt?".":""} ${Rt}`}return Ye},[w,x,Le]);P.useMemo(()=>{if(!w)return"";const Be=w.description||"",bt=w.success_text||"";if(Be&&bt){const Ye=/[.!?]$/.test(Be)?"":".";return`${Be}${Ye} ${bt}`}return Be||bt||w.name||""},[w]);const wt=P.useMemo(()=>{if(w)return"";const Be=(x==null?void 0:x.city)||(x==null?void 0:x.suspect);return Be?String(Be).trim():""},[w,x]);return f.jsxs("div",{className:"relative h-[600px]",children:[f.jsx("div",{className:"absolute inset-0 z-0",children:f.jsx(dg,{currentCity:_e,spots:u,investigatedSpots:h,onSpotClick:ie,hoveredSpotId:F,onSpotHover:fe,investigatingSpotIndex:G,hotel:we,rogueLocation:xe,lastInvestigatedSpotId:se,onRogueClick:ke&&W?ne:null,rogueUsed:T,isInvestigatingRogue:U,isAnimating:ut})}),f.jsxs("div",{className:"absolute top-4 left-4 right-4 z-20 space-y-2",children:[Pe&&f.jsx(fl,{type:"witness",headerTitle:"SUSPECT APPREHENDED!",headerIcon:f.jsx("span",{className:"text-2xl",children:""}),personEmoji:"",quote:`${oe==null?void 0:oe.name} is now in custody. Time to face the court and see if you got the right person...`,showQuotes:!1,onContinue:Te}),!ut&&!Pe&&Re&&Qe&&f.jsx(Fm,{type:Qe,encounter:Re,timerDuration:Ve(),availableGadgets:ee,karma:z,timeRemaining:m,onResolve:ue}),!ut&&!Pe&&!Re&&S&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"bg-gray-900/95 backdrop-blur-sm rounded-lg p-4 border-l-4 border-yellow-500",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("h3",{className:"text-lg font-bold text-purple-400",children:"UNORTHODOX METHODS"})]})}),f.jsx("div",{className:"bg-gray-900/95 backdrop-blur-sm rounded-lg p-4 border-l-4 border-yellow-500",children:f.jsxs("p",{className:"text-yellow-100 text-lg leading-relaxed",children:[S.action.description," ",S.action.success_text]})}),f.jsx("div",{className:"px-2",children:f.jsx("button",{onClick:M,className:"w-full font-bold py-3 rounded transition-colors bg-gray-700 hover:bg-gray-600 text-white",children:"CONTINUE"})})]}),!ut&&!Pe&&!Re&&!S&&((x==null?void 0:x.city)||(x==null?void 0:x.suspect)||w)&&f.jsxs(f.Fragment,{children:[w&&f.jsxs("div",{className:"space-y-2",children:[f.jsx(fl,{type:"witness",quote:Nt,showQuotes:!1}),f.jsx("div",{className:"bg-red-900/50 border-l-4 border-red-500 p-3 rounded-lg",children:f.jsxs("p",{className:"text-red-400 text-sm flex items-center gap-2",children:[f.jsx(to,{size:14}),"Word spreads about your methods."]})})]}),((x==null?void 0:x.city)||(x==null?void 0:x.suspect))&&!w&&f.jsx(fl,{type:"witness",quote:wt})]})]}),a&&f.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-800/95 backdrop-blur-sm px-6 py-3 rounded-lg text-center shadow-lg z-20",children:f.jsx("p",{className:"text-yellow-200",children:"The trail seems cold here... but you can still ask around."})}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-48 p-4 bg-gray-900/90 backdrop-blur-sm z-30",children:f.jsxs(pf,{orientation:"horizontal",children:[u.map((Be,bt)=>{const Ye=h.includes(Be.spot.id),Rt=te&&te!=="idle";return f.jsx("div",{className:"snap-start",children:f.jsx(dc,{icon:Be.spot.icon||"",title:Be.spot.name,subtitle:Be.spot.neighborhood||(_e==null?void 0:_e.name),duration:y,transfers:0,disabled:Ye||m<y||Ue||Rt,selected:F===Be.spot.id,onClick:()=>!Ye&&ie(bt),variant:"investigation"})},Be.spot.id)}),ke&&W&&xe&&f.jsx("div",{className:"snap-start",children:f.jsx(dc,{icon:xe.icon||"",title:xe.name||ke.name,subtitle:xe.neighborhood||"Rogue Tactic",duration:xe.time_cost||Ee,transfers:0,disabled:T||m<(xe.time_cost||Ee)||Ue||te&&te!=="idle",selected:!1,onClick:ne,variant:"investigation"})},"rogue-action")]})})]})}function fg(s){const[a,u]=P.useState(!1);return P.useEffect(()=>{const h=window.matchMedia(s);u(h.matches);const m=y=>u(y.matches);return h.addEventListener?(h.addEventListener("change",m),()=>h.removeEventListener("change",m)):(h.addListener(m),()=>h.removeListener(m))},[s]),a}function pg(){return fg("(min-width: 768px)")}function mg({from:s,to:a,isHovered:u,color:h}){oo();const m=P.useMemo(()=>{const y=(s[0]+a[0])/2,v=(s[1]+a[1])/2,x=a[0]-s[0],w=a[1]-s[1],S=Math.sqrt(x*x+w*w),M=S*.15,T=-w/S*M,b=x/S*M,z=y+T,A=v+b,O=[];for(let W=0;W<=1;W+=.05){const Q=W*W,$=1-W,ee=$*$,ue=ee*s[0]+2*$*W*z+Q*a[0],Pe=ee*s[1]+2*$*W*A+Q*a[1];O.push([ue,Pe])}return O},[s,a]);return f.jsx(rg,{positions:m,pathOptions:{color:h||(u?"rgba(100, 150, 255, 0.5)":"rgba(100, 150, 255, 0.15)"),weight:u?2:1.5,opacity:1,dashArray:u?void 0:"4, 4"}})}function gg({cities:s,currentCity:a}){const u=oo(),[h,m]=P.useState([]);P.useEffect(()=>{const v=()=>{const x=s.map(w=>{const S=u.latLngToContainerPoint([w.lat,w.lon]);return{...w,x:S.x,y:S.y}});if(a){const w=u.latLngToContainerPoint([a.lat,a.lon]);x.push({...a,x:w.x,y:w.y,isCurrent:!0})}m(x)};return v(),u.on("move",v),u.on("zoom",v),()=>{u.off("move",v),u.off("zoom",v)}},[s,a,u]);const y=u.getSize();return f.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},viewBox:`0 0 ${y.x} ${y.y}`,children:h.map((v,x)=>f.jsx("text",{x:v.x,y:v.y-12,textAnchor:"middle",fill:v.isCurrent?"#22c55e":"#3b82f6",fontSize:"20",fontWeight:"bold",fontFamily:"monospace",children:v.name.toUpperCase()},v.cityId||v.id||x))})}function yg({destinations:s,timeRemaining:a,travelTime:u,onTravel:h,currentCity:m}){const[y,v]=P.useState(null);pg();const x=a>=u,w=P.useMemo(()=>{if(!m||s.length===0)return[[-60,-180],[75,180]];const S=[m,...s],M=S.map(b=>b.lat),T=S.map(b=>b.lon);return[[Math.min(...M),Math.min(...T)],[Math.max(...M),Math.max(...T)]]},[m,s]);return f.jsxs("div",{className:"relative h-[600px]",children:[f.jsx("div",{className:"absolute inset-0 z-0",children:f.jsxs(kc,{bounds:w,style:{width:"100%",height:"100%"},zoomControl:!0,minZoom:2,maxZoom:6,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,touchZoom:!0,scrollWheelZoom:!0,dragging:!0,doubleClickZoom:!1,boundsOptions:{padding:[60,60]},children:[f.jsx(Sc,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>  <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19}),m&&s.map(S=>f.jsx(mg,{from:[m.lat,m.lon],to:[S.lat,S.lon],isHovered:y===S.cityId},`path-${S.cityId}`)),s.map(S=>f.jsx(Xo,{center:[S.lat,S.lon],radius:6,pathOptions:{fillColor:"#3b82f6",fillOpacity:.9,color:"white",weight:2},eventHandlers:{click:()=>x&&h(S),mouseover:()=>v(S.cityId),mouseout:()=>v(null)}},S.cityId)),m&&f.jsx(Xo,{center:[m.lat,m.lon],radius:6,pathOptions:{fillColor:"#22c55e",fillOpacity:.9,color:"white",weight:2}}),f.jsx(gg,{cities:s,currentCity:m})]})}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-48 p-4 bg-gray-900/90 backdrop-blur-sm z-30",children:f.jsx(pf,{orientation:"horizontal",children:s.map(S=>f.jsx("div",{className:"snap-start",onMouseEnter:()=>v(S.cityId),onMouseLeave:()=>v(null),children:f.jsx(dc,{icon:S.icon||"",title:S.name,subtitle:S.country,duration:u,transfers:0,disabled:!x,selected:y===S.cityId,onClick:()=>x&&h(S),variant:"travel"})},S.cityId))})})]})}function mf(){return f.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-red-500 rounded-full shadow-lg border-2 border-white/50 z-10",children:f.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-white/30 rounded-full"})})}function _g(s,a){return s==="female"?a==="light"?"":"":a==="light"?"":""}function vg(s){return s==="intellectual"?"":""}function xg(s){if(s==null)return"";const a=s%12||12,u=s>=12?"PM":"AM";return`${a}:00 ${u}`}function Qu({label:s,value:a,onCycle:u}){const h=a||"",m=a!==null;return f.jsxs("button",{onClick:u,className:`flex items-center justify-between w-full py-2 px-3 rounded transition-all active:scale-[0.98] ${m?"bg-green-200/80 hover:bg-green-300/80":"bg-amber-100/80 hover:bg-amber-200/80"}`,children:[f.jsxs("span",{className:"text-amber-900 font-medium text-sm",children:[s,":"]}),f.jsx("span",{className:`font-bold text-sm ${m?"text-green-800":"text-gray-500"}`,children:h})]})}function Ah({clue:s}){const a=typeof s=="string"?s:s.text,u=typeof s=="object"?s.cityName:null,h=typeof s=="object"?s.locationName:null,m=typeof s=="object"?s.timeCollected:null,y=u||h||m!==null;return f.jsxs("div",{className:"bg-white/60 rounded p-2 shadow-sm border-l-2 border-amber-400",children:[f.jsxs("p",{className:"text-gray-800 text-sm italic",children:['"',a,'"']}),y&&f.jsxs("p",{className:"text-right text-xs text-gray-500 mt-1",children:[" ",u,h?`, ${h}`:"",m!==null&&f.jsxs("span",{className:"ml-2 inline-flex items-center gap-0.5",children:[f.jsx(xl,{size:10}),xg(m)]})]})]})}function wg({suspect:s,eliminated:a,isSelected:u,onSelect:h,rotation:m,gridIndex:y,totalColumns:v=4}){const x=y%v,S=((v-1)/2-x)*80,T=-(Math.floor(y/v)*100+120),b=u?`translateX(${S}px) translateY(${T}px) scale(1.1) rotate(-3deg)`:"",z=`rotate(${m}deg)`;return f.jsxs("div",{className:`relative transition-all duration-500 ease-out ${u?"z-20":""}`,style:{transform:u?b:z},children:[f.jsx(mf,{}),f.jsxs("button",{onClick:()=>!a&&h(s),disabled:a,className:`w-full bg-amber-50 p-2 pt-3 shadow-lg transition-all min-h-[100px] ${a?"opacity-50 grayscale cursor-not-allowed":"hover:scale-105 hover:shadow-xl"} ${u?"ring-4 ring-yellow-400 scale-105":""}`,style:{boxShadow:a?"1px 1px 4px rgba(0,0,0,0.2)":"3px 3px 10px rgba(0,0,0,0.3)"},children:[f.jsxs("div",{className:`aspect-square mb-2 flex flex-col items-center justify-center ${a?"bg-gray-300":"bg-gradient-to-br from-gray-700 to-gray-900"}`,children:[f.jsx("span",{className:"text-3xl",children:_g(s.gender,s.hair)}),f.jsx("span",{className:"text-lg -mt-1",children:vg(s.hobby)})]}),f.jsx("div",{className:"text-center",children:f.jsx("div",{className:"font-bold text-gray-800 text-sm truncate",children:s.name})})]})]})}function Xu({children:s,color:a="yellow",rotation:u=0}){const h={yellow:"bg-yellow-100",blue:"bg-blue-100",pink:"bg-pink-100",green:"bg-green-100"};return f.jsxs("div",{className:`relative ${h[a]} p-3 shadow-md`,style:{transform:`rotate(${u}deg)`},children:[f.jsx(mf,{color:"red"}),f.jsx("div",{className:"text-gray-800 text-sm pt-2",children:s})]})}function kg({collectedClues:s,suspects:a,selectedWarrant:u,isFinalCity:h,onSelectWarrant:m,onIssueWarrant:y,selectedTraits:v,onCycleTrait:x,onResetTraits:w,currentCity:S}){const[M,T]=P.useState("suspect"),b=P.useMemo(()=>S?s.city.filter($=>$.cityName===S.name):[],[s.city,S]),z=P.useMemo(()=>a.reduce(($,ee,ue)=>($[ee.id]=(ue%2===0?1:-1)*(2+ue%3),$),{}),[a]),A=P.useMemo(()=>a.filter($=>!!(v.gender&&$.gender!==v.gender||v.hair&&$.hair!==v.hair||v.hobby&&$.hobby!==v.hobby)).map($=>$.id),[a,v]),O=$=>A.includes($),W=a.filter($=>!O($.id)).length,Q=v.gender||v.hair||v.hobby;return f.jsxs("div",{className:"space-y-4 p-4 rounded-lg",style:{background:"linear-gradient(135deg, #b8956c 0%, #a0845c 50%, #c4a574 100%)",backgroundImage:`
          linear-gradient(135deg, #b8956c 0%, #a0845c 50%, #c4a574 100%),
          url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")
        `,boxShadow:"inset 0 0 50px rgba(0,0,0,0.3)"},children:[f.jsx("div",{className:"text-center mb-4",children:f.jsx("h2",{className:"text-2xl font-bold text-amber-900 drop-shadow-sm",style:{fontFamily:"serif"},children:"EVIDENCE BOARD"})}),f.jsxs("div",{className:"flex gap-2 mb-4",children:[f.jsxs("button",{onClick:()=>T("suspect"),className:`flex-1 py-2 px-4 font-bold rounded transition-all ${M==="suspect"?"bg-amber-600 text-white shadow-lg":"bg-amber-200/50 text-amber-900 hover:bg-amber-300/50"}`,children:[f.jsx(Lh,{size:16,className:"inline mr-2"}),"Suspect"]}),f.jsxs("button",{onClick:()=>T("location"),className:`flex-1 py-2 px-4 font-bold rounded transition-all ${M==="location"?"bg-amber-600 text-white shadow-lg":"bg-amber-200/50 text-amber-900 hover:bg-amber-300/50"}`,children:[f.jsx(ml,{size:16,className:"inline mr-2"}),"Location"]})]}),M==="suspect"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"relative",children:f.jsxs(Xu,{color:"yellow",rotation:-1,children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-amber-300 pb-1",children:[f.jsx(Lh,{size:16,className:"text-amber-700"}),f.jsx("span",{className:"font-bold text-amber-900",children:"Suspect Profile"})]}),s.suspect.length>0&&f.jsxs("div",{className:"mb-4 space-y-2",children:[f.jsx("p",{className:"text-xs font-medium text-amber-800 mb-2",children:"Intel gathered:"}),s.suspect.map(($,ee)=>f.jsx(Ah,{clue:$},ee))]}),s.suspect.length===0&&f.jsx("p",{className:"text-gray-500 italic text-xs text-center mb-4",children:"No intel gathered yet..."}),f.jsxs("div",{className:"space-y-2 border-t border-amber-300 pt-3",children:[f.jsx(Qu,{label:"Gender",value:v.gender,onCycle:()=>x("gender")}),f.jsx(Qu,{label:"Hair",value:v.hair,onCycle:()=>x("hair")}),f.jsx(Qu,{label:"Hobby",value:v.hobby,onCycle:()=>x("hobby")})]}),f.jsxs("div",{className:"flex items-center justify-between mt-3",children:[f.jsx("p",{className:"text-xs text-amber-700 italic",children:"Tap fields to cycle values"}),Q&&f.jsx("button",{onClick:w,className:"text-xs text-amber-700 hover:text-amber-900 underline",children:"Reset"})]})]})}),f.jsx("div",{className:"relative",children:f.jsxs(Xu,{color:"green",rotation:1,children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-green-300 pb-1",children:[f.jsxs("span",{className:"font-bold text-green-900",children:[W," suspect",W!==1?"s":""," match"]}),f.jsxs("button",{onClick:y,disabled:!u,className:`font-bold px-3 py-1 rounded transition-all text-xs flex items-center gap-1 ${u?"bg-red-600 hover:bg-red-500 text-white shadow-md":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[f.jsx(_c,{size:12}),"Issue Warrant"]})]}),f.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4 py-2",children:a.map(($,ee)=>{const ue=O($.id),Pe=(u==null?void 0:u.id)===$.id;return f.jsx(wg,{suspect:$,eliminated:ue,isSelected:Pe,onSelect:m,rotation:z[$.id],gridIndex:ee},$.id)})})]})})]}),M==="location"&&f.jsx("div",{className:"relative",children:f.jsxs(Xu,{color:"blue",rotation:2,children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2 border-b border-blue-300 pb-1",children:[f.jsx(ml,{size:16,className:"text-blue-700"}),f.jsx("span",{className:"font-bold text-blue-900",children:"Next Destination Intel"})]}),b.length>0?f.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.map(($,ee)=>f.jsx(Ah,{clue:$},ee))}):f.jsx("p",{className:"text-gray-500 italic text-sm text-center py-4",children:"No location intel gathered in this city yet..."})]})})]})}function Sg({origin:s,destination:a,progress:u,vehicleType:h}){const m=oo(),[y,v]=P.useState(null),x=h==="plane";if(P.useEffect(()=>{if(s&&a){const ee=m.latLngToContainerPoint([s.lat,s.lon]),ue=m.latLngToContainerPoint([a.lat,a.lon]),Pe=(ee.x+ue.x)/2,oe=(ee.y+ue.y)/2,Te=ue.x-ee.x,je=ue.y-ee.y,Ue=Math.sqrt(Te*Te+je*je),Oe=Ue*.2,te=-je/Ue*Oe,J=Te/Ue*Oe,ve={x:Pe+te,y:oe+J};v({fromPoint:ee,toPoint:ue,controlPoint:ve})}},[s,a,m]),!y)return null;const{fromPoint:w,toPoint:S,controlPoint:M}=y,T=m.getSize(),b=om(w,M,S,u),z=am(w,M,S,u),A=lm(w,M,S),O=um(w,M,S),W=O*(1-u),$=Math.sqrt(Math.pow(S.x-w.x,2)+Math.pow(S.y-w.y,2))<100;return f.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},viewBox:`0 0 ${T.x} ${T.y}`,children:[f.jsxs("defs",{children:[f.jsxs("filter",{id:"travelGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[f.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),f.jsxs("feMerge",{children:[f.jsx("feMergeNode",{in:"coloredBlur"}),f.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),f.jsxs("linearGradient",{id:"travelFlightGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#22c55e"}),f.jsx("stop",{offset:"100%",stopColor:"#fbbf24"})]}),f.jsxs("radialGradient",{id:"travelOriginPulse",children:[f.jsx("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:"0.8"}),f.jsx("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:"0"})]})]}),f.jsx("path",{d:A,fill:"none",stroke:"rgba(100, 180, 255, 0.3)",strokeWidth:"2",strokeDasharray:"8 8"}),f.jsx("path",{d:A,fill:"none",stroke:"url(#travelFlightGradient)",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:O,strokeDashoffset:W}),f.jsx("circle",{cx:w.x,cy:w.y,r:"16",fill:"url(#travelOriginPulse)",opacity:.5}),f.jsx("circle",{cx:w.x,cy:w.y,r:"8",fill:"#22c55e",opacity:"0.9"}),f.jsx("circle",{cx:w.x,cy:w.y,r:"3",fill:"white"}),f.jsx("circle",{cx:S.x,cy:S.y,r:"10",fill:"#f97316",opacity:"0.3"}),f.jsx("circle",{cx:S.x,cy:S.y,r:"8",fill:"#f97316",opacity:"0.9"}),f.jsx("circle",{cx:S.x,cy:S.y,r:"3",fill:"white"}),f.jsx("text",{x:w.x,y:w.y-22,textAnchor:"middle",fill:"#22c55e",fontSize:"20",fontWeight:"bold",fontFamily:"monospace",children:s.name.toUpperCase()}),f.jsx("text",{x:S.x,y:S.y-22,textAnchor:"middle",fill:"#f97316",fontSize:"20",fontWeight:"bold",fontFamily:"monospace",children:a.name.toUpperCase()}),u<.99&&f.jsxs("g",{transform:`translate(${b.x}, ${b.y}) rotate(${z})`,filter:"url(#travelGlow)",children:[f.jsx("circle",{r:$?16:14,fill:"rgba(250, 204, 21, 0.2)"}),f.jsx("circle",{r:$?10:8,fill:"rgba(250, 204, 21, 0.5)"}),x?f.jsxs(f.Fragment,{children:[f.jsx("circle",{r:$?6:5,fill:"#facc15"}),f.jsx("polygon",{points:"0,-3 10,0 0,3 3,0",fill:"white",transform:`translate(${$?4:3}, 0)`})]}):f.jsxs(f.Fragment,{children:[f.jsx("rect",{x:"-6",y:"-3",width:"12",height:"6",rx:"2",fill:"#facc15"}),f.jsx("polygon",{points:"4,-2 7,-2 7,2 4,2",fill:"white"})]})]})]})}function bg({travelData:s,progress:a,vehicleType:u="plane",backgroundImage:h=null}){if(!s)return null;const{origin:m,destination:y,distance:v}=s,x=u==="plane",w=x?nf:gm,S=P.useMemo(()=>[[Math.min(m.lat,y.lat),Math.min(m.lon,y.lon)],[Math.max(m.lat,y.lat),Math.max(m.lon,y.lon)]],[m,y]);return f.jsxs("div",{className:"w-full h-[600px] flex flex-col gap-3",children:[f.jsxs("div",{className:"text-center flex-shrink-0",children:[f.jsx("div",{className:"text-blue-300 text-xs font-mono uppercase tracking-wider mb-1",children:x?"In Flight":"En Route"}),f.jsxs("div",{className:"flex items-center justify-center gap-3 text-white",children:[f.jsx("span",{className:"text-base font-bold",children:m.name}),f.jsx(w,{className:"text-yellow-400 animate-pulse",size:18}),f.jsx("span",{className:"text-base font-bold",children:y.name})]})]}),f.jsx("div",{className:"flex-1 relative",children:f.jsxs(kc,{bounds:S,style:{width:"100%",height:"100%"},zoomControl:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,keyboard:!1,attributionControl:!1,boundsOptions:{padding:[80,80]},children:[f.jsx(Sc,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd"}),f.jsx(Sg,{origin:m,destination:y,progress:a,vehicleType:u})]})}),f.jsxs("div",{className:"w-full px-4 flex-shrink-0",children:[f.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[f.jsx("span",{className:"text-green-400",children:m.name}),f.jsxs("span",{className:"font-mono text-yellow-400",children:[v.toLocaleString()," km"]}),f.jsx("span",{className:"text-orange-400",children:y.name})]}),f.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-yellow-500 rounded-full transition-all duration-75",style:{width:`${a*100}%`}})}),f.jsxs("div",{className:"text-center text-gray-500 text-xs mt-1 font-mono",children:[Math.round(a*100),"%"]})]})]})}function Cc({children:s,topPanel:a,bottomPanel:u,className:h=""}){return f.jsxs("div",{className:"h-screen bg-gradient-to-b from-red-900 to-red-950 flex flex-col overflow-hidden",children:[a&&f.jsx("div",{className:"flex-shrink-0 bg-black bg-opacity-40 border-b-2 border-yellow-500 px-4 py-3",children:a}),f.jsx("div",{className:`flex-1 overflow-y-auto p-4 grid ${h}`,style:{gridTemplateRows:"1fr",alignItems:"end"},children:s}),u&&f.jsx("div",{className:"flex-shrink-0 bg-black bg-opacity-40 border-t-2 border-yellow-500 p-4",children:u})]})}function Cg(s,a,u){const[h,m]=P.useState(!1),[y,v]=P.useState(0),[x,w]=P.useState(0);return P.useEffect(()=>{if(!s||!a||!u)return;const S=[];u.traveling&&S.push(u.traveling),s.cities.forEach(b=>{const z=a[b];z!=null&&z.background_image&&S.push(z.background_image)}),w(S.length),m(!0);let M=0;const T=S.map(b=>{const z=new Image;return z.onload=()=>{M++,v(M),M===S.length&&m(!1)},z.onerror=()=>{M++,v(M),M===S.length&&m(!1)},z.src=b,z});return()=>{T.forEach(b=>{b.onload=null,b.onerror=null})}},[s,a,u]),{isLoading:h,loadedCount:y,totalCount:x}}function Tg(){return f.jsx("div",{className:"absolute -top-2 -right-2 transform rotate-12 z-10",style:{filter:"drop-shadow(2px 2px 2px rgba(0,0,0,0.3))"},children:f.jsx("div",{className:"bg-red-600 text-white px-4 py-1 font-bold text-sm border-2 border-red-800",style:{fontFamily:"monospace"},children:"CLASSIFIED"})})}function Eg(){return f.jsx("div",{className:"absolute -top-3 left-8 w-6 h-10 z-10",children:f.jsx("div",{className:"w-full h-full border-4 border-gray-400 rounded-full",style:{clipPath:"polygon(0 30%, 100% 30%, 100% 100%, 0 100%)",boxShadow:"2px 2px 4px rgba(0,0,0,0.3)"}})})}function Ju({icon:s,label:a,children:u}){return f.jsxs("div",{className:"mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(s,{size:16,className:"text-gray-600"}),f.jsx("span",{className:"text-xs font-bold text-gray-500 tracking-wider",children:a})]}),f.jsx("div",{className:"text-gray-800 pl-6",style:{fontFamily:"Georgia, serif"},children:u})]})}function Pg({caseNumber:s,children:a}){return f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsx("div",{className:"flex justify-start ml-8",children:f.jsxs("div",{className:"px-6 py-2 rounded-t-lg text-sm font-bold",style:{background:"linear-gradient(180deg, #d4a574 0%, #c4956a 100%)",fontFamily:"monospace"},children:["CASE #",s]})}),f.jsxs("div",{className:"relative rounded-lg rounded-tl-none p-6 shadow-xl",style:{background:"linear-gradient(135deg, #e8d5b7 0%, #d4c4a8 50%, #e0d0b5 100%)",boxShadow:"inset 0 2px 4px rgba(255,255,255,0.3), 0 8px 16px rgba(0,0,0,0.2)"},children:[f.jsx(Tg,{}),f.jsx(Eg,{}),a]})]})}function Ng({currentCase:s,startingCity:a,settings:u,onAccept:h,backgrounds:m,citiesById:y}){var W;const[v,x]=P.useState(1),[w,S]=P.useState(!1);if(Cg(s,y,m),!s)return null;const M=P.useMemo(()=>{var $;return 1e3+((($=s.stolenItem)==null?void 0:$.name)||"case").split("").reduce((ee,ue)=>ee+ue.charCodeAt(0),0)%9e3},[(W=s.stolenItem)==null?void 0:W.name]),T=P.useMemo(()=>{const Q=new Date,$=new Date(Q.getTime()+u.total_time*60*60*1e3),ue=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][$.getDay()],Pe=$.getHours(),oe=$.getMinutes().toString().padStart(2,"0"),Te=Pe>=12?"PM":"AM",je=Pe%12||12;return`${ue}, ${je}:${oe} ${Te}`},[u.total_time]),b=()=>{var Q;return f.jsxs("div",{className:"bg-white p-6 shadow-md relative",style:{backgroundImage:`
          repeating-linear-gradient(
            transparent,
            transparent 27px,
            #e0e0e0 28px
          )
        `,backgroundPosition:"0 20px"},children:[f.jsx("div",{className:"border-b-2 border-gray-300 pb-4 mb-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-red-700 p-2 rounded",children:f.jsx(_c,{size:24,className:"text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-800",style:{fontFamily:"Georgia, serif"},children:"INTERPOL CASE FILE"}),f.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["REF: ACME-",M,"-INT"]})]})]})}),f.jsxs(Ju,{icon:mm,label:"STOLEN ARTIFACT",children:[f.jsx("p",{className:"text-lg font-semibold",children:((Q=s.stolenItem)==null?void 0:Q.name)||"Unknown"}),f.jsx("p",{className:"text-sm text-gray-600 italic",children:"Value: Priceless"})]}),f.jsx(Ju,{icon:ml,label:"LAST KNOWN LOCATION",children:f.jsx("p",{className:"text-lg",children:a?`${a.name}, ${a.country}`:"Unknown"})}),f.jsxs(Ju,{icon:xl,label:"MISSION DEADLINE",children:[f.jsx("p",{className:"text-lg",children:T}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Time allocated: ",u.total_time," hours"]})]}),f.jsxs("div",{className:"bg-gray-100 p-4 rounded mt-4 border-l-4 border-red-600",children:[f.jsx("p",{className:"text-sm text-gray-700 italic leading-relaxed",children:`"The infamous Shadow Syndicate has struck again. Intelligence suggests they're moving the stolen goods through multiple cities. Track them down before time runs out."`}),f.jsx("p",{className:"text-xs text-gray-500 mt-2 text-right",children:" Chief Inspector"})]}),f.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-300 flex justify-between items-end",children:[f.jsxs("div",{children:[w?f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"text-2xl text-blue-900 px-2",style:{fontFamily:"Brush Script MT, Segoe Script, cursive",transform:"rotate(-2deg)"},children:"Detective Gumshoe"}),f.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[f.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Signed via DocuSign"})]})]}):f.jsxs("button",{onClick:()=>S(!0),className:"group relative cursor-pointer",children:[f.jsxs("div",{className:"w-40 h-10 bg-yellow-200 border-2 border-yellow-400 rounded flex items-center justify-center gap-2 transition-all group-hover:bg-yellow-300 group-hover:scale-105",children:[f.jsx("span",{className:"text-yellow-700 text-xs font-bold",children:"SIGN HERE"}),f.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),f.jsx("div",{className:"absolute -bottom-1 left-0 right-0 flex justify-center",children:f.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-yellow-400"})})]}),f.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Agent Signature"})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-xs text-gray-500",children:"Date Issued"}),f.jsx("p",{className:"text-sm font-mono text-gray-600",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]})},z=()=>f.jsxs("div",{className:"bg-white p-6 shadow-md relative",style:{backgroundImage:`
          repeating-linear-gradient(
            transparent,
            transparent 27px,
            #e0e0e0 28px
          )
        `,backgroundPosition:"0 20px"},children:[f.jsx("div",{className:"border-b-2 border-gray-300 pb-4 mb-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-blue-700 p-2 rounded",children:f.jsx(Cm,{size:24,className:"text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-800",style:{fontFamily:"Georgia, serif"},children:"ISSUED EQUIPMENT"}),f.jsx("p",{className:"text-xs text-gray-500 font-mono",children:"ACME STANDARD KIT v2.4"})]})]})}),f.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[{icon:"",name:"Smoke Bomb",desc:"Create cover for quick escapes"},{icon:"",name:"X-Ray Glasses",desc:"See through obstacles and deception"},{icon:"",name:"Shoe Phone",desc:"Call for backup in emergencies"},{icon:"",name:"Laser Watch",desc:"Precision cutting through barriers"},{icon:"",name:"Grappling Hook",desc:"Scale walls and cross gaps"},{icon:"",name:"Antidote Pills",desc:"Counter poison and toxins"}].map((Q,$)=>f.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"text-2xl",children:Q.icon}),f.jsx("span",{className:"text-gray-800 font-bold text-sm",children:Q.name})]}),f.jsx("p",{className:"text-gray-500 text-xs pl-8",children:Q.desc})]},$))}),f.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[f.jsx("span",{className:"text-red-500 text-lg",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-red-800 font-bold text-sm",children:"SINGLE-USE ONLY"}),f.jsx("p",{className:"text-red-600 text-xs",children:"Each gadget can only be deployed once per case. Choose wisely."})]})]}),f.jsx("div",{className:"mt-6 pt-4 border-t border-gray-300 text-center",children:f.jsx("p",{className:"text-green-700 font-medium",children:"Equipment check complete. Ready for deployment."})})]}),A=()=>v===1?f.jsxs("button",{onClick:()=>x(2),disabled:!w,className:`w-full font-bold py-4 px-6 rounded-lg text-lg transition-all shadow-lg flex items-center justify-center gap-2 ${w?"bg-blue-600 hover:bg-blue-500 text-white hover:shadow-xl active:scale-[0.98]":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:["PROCEED TO EQUIPMENT",f.jsx(ym,{size:20})]}):f.jsx("button",{onClick:h,className:"w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 px-6 rounded-lg text-lg transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:"ACCEPT MISSION"}),O={name:"HQ",country:""};return f.jsx(Cc,{topPanel:f.jsx(sf,{currentCity:O,timeRemaining:u.total_time,currentHour:8,maxTime:u.total_time,timeTickSpeed:u.time_tick_speed||.5}),bottomPanel:A(),children:f.jsx(Pg,{caseNumber:M,children:v===1?b():z()})})}function Lg({location:s,timeRemaining:a}){const u=a<=12,h=a<=6;return f.jsxs("div",{className:"flex justify-between items-center text-white",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{className:"font-bold",children:s||"Unknown"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsxs("span",{className:`font-bold ${h?"text-red-400 animate-pulse":u?"text-yellow-400":"text-white"}`,children:[a,"h"]})]})]})}function jg({children:s,className:a=""}){return f.jsx("div",{className:`rounded-lg shadow-xl ${a}`,style:{background:"linear-gradient(180deg, #5c4033 0%, #4a3728 50%, #3d2d1f 100%)",boxShadow:"inset 0 2px 4px rgba(255,255,255,0.1), inset 0 -2px 4px rgba(0,0,0,0.3), 0 8px 16px rgba(0,0,0,0.4)"},children:s})}function Oh({isGuilty:s}){return f.jsx("div",{className:`inline-block px-8 py-4 border-4 rounded transform -rotate-6 ${s?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,style:{fontFamily:"Impact, sans-serif",textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:f.jsx("div",{className:"text-4xl font-bold tracking-wider",children:s?"GUILTY":"NOT GUILTY"})})}function Ig({currentCase:s,selectedWarrant:a,timeRemaining:u,onContinue:h}){var S,M;const[m,y]=P.useState(!1),[v,x]=P.useState(5);if(P.useEffect(()=>{if(m)return;const T=setInterval(()=>{x(b=>b<=1?(clearInterval(T),y(!0),0):b-1)},1e3);return()=>clearInterval(T)},[m]),!s||!a)return null;const w=a.id===s.suspect.id;return f.jsx(Cc,{topPanel:f.jsx(Lg,{location:"Courthouse",timeRemaining:u}),bottomPanel:m?f.jsx("button",{onClick:h,className:`w-full font-bold py-4 px-6 rounded-lg text-lg transition-all shadow-lg hover:shadow-xl active:scale-[0.98] ${w?"bg-green-600 hover:bg-green-500 text-white":"bg-red-600 hover:bg-red-500 text-white"}`,children:"CONTINUE TO DEBRIEF"}):f.jsx("div",{className:"text-center text-yellow-200/70 py-4 italic",children:"The jury is deliberating..."}),children:f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs(jg,{className:"p-6 mb-4",children:[f.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[f.jsx(Ph,{size:32,className:"text-yellow-500"}),f.jsx("h1",{className:"text-2xl font-bold text-yellow-100",style:{fontFamily:"Georgia, serif"},children:"DISTRICT COURT"}),f.jsx(Ph,{size:32,className:"text-yellow-500"})]}),f.jsxs("div",{className:"text-center border-t border-amber-700 pt-4",children:[f.jsxs("p",{className:"text-amber-300 text-sm mb-1",children:["CASE NO. ",((M=(S=s.stolenItem)==null?void 0:S.name)==null?void 0:M.length)||42,"-CR-",new Date().getFullYear()]}),f.jsxs("p",{className:"text-xl text-amber-100",children:["The People vs. ",f.jsx("span",{className:"font-bold",children:a.name})]})]})]}),f.jsx("div",{className:"rounded-lg p-6 text-white",style:{background:"linear-gradient(180deg, #1a1a2e 0%, #16213e 100%)",boxShadow:"inset 0 0 30px rgba(0,0,0,0.5)"},children:m?w?f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"text-center py-4",children:f.jsx(Oh,{isGuilty:!0})}),f.jsxs("div",{className:"p-4 bg-green-900/40 rounded-lg border border-green-600",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 text-green-300",children:[f.jsx(_m,{size:20}),f.jsx("h2",{className:"font-bold",children:"Evidence Presented"})]}),f.jsxs("ul",{className:"space-y-2 text-green-200 text-sm",children:[f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-green-400",children:""})," Matching physical description confirmed"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-green-400",children:""})," Witnessed fleeing crime scenes"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-green-400",children:""})," Stolen goods recovered in possession"]})]})]}),f.jsx("div",{className:"text-center p-4 bg-green-600/20 rounded-lg border-2 border-green-500",children:f.jsxs("p",{className:"text-green-200",children:["The defendant has been ",f.jsx("span",{className:"font-bold text-green-300",children:"convicted"})," and sentenced to 25 years in federal prison."]})})]}):f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"text-center py-4",children:f.jsx(Oh,{isGuilty:!1})}),f.jsxs("div",{className:"p-4 bg-red-900/40 rounded-lg border border-red-600",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 text-red-300",children:[f.jsx(vm,{size:20}),f.jsx("h2",{className:"font-bold",children:"Defense Arguments"})]}),f.jsxs("ul",{className:"space-y-2 text-red-200 text-sm",children:[f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-red-400",children:""})," Alibi confirmed by multiple witnesses"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-red-400",children:""})," Physical description does not match"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-red-400",children:""})," No connection to the crime established"]})]})]}),f.jsxs("div",{className:"text-center p-4 bg-red-600/20 rounded-lg border-2 border-red-500",children:[f.jsxs("p",{className:"text-red-200 mb-3",children:["The defendant has been ",f.jsx("span",{className:"font-bold text-red-300",children:"acquitted"}),". Case dismissed with prejudice."]}),f.jsx("div",{className:"border-t border-red-500/50 pt-3 mt-3",children:f.jsxs("p",{className:"text-yellow-300 text-sm",children:["Intelligence reports the real culprit was:",f.jsx("span",{className:"font-bold ml-1",children:s.suspect.name})]})})]})]}):f.jsxs("div",{className:"text-center py-8",children:[f.jsx(xm,{size:48,className:"text-yellow-400 mx-auto mb-4 animate-bounce"}),f.jsx("p",{className:"text-2xl text-amber-100 mb-6 italic",style:{fontFamily:"Georgia, serif"},children:'"We, the jury, find the defendant..."'}),f.jsx("div",{className:"text-7xl font-bold text-yellow-400 mb-4",style:{fontFamily:"Georgia, serif",textShadow:"0 0 20px rgba(234, 179, 8, 0.5)"},children:v}),f.jsxs("div",{className:"flex justify-center gap-2 text-gray-400",children:[f.jsx("span",{className:"inline-block w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),f.jsx("span",{className:"inline-block w-2 h-2 bg-yellow-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),f.jsx("span",{className:"inline-block w-2 h-2 bg-yellow-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})]})})}function dl({label:s,value:a,icon:u,highlight:h}){return f.jsxs("div",{className:`flex items-center justify-between py-2 border-b border-gray-700/50 last:border-0 ${h?"bg-yellow-500/10 -mx-2 px-2 rounded":""}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[u&&f.jsx(u,{size:14,className:"text-gray-500"}),f.jsx("span",{children:s})]}),f.jsx("div",{className:"font-bold text-white",children:a})]})}function Rh({title:s,icon:a,children:u,color:h="gray"}){const m={gray:"border-gray-600 bg-gray-800/50",green:"border-green-600 bg-green-900/30",red:"border-red-600 bg-red-900/30",yellow:"border-yellow-600 bg-yellow-900/20"},y={gray:"text-gray-300",green:"text-green-300",red:"text-red-300",yellow:"text-yellow-300"};return f.jsxs("div",{className:`rounded-lg border p-4 ${m[h]}`,children:[f.jsxs("div",{className:`flex items-center gap-2 mb-3 ${y[h]}`,children:[a&&f.jsx(a,{size:18}),f.jsx("h3",{className:"font-bold text-sm tracking-wide",children:s})]}),u]})}function Mg({isWon:s,currentCase:a,timeRemaining:u,solvedCases:h,ranks:m,karma:y,notoriety:v,savedNPCs:x,permanentInjuries:w,onNewCase:S,onReturnToMenu:M}){const T=m.find(A=>h>=A.min_cases&&(m[m.indexOf(A)+1]?h<m[m.indexOf(A)+1].min_cases:!0))||m[0],b=m.indexOf(T),z=b>0?m[b-1]:null;return f.jsx(Cc,{bottomPanel:f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:S,className:"flex-1 bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 px-6 rounded-lg text-lg transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:"NEW CASE"}),f.jsx("button",{onClick:M,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-4 px-6 rounded-lg text-lg transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:"MAIN MENU"})]}),children:f.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[f.jsxs("div",{className:`rounded-lg p-6 text-center ${s?"bg-gradient-to-br from-green-800 to-green-900":"bg-gradient-to-br from-red-800 to-red-900"}`,style:{boxShadow:"inset 0 -2px 4px rgba(0,0,0,0.3)"},children:[f.jsx("div",{className:"text-5xl mb-3",children:s?f.jsx(Pm,{className:"inline text-yellow-400",size:56}):""}),f.jsx("h1",{className:`text-3xl font-bold mb-2 ${s?"text-green-200":"text-red-200"}`,children:s?"CASE CLOSED":"CASE FAILED"}),f.jsx("p",{className:`text-lg ${s?"text-green-300":"text-red-300"}`,children:s?"Outstanding detective work!":"The suspect escaped justice."})]}),s&&z&&z.label!==T.label&&f.jsx("div",{className:"bg-gradient-to-r from-yellow-600 via-yellow-500 to-yellow-600 rounded-lg p-4 text-center shadow-lg",children:f.jsxs("div",{className:"flex items-center justify-center gap-3",children:[f.jsx(uc,{className:"text-yellow-900",size:28}),f.jsxs("div",{children:[f.jsx("p",{className:"text-yellow-900 font-bold text-lg",children:"NEW RANK"}),f.jsx("p",{className:"text-yellow-800 font-bold text-xl",children:T.label})]}),f.jsx(uc,{className:"text-yellow-900",size:28})]})}),w&&w.length>0&&f.jsx(Rh,{title:"MEDICAL REPORT",icon:to,color:"red",children:f.jsx("div",{className:"space-y-2",children:w.map((A,O)=>f.jsxs("div",{className:"flex items-center gap-2 text-red-200 text-sm",children:[f.jsx("span",{className:"text-lg",children:A.icon}),f.jsx("span",{children:A.effect})]},O))})}),f.jsx(Rh,{title:"CAREER RECORD",icon:Em,color:"yellow",children:f.jsxs("div",{className:"space-y-1",children:[f.jsx(dl,{label:"Cases Solved",value:h,highlight:!0}),f.jsx(dl,{label:"Current Rank",value:T.label}),f.jsx(dl,{label:"NPCs Helped",value:(x==null?void 0:x.length)||0,icon:wl}),f.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700/50",children:[f.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[f.jsx(Nh,{size:14,className:"text-gray-500"}),f.jsx("span",{children:"Karma"})]}),f.jsxs("div",{className:"font-bold text-white flex items-center gap-1",children:[[...Array(5)].map((A,O)=>f.jsx(Nh,{size:14,className:O<(y||0)?"text-yellow-400 fill-yellow-400":"text-gray-600"},O)),y>=5&&f.jsx("span",{className:"text-red-400 text-xs ml-1",children:"Exploitable"})]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700/50",children:[f.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[f.jsx(to,{size:14,className:"text-gray-500"}),f.jsx("span",{children:"Notoriety"})]}),f.jsxs("div",{className:"font-bold text-white flex items-center gap-1",children:[[...Array(5)].map((A,O)=>f.jsx("div",{className:`w-3 h-3 rounded-sm ${O<(v||0)?"bg-red-500":"bg-gray-600"}`},O)),v>=5&&f.jsx("span",{className:"text-red-400 text-xs ml-1",children:"Dangerous"})]})]}),(w==null?void 0:w.length)>0&&f.jsx(dl,{label:"Permanent Injuries",value:`${w.length} (${w.map(A=>A.icon).join(" ")})`,icon:to})]})})]})})}function zg({onDismiss:s}){return f.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 max-w-md",children:f.jsxs("div",{className:"bg-orange-600 text-white rounded-lg shadow-xl p-4 flex items-start gap-3",children:[f.jsx(to,{size:20,className:"flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold mb-1",children:"Save Data Updated"}),f.jsx("p",{className:"text-sm text-orange-100",children:"Your profile was preserved, but your in-progress case was cleared due to a game update."})]}),f.jsx("button",{onClick:s,className:"text-orange-200 hover:text-white",children:f.jsx(rf,{size:16})})]})})}function Ag({gameData:s}){const{gameState:a,currentCase:u,currentCity:h,timeRemaining:m,currentHour:y,collectedClues:v,investigatedLocations:x,selectedWarrant:w,activeTab:S,solvedCases:M,message:T,wrongCity:b,wrongCityData:z,cityClues:A,lastFoundClue:O,lastSleepResult:W,rogueUsedInCity:Q,isFinalCity:$,destinations:ee,nextInvestigationCost:ue,hotel:Pe,rogueLocation:oe,cityRogueAction:Te,karma:je,notoriety:Ue,savedNPCs:Oe,permanentInjuries:te,showVersionWarning:J,dismissVersionWarning:ve,currentGoodDeed:_e,lastRogueAction:we,activeRogueAction:xe,currentEncounter:Le,availableGadgets:F,selectedTraits:fe,cycleSelectedTrait:G,resetSelectedTraits:j,isInvestigating:U,isTraveling:ce,travelOrigin:se,travelDestination:ie,advanceTimeByOne:ne,startNewCase:Ee,acceptBriefing:ke,investigate:Re,completeInvestigation:Qe,rogueInvestigate:Ve,completeRogueInvestigation:ut,resolveRogueAction:Nt,travel:wt,completeTravelAnimation:Be,getTravelTimeConfig:bt,issueWarrant:Ye,completeTrial:Rt,proceedToTrial:Lt,returnToMenu:nn,handleEncounterResolve:fn,setActiveTab:pi,setSelectedWarrant:Oi}=nm(s),{ranks:or,suspects:ar,settings:jt,rogueActions:rn,encounterTimers:Pn,citiesById:pn,backgrounds:Tt,witnessPhrases:sn}=s,{phase:Zn,pendingAction:mt,hoursRemaining:Fn,queueAction:on,completeAction:Ut}=dm({onTickHour:ne,tickSpeed:(jt.time_tick_speed||.5)*1e3,spinnerDuration:500}),Nn=P.useCallback(et=>{const rt=Re(et);rt&&on({...rt,onComplete:()=>{Qe(),Ut()}})},[Re,on,Qe,Ut]),mi=P.useCallback(et=>{const rt=Ve(et);rt&&on({...rt,onComplete:()=>{ut(),Ut()}})},[Ve,on,ut,Ut]),Ln=P.useCallback(()=>{const et=bt();et?on({...et,onComplete:()=>{Be(),Ut()}}):Be()},[bt,on,Be,Ut]),{isAnimating:It,progress:mn,travelData:Yt,startAnimation:gi}=cm(Ln),[yi,Ri]=P.useState(null),[Un,Di]=P.useState(!1);if(P.useEffect(()=>{if(ce&&se&&ie){const et=pn[ie.cityId];et&&(gi(se,et),Di(!0))}},[ce,se,ie,pn,gi]),P.useEffect(()=>{Yt&&Ri(Yt)},[Yt]),P.useEffect(()=>{if(!ce&&!It&&Un){const et=setTimeout(()=>{Di(!1)},500);return()=>clearTimeout(et)}},[ce,It,Un]),a==="menu")return f.jsx(Lm,{solvedCases:M,ranks:or,onStartNewCase:Ee});if(a==="briefing"){const et=u?s.citiesById[u.cities[0]]:null;return f.jsx(Ng,{currentCase:u,startingCity:et,settings:jt,onAccept:ke,backgrounds:Tt,citiesById:pn})}if(a==="trial")return f.jsx(Ig,{currentCase:u,selectedWarrant:w,timeRemaining:m,onContinue:Rt});if(a==="debrief"){const et=(w==null?void 0:w.id)===(u==null?void 0:u.suspect.id);return f.jsx(Mg,{isWon:et,currentCase:u,timeRemaining:m,solvedCases:M,ranks:or,karma:je,notoriety:Ue,savedNPCs:Oe,permanentInjuries:te,onNewCase:Ee,onReturnToMenu:nn})}const ni=(Tt==null?void 0:Tt.traveling)||"",ii=b&&z?z.id:h==null?void 0:h.id,gn=ii?pn[ii]:null,yn=(gn==null?void 0:gn.background_image)||ni,Wn=It||ce?ni:yn;return f.jsxs("div",{className:"h-screen flex flex-col overflow-hidden bg-gray-900",style:{backgroundImage:`
          linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.4)),
          url('${Wn}')
        `,backgroundSize:"cover",backgroundPosition:"center"},children:[f.jsx(sf,{currentCity:h,wrongCity:b,wrongCityData:z,timeRemaining:m,currentHour:y,maxTime:jt.total_time,timeTickSpeed:jt.time_tick_speed||.5,lastSleepResult:W}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsx(jh,{activeTab:S,setActiveTab:pi,variant:"sidebar"}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:f.jsx("div",{className:"max-w-6xl mx-auto p-4 pb-24 md:pb-4 min-h-full grid",style:{alignItems:It||Zn==="ticking"&&(mt==null?void 0:mt.type)==="travel"?"center":"end"},children:f.jsxs("div",{children:[Un&&yi?f.jsx(bg,{travelData:yi,progress:It||Zn==="ticking"&&(mt==null?void 0:mt.type)==="travel"?mn:1,backgroundImage:Tt==null?void 0:Tt.traveling}):null,!Un||!(It||Zn==="ticking"&&(mt==null?void 0:mt.type)==="travel")?f.jsxs(f.Fragment,{children:[T&&f.jsx("div",{className:"bg-yellow-400/20 border border-yellow-400 text-yellow-100 px-4 py-2 rounded mb-4",children:T}),S==="home"&&f.jsx(Om,{currentCity:b&&z?z:h,cityFact:b&&z?z.fact:h==null?void 0:h.fact}),S==="investigate"&&f.jsx(hg,{isFinalCity:$,wrongCity:b,cityClues:A,investigatedLocations:x,timeRemaining:m,nextInvestigationCost:ue,collectedClues:v,lastFoundClue:O,lastRogueAction:we,activeRogueAction:xe,onResolveRogueAction:Nt,rogueUsedInCity:Q,currentGoodDeed:_e,karma:je,onInvestigate:Nn,cityRogueAction:Te,onRogueAction:mi,notoriety:Ue,currentEncounter:Le,availableGadgets:F,onEncounterResolve:fn,isApprehended:a==="apprehended",selectedWarrant:w,onProceedToTrial:Lt,encounterTimers:Pn,isInvestigating:U,cityFact:b&&z?z.fact:h==null?void 0:h.fact,actionPhase:Zn,actionLabel:mt==null?void 0:mt.label,actionHoursRemaining:Fn,currentCity:b&&z?z:h,hotel:Pe,rogueLocation:oe,witnessPhrases:sn}),S==="airport"&&f.jsx(yg,{destinations:ee,timeRemaining:m,travelTime:jt.travel_time,onTravel:wt,currentCity:b&&z?pn[z.id]||z:h}),S==="dossier"&&f.jsx(kg,{collectedClues:v,suspects:ar,selectedWarrant:w,isFinalCity:$,onSelectWarrant:Oi,onIssueWarrant:Ye,selectedTraits:fe,onCycleTrait:G,onResetTraits:j,currentCity:h})]}):null]})})})]}),f.jsx(jh,{activeTab:S,setActiveTab:pi,variant:"mobile"}),J&&f.jsx(zg,{onDismiss:ve})]})}const Og="modulepreload",Rg=function(s){return"/carmen-san-diego/"+s},Dh={},Dg=function(a,u,h){let m=Promise.resolve();if(u&&u.length>0){let v=function(S){return Promise.all(S.map(M=>Promise.resolve(M).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),w=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));m=v(u.map(S=>{if(S=Rg(S),S in Dh)return;Dh[S]=!0;const M=S.endsWith(".css"),T=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${T}`))return;const b=document.createElement("link");if(b.rel=M?"stylesheet":Og,M||(b.as="script"),b.crossOrigin="",b.href=S,w&&b.setAttribute("nonce",w),document.head.appendChild(b),M)return new Promise((z,A)=>{b.addEventListener("load",z),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${S}`)))})}))}function y(v){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=v,window.dispatchEvent(x),!x.defaultPrevented)throw v}return m.then(v=>{for(const x of v||[])x.status==="rejected"&&y(x.reason);return a().catch(y)})};function Bg(s={}){const{immediate:a=!1,onNeedRefresh:u,onOfflineReady:h,onRegistered:m,onRegisteredSW:y,onRegisterError:v}=s;let x,w,S;const M=async(b=!0)=>{await w,S==null||S()};async function T(){if("serviceWorker"in navigator){if(x=await Dg(async()=>{const{Workbox:b}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:b}},[]).then(({Workbox:b})=>new b("/carmen-san-diego/sw.js",{scope:"/carmen-san-diego/",type:"classic"})).catch(b=>{v==null||v(b)}),!x)return;S=()=>{x==null||x.messageSkipWaiting()};{let b=!1;const z=()=>{b=!0,x==null||x.addEventListener("controlling",A=>{A.isUpdate&&window.location.reload()}),u==null||u()};x.addEventListener("installed",A=>{typeof A.isUpdate>"u"?typeof A.isExternal<"u"&&A.isExternal?z():!b&&(h==null||h()):A.isUpdate||h==null||h()}),x.addEventListener("waiting",z)}x.register({immediate:a}).then(b=>{y?y("/carmen-san-diego/sw.js",b):m==null||m(b)}).catch(b=>{v==null||v(b)})}}return w=T(),M}function Hg(s={}){const{immediate:a=!0,onNeedRefresh:u,onOfflineReady:h,onRegistered:m,onRegisteredSW:y,onRegisterError:v}=s,[x,w]=P.useState(!1),[S,M]=P.useState(!1),[T]=P.useState(()=>Bg({immediate:a,onOfflineReady(){M(!0),h==null||h()},onNeedRefresh(){w(!0),u==null||u()},onRegistered:m,onRegisteredSW:y,onRegisterError:v}));return{needRefresh:[x,w],offlineReady:[S,M],updateServiceWorker:T}}function Zg(){const{needRefresh:[s,a],updateServiceWorker:u}=Hg(),h=()=>{u(!0)};return s?f.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:f.jsxs("div",{className:"bg-blue-600 text-white rounded-lg shadow-lg p-4 flex items-start gap-3",children:[f.jsx(Sm,{size:20,className:"flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold mb-1",children:"Update Available"}),f.jsx("p",{className:"text-sm text-blue-100 mb-3",children:"A new version is available. Reload to update."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:h,className:"px-3 py-1.5 bg-white text-blue-600 rounded font-semibold text-sm hover:bg-blue-50",children:"Reload Now"}),f.jsx("button",{onClick:()=>a(!1),className:"px-3 py-1.5 bg-blue-700 text-white rounded text-sm hover:bg-blue-800",children:"Later"})]})]}),f.jsx("button",{onClick:()=>a(!1),className:"text-blue-200 hover:text-white",children:f.jsx(rf,{size:16})})]})}):null}var Fg=P.useLayoutEffect;function Ug(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Wg(){const s=Ug();if(s.__xstate__)return s.__xstate__}const Gg=s=>{if(typeof window>"u")return;const a=Wg();a&&a.register(s)};class Bh{constructor(a){this._process=a,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(a){const u={value:a,next:null};if(this._current){this._last.next=u,this._last=u;return}this._current=u,this._last=u,this._active&&this.flush()}flush(){for(;this._current;){const a=this._current;this._process(a.value),this._current=a.next}this._last=null}}const gf=".",$g="",yf="",Vg="#",Yg="*",_f="xstate.init",hc="xstate.stop";function qg(s,a){return{type:`xstate.after.${s}.${a}`}}function fc(s,a){return{type:`xstate.done.state.${s}`,output:a}}function Kg(s,a){return{type:`xstate.done.actor.${s}`,output:a,actorId:s}}function Qg(s,a){return{type:`xstate.error.actor.${s}`,error:a,actorId:s}}function vf(s){return{type:_f,input:s}}function Ai(s){setTimeout(()=>{throw s})}const Xg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xf(s,a){const u=Hh(s),h=Hh(a);return typeof h=="string"?typeof u=="string"?h===u:!1:typeof u=="string"?u in h:Object.keys(u).every(m=>m in h?xf(u[m],h[m]):!1)}function Tc(s){if(kf(s))return s;const a=[];let u="";for(let h=0;h<s.length;h++){switch(s.charCodeAt(h)){case 92:u+=s[h+1],h++;continue;case 46:a.push(u),u="";continue}u+=s[h]}return a.push(u),a}function Hh(s){if(My(s))return s.value;if(typeof s!="string")return s;const a=Tc(s);return Jg(a)}function Jg(s){if(s.length===1)return s[0];const a={};let u=a;for(let h=0;h<s.length-1;h++)if(h===s.length-2)u[s[h]]=s[h+1];else{const m=u;u={},m[s[h]]=u}return a}function Zh(s,a){const u={},h=Object.keys(s);for(let m=0;m<h.length;m++){const y=h[m];u[y]=a(s[y],y,s,m)}return u}function wf(s){return kf(s)?s:[s]}function Hr(s){return s===void 0?[]:wf(s)}function pc(s,a,u,h){return typeof s=="function"?s({context:a,event:u,self:h}):s}function kf(s){return Array.isArray(s)}function ey(s){return s.type.startsWith("xstate.error.actor")}function Js(s){return wf(s).map(a=>typeof a>"u"||typeof a=="string"?{target:a}:a)}function Sf(s){if(!(s===void 0||s===$g))return Hr(s)}function mc(s,a,u){var y,v,x;const h=typeof s=="object",m=h?s:void 0;return{next:(y=h?s.next:s)==null?void 0:y.bind(m),error:(v=h?s.error:a)==null?void 0:v.bind(m),complete:(x=h?s.complete:u)==null?void 0:x.bind(m)}}function Fh(s,a){return`${a}.${s}`}function Ec(s,a){const u=a.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!u)return s.implementations.actors[a];const[,h,m]=u,v=s.getStateNodeById(m).config.invoke;return(Array.isArray(v)?v[h]:v).src}function ty(s,a){if(a===s||a===Yg)return!0;if(!a.endsWith(".*"))return!1;const u=a.split("."),h=s.split(".");for(let m=0;m<u.length;m++){const y=u[m],v=h[m];if(y==="*")return m===u.length-1;if(y!==v)return!1}return!0}function Uh(s,a){return`${s.sessionId}.${a}`}let ny=0;function iy(s,a){const u=new Map,h=new Map,m=new WeakMap,y=new Set,v={},{clock:x,logger:w}=a,S={schedule:(b,z,A,O,W=Math.random().toString(36).slice(2))=>{const Q={source:b,target:z,event:A,delay:O,id:W,startedAt:Date.now()},$=Uh(b,W);T._snapshot._scheduledEvents[$]=Q;const ee=x.setTimeout(()=>{delete v[$],delete T._snapshot._scheduledEvents[$],T._relay(b,z,A)},O);v[$]=ee},cancel:(b,z)=>{const A=Uh(b,z),O=v[A];delete v[A],delete T._snapshot._scheduledEvents[A],O!==void 0&&x.clearTimeout(O)},cancelAll:b=>{for(const z in T._snapshot._scheduledEvents){const A=T._snapshot._scheduledEvents[z];A.source===b&&S.cancel(b,A.id)}}},M=b=>{if(!y.size)return;const z={...b,rootId:s.sessionId};y.forEach(A=>{var O;return(O=A.next)==null?void 0:O.call(A,z)})},T={_snapshot:{_scheduledEvents:((a==null?void 0:a.snapshot)&&a.snapshot.scheduler)??{}},_bookId:()=>`x:${ny++}`,_register:(b,z)=>(u.set(b,z),b),_unregister:b=>{u.delete(b.sessionId);const z=m.get(b);z!==void 0&&(h.delete(z),m.delete(b))},get:b=>h.get(b),getAll:()=>Object.fromEntries(h.entries()),_set:(b,z)=>{const A=h.get(b);if(A&&A!==z)throw new Error(`Actor with system ID '${b}' already exists.`);h.set(b,z),m.set(z,b)},inspect:b=>{const z=mc(b);return y.add(z),{unsubscribe(){y.delete(z)}}},_sendInspectionEvent:M,_relay:(b,z,A)=>{T._sendInspectionEvent({type:"@xstate.event",sourceRef:b,actorRef:z,event:A}),z._send(A)},scheduler:S,getSnapshot:()=>({_scheduledEvents:{...T._snapshot._scheduledEvents}}),start:()=>{const b=T._snapshot._scheduledEvents;T._snapshot._scheduledEvents={};for(const z in b){const{source:A,target:O,event:W,delay:Q,id:$}=b[z];S.schedule(A,O,W,Q,$)}},_clock:x,_logger:w};return T}let ec=!1;const Pc=1;let En=(function(s){return s[s.NotStarted=0]="NotStarted",s[s.Running=1]="Running",s[s.Stopped=2]="Stopped",s})({});const ry={clock:{setTimeout:(s,a)=>setTimeout(s,a),clearTimeout:s=>clearTimeout(s)},logger:console.log.bind(console),devTools:!1};class sy{constructor(a,u){this.logic=a,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Bh(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=En.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const h={...ry,...u},{clock:m,logger:y,parent:v,syncSnapshot:x,id:w,systemId:S,inspect:M}=h;this.system=v?v.system:iy(this,{clock:m,logger:y}),M&&!v&&this.system.inspect(mc(M)),this.sessionId=this.system._bookId(),this.id=w??this.sessionId,this.logger=(u==null?void 0:u.logger)??this.system._logger,this.clock=(u==null?void 0:u.clock)??this.system._clock,this._parent=v,this._syncSnapshot=x,this.options=h,this.src=h.src??a,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:T=>{this._deferred.push(T)},system:this.system,stopChild:T=>{if(T._parent!==this)throw new Error(`Cannot stop child actor ${T.id} of ${this.id} because it is not a child`);T._stop()},emit:T=>{const b=this.eventListeners.get(T.type),z=this.eventListeners.get("*");if(!b&&!z)return;const A=[...b?b.values():[],...z?z.values():[]];for(const O of A)try{O(T)}catch(W){Ai(W)}},actionExecutor:T=>{const b=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:T.type,params:T.params}}),!T.exec)return;const z=ec;try{ec=!0,T.exec(T.info,T.params)}finally{ec=z}};this._processingStatus===En.Running?b():this._deferred.push(b)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),S&&(this.systemId=S,this.system._set(S,this)),this._initState((u==null?void 0:u.snapshot)??(u==null?void 0:u.state)),S&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(a){var u;try{this._snapshot=a?this.logic.restoreSnapshot?this.logic.restoreSnapshot(a,this._actorScope):a:this.logic.getInitialSnapshot(this._actorScope,(u=this.options)==null?void 0:u.input)}catch(h){this._snapshot={status:"error",output:void 0,error:h}}}update(a,u){var m,y;this._snapshot=a;let h;for(;h=this._deferred.shift();)try{h()}catch(v){this._deferred.length=0,this._snapshot={...a,status:"error",error:v}}switch(this._snapshot.status){case"active":for(const v of this.observers)try{(m=v.next)==null||m.call(v,a)}catch(x){Ai(x)}break;case"done":for(const v of this.observers)try{(y=v.next)==null||y.call(v,a)}catch(x){Ai(x)}this._stopProcedure(),this._complete(),this._doneEvent=Kg(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:u,snapshot:a})}subscribe(a,u,h){var y;const m=mc(a,u,h);if(this._processingStatus!==En.Stopped)this.observers.add(m);else switch(this._snapshot.status){case"done":try{(y=m.complete)==null||y.call(m)}catch(v){Ai(v)}break;case"error":{const v=this._snapshot.error;if(!m.error)Ai(v);else try{m.error(v)}catch(x){Ai(x)}break}}return{unsubscribe:()=>{this.observers.delete(m)}}}on(a,u){let h=this.eventListeners.get(a);h||(h=new Set,this.eventListeners.set(a,h));const m=u.bind(void 0);return h.add(m),{unsubscribe:()=>{h.delete(m)}}}start(){if(this._processingStatus===En.Running)return this;this._syncSnapshot&&this.subscribe({next:h=>{h.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:h})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=En.Running;const a=vf(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:a}),this._snapshot.status){case"done":return this.update(this._snapshot,a),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(h){return this._snapshot={...this._snapshot,status:"error",error:h},this._error(h),this}return this.update(this._snapshot,a),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(a){let u,h;try{u=this.logic.transition(this._snapshot,a,this._actorScope)}catch(m){h={err:m}}if(h){const{err:m}=h;this._snapshot={...this._snapshot,status:"error",error:m},this._error(m);return}this.update(u,a),a.type===hc&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===En.Stopped?this:(this.mailbox.clear(),this._processingStatus===En.NotStarted?(this._processingStatus=En.Stopped,this):(this.mailbox.enqueue({type:hc}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var a;for(const u of this.observers)try{(a=u.complete)==null||a.call(u)}catch(h){Ai(h)}this.observers.clear()}_reportError(a){if(!this.observers.size){this._parent||Ai(a);return}let u=!1;for(const h of this.observers){const m=h.error;u||(u=!m);try{m==null||m(a)}catch(y){Ai(y)}}this.observers.clear(),u&&Ai(a)}_error(a){this._stopProcedure(),this._reportError(a),this._parent&&this.system._relay(this,this._parent,Qg(this.id,a))}_stopProcedure(){return this._processingStatus!==En.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Bh(this._process.bind(this)),this._processingStatus=En.Stopped,this.system._unregister(this),this)}_send(a){this._processingStatus!==En.Stopped&&this.mailbox.enqueue(a)}send(a){this.system._relay(void 0,this,a)}attachDevTools(){const{devTools:a}=this.options;a&&(typeof a=="function"?a:Gg)(this)}toJSON(){return{xstate$$type:Pc,id:this.id}}getPersistedSnapshot(a){return this.logic.getPersistedSnapshot(this._snapshot,a)}[Xg](){return this}getSnapshot(){return this._snapshot}}function no(s,...[a]){return new sy(s,a)}function oy(s,a,u,h,{sendId:m}){const y=typeof m=="function"?m(u,h):m;return[a,{sendId:y},void 0]}function ay(s,a){s.defer(()=>{s.system.scheduler.cancel(s.self,a.sendId)})}function ly(s){function a(u,h){}return a.type="xstate.cancel",a.sendId=s,a.resolve=oy,a.execute=ay,a}function uy(s,a,u,h,{id:m,systemId:y,src:v,input:x,syncSnapshot:w}){const S=typeof v=="string"?Ec(a.machine,v):v,M=typeof m=="function"?m(u):m;let T,b;return S&&(b=typeof x=="function"?x({context:a.context,event:u.event,self:s.self}):x,T=no(S,{id:M,src:v,parent:s.self,syncSnapshot:w,systemId:y,input:b})),[ms(a,{children:{...a.children,[M]:T}}),{id:m,systemId:y,actorRef:T,src:v,input:b},void 0]}function cy(s,{actorRef:a}){a&&s.defer(()=>{a._processingStatus!==En.Stopped&&a.start()})}function dy(...[s,{id:a,systemId:u,input:h,syncSnapshot:m=!1}={}]){function y(v,x){}return y.type="xstate.spawnChild",y.id=a,y.systemId=u,y.src=s,y.input=h,y.syncSnapshot=m,y.resolve=uy,y.execute=cy,y}function hy(s,a,u,h,{actorRef:m}){const y=typeof m=="function"?m(u,h):m,v=typeof y=="string"?a.children[y]:y;let x=a.children;return v&&(x={...x},delete x[v.id]),[ms(a,{children:x}),v,void 0]}function fy(s,a){if(a){if(s.system._unregister(a),a._processingStatus!==En.Running){s.stopChild(a);return}s.defer(()=>{s.stopChild(a)})}}function bf(s){function a(u,h){}return a.type="xstate.stopChild",a.actorRef=s,a.resolve=hy,a.execute=fy,a}function Nc(s,a,u,h){const{machine:m}=h,y=typeof s=="function",v=y?s:m.implementations.guards[typeof s=="string"?s:s.type];if(!y&&!v)throw new Error(`Guard '${typeof s=="string"?s:s.type}' is not implemented.'.`);if(typeof v!="function")return Nc(v,a,u,h);const x={context:a,event:u},w=y||typeof s=="string"?void 0:"params"in s?typeof s.params=="function"?s.params({context:a,event:u}):s.params:void 0;return"check"in v?v.check(h,x,v):v(x,w)}const Lc=s=>s.type==="atomic"||s.type==="final";function io(s){return Object.values(s.states).filter(a=>a.type!=="history")}function ta(s,a){const u=[];if(a===s)return u;let h=s.parent;for(;h&&h!==a;)u.push(h),h=h.parent;return u}function gl(s){const a=new Set(s),u=Tf(a);for(const h of a)if(h.type==="compound"&&(!u.get(h)||!u.get(h).length))Wh(h).forEach(m=>a.add(m));else if(h.type==="parallel"){for(const m of io(h))if(m.type!=="history"&&!a.has(m)){const y=Wh(m);for(const v of y)a.add(v)}}for(const h of a){let m=h.parent;for(;m;)a.add(m),m=m.parent}return a}function Cf(s,a){const u=a.get(s);if(!u)return{};if(s.type==="compound"){const m=u[0];if(m){if(Lc(m))return m.key}else return{}}const h={};for(const m of u)h[m.key]=Cf(m,a);return h}function Tf(s){const a=new Map;for(const u of s)a.has(u)||a.set(u,[]),u.parent&&(a.has(u.parent)||a.set(u.parent,[]),a.get(u.parent).push(u));return a}function Ef(s,a){const u=gl(a);return Cf(s,Tf(u))}function jc(s,a){return a.type==="compound"?io(a).some(u=>u.type==="final"&&s.has(u)):a.type==="parallel"?io(a).every(u=>jc(s,u)):a.type==="final"}const kl=s=>s[0]===Vg;function py(s,a){return s.transitions.get(a)||[...s.transitions.keys()].filter(h=>ty(a,h)).sort((h,m)=>m.length-h.length).flatMap(h=>s.transitions.get(h))}function my(s){const a=s.config.after;if(!a)return[];const u=m=>{const y=qg(m,s.id),v=y.type;return s.entry.push(Uy(y,{id:v,delay:m})),s.exit.push(ly(v)),v};return Object.keys(a).flatMap(m=>{const y=a[m],v=typeof y=="string"?{target:y}:y,x=Number.isNaN(+m)?m:+m,w=u(x);return Hr(v).map(S=>({...S,event:w,delay:x}))}).map(m=>{const{delay:y}=m;return{...fs(s,m.event,m),delay:y}})}function fs(s,a,u){const h=Sf(u.target),m=u.reenter??!1,y=_y(s,h),v={...u,actions:Hr(u.actions),guard:u.guard,target:y,source:s,reenter:m,eventType:a,toJSON:()=>({...v,source:`#${s.id}`,target:y?y.map(x=>`#${x.id}`):void 0})};return v}function gy(s){const a=new Map;if(s.config.on)for(const u of Object.keys(s.config.on)){if(u===yf)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const h=s.config.on[u];a.set(u,Js(h).map(m=>fs(s,u,m)))}if(s.config.onDone){const u=`xstate.done.state.${s.id}`;a.set(u,Js(s.config.onDone).map(h=>fs(s,u,h)))}for(const u of s.invoke){if(u.onDone){const h=`xstate.done.actor.${u.id}`;a.set(h,Js(u.onDone).map(m=>fs(s,h,m)))}if(u.onError){const h=`xstate.error.actor.${u.id}`;a.set(h,Js(u.onError).map(m=>fs(s,h,m)))}if(u.onSnapshot){const h=`xstate.snapshot.${u.id}`;a.set(h,Js(u.onSnapshot).map(m=>fs(s,h,m)))}}for(const u of s.after){let h=a.get(u.eventType);h||(h=[],a.set(u.eventType,h)),h.push(u)}return a}function yy(s,a){const u=typeof a=="string"?s.states[a]:a?s.states[a.target]:void 0;if(!u&&a)throw new Error(`Initial state node "${a}" not found on parent state node #${s.id}`);const h={source:s,actions:!a||typeof a=="string"?[]:Hr(a.actions),eventType:null,reenter:!1,target:u?[u]:[],toJSON:()=>({...h,source:`#${s.id}`,target:u?[`#${u.id}`]:[]})};return h}function _y(s,a){if(a!==void 0)return a.map(u=>{if(typeof u!="string")return u;if(kl(u))return s.machine.getStateNodeById(u);const h=u[0]===gf;if(h&&!s.parent)return yl(s,u.slice(1));const m=h?s.key+u:u;if(s.parent)try{return yl(s.parent,m)}catch(y){throw new Error(`Invalid transition definition for state node '${s.id}':
${y.message}`)}else throw new Error(`Invalid target: "${u}" is not a valid target from the root node. Did you mean ".${u}"?`)})}function Pf(s){const a=Sf(s.config.target);return a?{target:a.map(u=>typeof u=="string"?yl(s.parent,u):u)}:s.parent.initial}function ps(s){return s.type==="history"}function Wh(s){const a=Nf(s);for(const u of a)for(const h of ta(u,s))a.add(h);return a}function Nf(s){const a=new Set;function u(h){if(!a.has(h)){if(a.add(h),h.type==="compound")u(h.initial.target[0]);else if(h.type==="parallel")for(const m of io(h))u(m)}}return u(s),a}function ro(s,a){if(kl(a))return s.machine.getStateNodeById(a);if(!s.states)throw new Error(`Unable to retrieve child state '${a}' from '${s.id}'; no child states exist.`);const u=s.states[a];if(!u)throw new Error(`Child state '${a}' does not exist on '${s.id}'`);return u}function yl(s,a){if(typeof a=="string"&&kl(a))try{return s.machine.getStateNodeById(a)}catch{}const u=Tc(a).slice();let h=s;for(;u.length;){const m=u.shift();if(!m.length)break;h=ro(h,m)}return h}function _l(s,a){if(typeof a=="string"){const m=s.states[a];if(!m)throw new Error(`State '${a}' does not exist on '${s.id}'`);return[s,m]}const u=Object.keys(a),h=u.map(m=>ro(s,m)).filter(Boolean);return[s.machine.root,s].concat(h,u.reduce((m,y)=>{const v=ro(s,y);if(!v)return m;const x=_l(v,a[y]);return m.concat(x)},[]))}function vy(s,a,u,h){const y=ro(s,a).next(u,h);return!y||!y.length?s.next(u,h):y}function xy(s,a,u,h){const m=Object.keys(a),y=ro(s,m[0]),v=Ic(y,a[m[0]],u,h);return!v||!v.length?s.next(u,h):v}function wy(s,a,u,h){const m=[];for(const y of Object.keys(a)){const v=a[y];if(!v)continue;const x=ro(s,y),w=Ic(x,v,u,h);w&&m.push(...w)}return m.length?m:s.next(u,h)}function Ic(s,a,u,h){return typeof a=="string"?vy(s,a,u,h):Object.keys(a).length===1?xy(s,a,u,h):wy(s,a,u,h)}function ky(s){return Object.keys(s.states).map(a=>s.states[a]).filter(a=>a.type==="history")}function Zr(s,a){let u=s;for(;u.parent&&u.parent!==a;)u=u.parent;return u.parent===a}function Sy(s,a){const u=new Set(s),h=new Set(a);for(const m of u)if(h.has(m))return!0;for(const m of h)if(u.has(m))return!0;return!1}function Lf(s,a,u){const h=new Set;for(const m of s){let y=!1;const v=new Set;for(const x of h)if(Sy(gc([m],a,u),gc([x],a,u)))if(Zr(m.source,x.source))v.add(x);else{y=!0;break}if(!y){for(const x of v)h.delete(x);h.add(m)}}return Array.from(h)}function by(s){const[a,...u]=s;for(const h of ta(a,void 0))if(u.every(m=>Zr(m,h)))return h}function Mc(s,a){if(!s.target)return[];const u=new Set;for(const h of s.target)if(ps(h))if(a[h.id])for(const m of a[h.id])u.add(m);else for(const m of Mc(Pf(h),a))u.add(m);else u.add(h);return[...u]}function jf(s,a){const u=Mc(s,a);if(!u)return;if(!s.reenter&&u.every(m=>m===s.source||Zr(m,s.source)))return s.source;const h=by(u.concat(s.source));if(h)return h;if(!s.reenter)return s.source.machine.root}function gc(s,a,u){var m;const h=new Set;for(const y of s)if((m=y.target)!=null&&m.length){const v=jf(y,u);y.reenter&&y.source===v&&h.add(v);for(const x of a)Zr(x,v)&&h.add(x)}return[...h]}function Cy(s,a){if(s.length!==a.size)return!1;for(const u of s)if(!a.has(u))return!1;return!0}function yc(s,a,u,h,m,y){if(!s.length)return a;const v=new Set(a._nodes);let x=a.historyValue;const w=Lf(s,v,x);let S=a;m||([S,x]=Ny(S,h,u,w,v,x,y,u.actionExecutor)),S=so(S,h,u,w.flatMap(T=>T.actions),y,void 0),S=Ey(S,h,u,w,v,y,x,m);const M=[...v];S.status==="done"&&(S=so(S,h,u,M.sort((T,b)=>b.order-T.order).flatMap(T=>T.exit),y,void 0));try{return x===a.historyValue&&Cy(a._nodes,v)?S:ms(S,{_nodes:M,historyValue:x})}catch(T){throw T}}function Ty(s,a,u,h,m){if(h.output===void 0)return;const y=fc(m.id,m.output!==void 0&&m.parent?pc(m.output,s.context,a,u.self):void 0);return pc(h.output,s.context,y,u.self)}function Ey(s,a,u,h,m,y,v,x){let w=s;const S=new Set,M=new Set;Py(h,v,M,S),x&&M.add(s.machine.root);const T=new Set;for(const b of[...S].sort((z,A)=>z.order-A.order)){m.add(b);const z=[];z.push(...b.entry);for(const A of b.invoke)z.push(dy(A.src,{...A,syncSnapshot:!!A.onSnapshot}));if(M.has(b)){const A=b.initial.actions;z.push(...A)}if(w=so(w,a,u,z,y,b.invoke.map(A=>A.id)),b.type==="final"){const A=b.parent;let O=(A==null?void 0:A.type)==="parallel"?A:A==null?void 0:A.parent,W=O||b;for((A==null?void 0:A.type)==="compound"&&y.push(fc(A.id,b.output!==void 0?pc(b.output,w.context,a,u.self):void 0));(O==null?void 0:O.type)==="parallel"&&!T.has(O)&&jc(m,O);)T.add(O),y.push(fc(O.id)),W=O,O=O.parent;if(O)continue;w=ms(w,{status:"done",output:Ty(w,a,u,w.machine.root,W)})}}return w}function Py(s,a,u,h){for(const m of s){const y=jf(m,a);for(const x of m.target||[])!ps(x)&&(m.source!==x||m.source!==y||m.reenter)&&(h.add(x),u.add(x)),eo(x,a,u,h);const v=Mc(m,a);for(const x of v){const w=ta(x,y);(y==null?void 0:y.type)==="parallel"&&w.push(y),If(h,a,u,w,!m.source.parent&&m.reenter?void 0:y)}}}function eo(s,a,u,h){var m;if(ps(s))if(a[s.id]){const y=a[s.id];for(const v of y)h.add(v),eo(v,a,u,h);for(const v of y)tc(v,s.parent,h,a,u)}else{const y=Pf(s);for(const v of y.target)h.add(v),y===((m=s.parent)==null?void 0:m.initial)&&u.add(s.parent),eo(v,a,u,h);for(const v of y.target)tc(v,s.parent,h,a,u)}else if(s.type==="compound"){const[y]=s.initial.target;ps(y)||(h.add(y),u.add(y)),eo(y,a,u,h),tc(y,s,h,a,u)}else if(s.type==="parallel")for(const y of io(s).filter(v=>!ps(v)))[...h].some(v=>Zr(v,y))||(ps(y)||(h.add(y),u.add(y)),eo(y,a,u,h))}function If(s,a,u,h,m){for(const y of h)if((!m||Zr(y,m))&&s.add(y),y.type==="parallel")for(const v of io(y).filter(x=>!ps(x)))[...s].some(x=>Zr(x,v))||(s.add(v),eo(v,a,u,s))}function tc(s,a,u,h,m){If(u,h,m,ta(s,a))}function Ny(s,a,u,h,m,y,v,x){let w=s;const S=gc(h,m,y);S.sort((T,b)=>b.order-T.order);let M;for(const T of S)for(const b of ky(T)){let z;b.history==="deep"?z=A=>Lc(A)&&Zr(A,T):z=A=>A.parent===T,M??(M={...y}),M[b.id]=Array.from(m).filter(z)}for(const T of S)w=so(w,a,u,[...T.exit,...T.invoke.map(b=>bf(b.id))],v,void 0),m.delete(T);return[w,M||y]}function Ly(s,a){return s.implementations.actions[a]}function Mf(s,a,u,h,m,y){const{machine:v}=s;let x=s;for(const w of h){const S=typeof w=="function",M=S?w:Ly(v,typeof w=="string"?w:w.type),T={context:x.context,event:a,self:u.self,system:u.system},b=S||typeof w=="string"?void 0:"params"in w?typeof w.params=="function"?w.params({context:x.context,event:a}):w.params:void 0;if(!M||!("resolve"in M)){u.actionExecutor({type:typeof w=="string"?w:typeof w=="object"?w.type:w.name||"(anonymous)",info:T,params:b,exec:M});continue}const z=M,[A,O,W]=z.resolve(u,x,T,b,M,m);x=A,"retryResolve"in z&&(y==null||y.push([z,O])),"execute"in z&&u.actionExecutor({type:z.type,info:T,params:O,exec:z.execute.bind(null,u,O)}),W&&(x=Mf(x,a,u,W,m,y))}return x}function so(s,a,u,h,m,y){const v=y?[]:void 0,x=Mf(s,a,u,h,{internalQueue:m,deferredActorIds:y},v);return v==null||v.forEach(([w,S])=>{w.retryResolve(u,x,S)}),x}function nc(s,a,u,h){let m=s;const y=[];function v(S,M,T){u.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:u.self,event:M,snapshot:S,_transitions:T}),y.push(S)}if(a.type===hc)return m=ms(Gh(m,a,u),{status:"stopped"}),v(m,a,[]),{snapshot:m,microstates:y};let x=a;if(x.type!==_f){const S=x,M=ey(S),T=$h(S,m);if(M&&!T.length)return m=ms(s,{status:"error",error:S.error}),v(m,S,[]),{snapshot:m,microstates:y};m=yc(T,s,u,x,!1,h),v(m,S,T)}let w=!0;for(;m.status==="active";){let S=w?jy(m,x):[];const M=S.length?m:void 0;if(!S.length){if(!h.length)break;x=h.shift(),S=$h(x,m)}m=yc(S,m,u,x,!1,h),w=m!==M,v(m,x,S)}return m.status!=="active"&&Gh(m,x,u),{snapshot:m,microstates:y}}function Gh(s,a,u){return so(s,a,u,Object.values(s.children).map(h=>bf(h)),[],void 0)}function $h(s,a){return a.machine.getTransitionData(a,s)}function jy(s,a){const u=new Set,h=s._nodes.filter(Lc);for(const m of h)e:for(const y of[m].concat(ta(m,void 0)))if(y.always){for(const v of y.always)if(v.guard===void 0||Nc(v.guard,s.context,a,s)){u.add(v);break e}}return Lf(Array.from(u),new Set(s._nodes),s.historyValue)}function Iy(s,a){const u=gl(_l(s,a));return Ef(s,[...u])}function My(s){return!!s&&typeof s=="object"&&"machine"in s&&"value"in s}const zy=function(a){return xf(a,this.value)},Ay=function(a){return this.tags.has(a)},Oy=function(a){const u=this.machine.getTransitionData(this,a);return!!(u!=null&&u.length)&&u.some(h=>h.target!==void 0||h.actions.length)},Ry=function(){const{_nodes:a,tags:u,machine:h,getMeta:m,toJSON:y,can:v,hasTag:x,matches:w,...S}=this;return{...S,tags:Array.from(u)}},Dy=function(){return this._nodes.reduce((a,u)=>(u.meta!==void 0&&(a[u.id]=u.meta),a),{})};function pl(s,a){return{status:s.status,output:s.output,error:s.error,machine:a,context:s.context,_nodes:s._nodes,value:Ef(a.root,s._nodes),tags:new Set(s._nodes.flatMap(u=>u.tags)),children:s.children,historyValue:s.historyValue||{},matches:zy,hasTag:Ay,can:Oy,getMeta:Dy,toJSON:Ry}}function ms(s,a={}){return pl({...s,...a},s.machine)}function By(s){if(typeof s!="object"||s===null)return{};const a={};for(const u in s){const h=s[u];Array.isArray(h)&&(a[u]=h.map(m=>({id:m.id})))}return a}function Hy(s,a){const{_nodes:u,tags:h,machine:m,children:y,context:v,can:x,hasTag:w,matches:S,getMeta:M,toJSON:T,...b}=s,z={};for(const O in y){const W=y[O];z[O]={snapshot:W.getPersistedSnapshot(a),src:W.src,systemId:W.systemId,syncSnapshot:W._syncSnapshot}}return{...b,context:zf(v),children:z,historyValue:By(b.historyValue)}}function zf(s){let a;for(const u in s){const h=s[u];if(h&&typeof h=="object")if("sessionId"in h&&"send"in h&&"ref"in h)a??(a=Array.isArray(s)?s.slice():{...s}),a[u]={xstate$$type:Pc,id:h.id};else{const m=zf(h);m!==h&&(a??(a=Array.isArray(s)?s.slice():{...s}),a[u]=m)}}return a??s}function Zy(s,a,u,h,{event:m,id:y,delay:v},{internalQueue:x}){const w=a.machine.implementations.delays;if(typeof m=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${m}" }) instead`);const S=typeof m=="function"?m(u,h):m;let M;if(typeof v=="string"){const T=w&&w[v];M=typeof T=="function"?T(u,h):T}else M=typeof v=="function"?v(u,h):v;return typeof M!="number"&&x.push(S),[a,{event:S,id:y,delay:M},void 0]}function Fy(s,a){const{event:u,delay:h,id:m}=a;if(typeof h=="number"){s.defer(()=>{const y=s.self;s.system.scheduler.schedule(y,y,u,h,m)});return}}function Uy(s,a){function u(h,m){}return u.type="xstate.raise",u.event=s,u.id=a==null?void 0:a.id,u.delay=a==null?void 0:a.delay,u.resolve=Zy,u.execute=Fy,u}function Wy(s,{machine:a,context:u},h,m){const y=(v,x)=>{if(typeof v=="string"){const w=Ec(a,v);if(!w)throw new Error(`Actor logic '${v}' not implemented in machine '${a.id}'`);const S=no(w,{id:x==null?void 0:x.id,parent:s.self,syncSnapshot:x==null?void 0:x.syncSnapshot,input:typeof(x==null?void 0:x.input)=="function"?x.input({context:u,event:h,self:s.self}):x==null?void 0:x.input,src:v,systemId:x==null?void 0:x.systemId});return m[S.id]=S,S}else return no(v,{id:x==null?void 0:x.id,parent:s.self,syncSnapshot:x==null?void 0:x.syncSnapshot,input:x==null?void 0:x.input,src:v,systemId:x==null?void 0:x.systemId})};return(v,x)=>{const w=y(v,x);return m[w.id]=w,s.defer(()=>{w._processingStatus!==En.Stopped&&w.start()}),w}}function Gy(s,a,u,h,{assignment:m}){if(!a.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const y={},v={context:a.context,event:u.event,spawn:Wy(s,a,u.event,y),self:s.self,system:s.system};let x={};if(typeof m=="function")x=m(v,h);else for(const S of Object.keys(m)){const M=m[S];x[S]=typeof M=="function"?M(v,h):M}const w=Object.assign({},a.context,x);return[ms(a,{context:w,children:Object.keys(y).length?{...a.children,...y}:a.children}),void 0,void 0]}function We(s){function a(u,h){}return a.type="xstate.assign",a.assignment=s,a.resolve=Gy,a}const Vh=new WeakMap;function Xs(s,a,u){let h=Vh.get(s);return h?a in h||(h[a]=u()):(h={[a]:u()},Vh.set(s,h)),h[a]}const $y={},Ko=s=>typeof s=="string"?{type:s}:typeof s=="function"?"resolve"in s?{type:s.type}:{type:s.name}:s;class vl{constructor(a,u){if(this.config=a,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=u._parent,this.key=u._key,this.machine=u._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(gf),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Zh(this.config.states,(h,m)=>new vl(h,{_parent:this,_key:m,_machine:this.machine})):$y,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Hr(this.config.entry).slice(),this.exit=Hr(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Hr(a.tags).slice()}_initialize(){this.transitions=gy(this),this.config.always&&(this.always=Js(this.config.always).map(a=>fs(this,yf,a))),Object.keys(this.states).forEach(a=>{this.states[a]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Ko),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(a=>`#${a.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Ko),eventType:null})}:void 0,history:this.history,states:Zh(this.states,a=>a.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(a=>({...a,actions:a.actions.map(Ko)})),entry:this.entry.map(Ko),exit:this.exit.map(Ko),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Xs(this,"invoke",()=>Hr(this.config.invoke).map((a,u)=>{const{src:h,systemId:m}=a,y=a.id??Fh(this.id,u),v=typeof h=="string"?h:`xstate.invoke.${Fh(this.id,u)}`;return{...a,src:v,id:y,systemId:m,toJSON(){const{onDone:x,onError:w,...S}=a;return{...S,type:"xstate.invoke",src:v,id:y}}}}))}get on(){return Xs(this,"on",()=>[...this.transitions].flatMap(([u,h])=>h.map(m=>[u,m])).reduce((u,[h,m])=>(u[h]=u[h]||[],u[h].push(m),u),{}))}get after(){return Xs(this,"delayedTransitions",()=>my(this))}get initial(){return Xs(this,"initial",()=>yy(this,this.config.initial))}next(a,u){const h=u.type,m=[];let y;const v=Xs(this,`candidates-${h}`,()=>py(this,h));for(const x of v){const{guard:w}=x,S=a.context;let M=!1;try{M=!w||Nc(w,S,u,a)}catch(T){const b=typeof w=="string"?w:typeof w=="object"?w.type:void 0;throw new Error(`Unable to evaluate guard ${b?`'${b}' `:""}in transition for event '${h}' in state node '${this.id}':
${T.message}`)}if(M){m.push(...x.actions),y=x;break}}return y?[y]:void 0}get events(){return Xs(this,"events",()=>{const{states:a}=this,u=new Set(this.ownEvents);if(a)for(const h of Object.keys(a)){const m=a[h];if(m.states)for(const y of m.events)u.add(`${y}`)}return Array.from(u)})}get ownEvents(){const a=Object.keys(Object.fromEntries(this.transitions)),u=new Set(a.filter(h=>this.transitions.get(h).some(m=>!(!m.target&&!m.actions.length&&!m.reenter))));return Array.from(u)}}const Vy="#";class zc{constructor(a,u){this.config=a,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=a.id||"(machine)",this.implementations={actors:(u==null?void 0:u.actors)??{},actions:(u==null?void 0:u.actions)??{},delays:(u==null?void 0:u.delays)??{},guards:(u==null?void 0:u.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new vl(a,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(a){const{actions:u,guards:h,actors:m,delays:y}=this.implementations;return new zc(this.config,{actions:{...u,...a.actions},guards:{...h,...a.guards},actors:{...m,...a.actors},delays:{...y,...a.delays}})}resolveState(a){const u=Iy(this.root,a.value),h=gl(_l(this.root,u));return pl({_nodes:[...h],context:a.context||{},children:{},status:jc(h,this.root)?"done":a.status||"active",output:a.output,error:a.error,historyValue:a.historyValue},this)}transition(a,u,h){return nc(a,u,h,[]).snapshot}microstep(a,u,h){return nc(a,u,h,[]).microstates}getTransitionData(a,u){return Ic(this.root,a.value,a,u)||[]}getPreInitialState(a,u,h){const{context:m}=this.config,y=pl({context:typeof m!="function"&&m?m:{},_nodes:[this.root],children:{},status:"active"},this);return typeof m=="function"?so(y,u,a,[We(({spawn:x,event:w,self:S})=>m({spawn:x,input:w.input,self:S}))],h,void 0):y}getInitialSnapshot(a,u){const h=vf(u),m=[],y=this.getPreInitialState(a,h,m),v=yc([{target:[...Nf(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],y,a,h,!0,m),{snapshot:x}=nc(v,h,a,m);return x}start(a){Object.values(a.children).forEach(u=>{u.getSnapshot().status==="active"&&u.start()})}getStateNodeById(a){const u=Tc(a),h=u.slice(1),m=kl(u[0])?u[0].slice(Vy.length):u[0],y=this.idMap.get(m);if(!y)throw new Error(`Child state node '#${m}' does not exist on machine '${this.id}'`);return yl(y,h)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(a,u){return Hy(a,u)}restoreSnapshot(a,u){const h={},m=a.children;Object.keys(m).forEach(T=>{const b=m[T],z=b.snapshot,A=b.src,O=typeof A=="string"?Ec(this,A):A;if(!O)return;const W=no(O,{id:T,parent:u.self,syncSnapshot:b.syncSnapshot,snapshot:z,src:A,systemId:b.systemId});h[T]=W});function y(T,b){if(b instanceof vl)return b;try{return T.machine.getStateNodeById(b.id)}catch{}}function v(T,b){if(!b||typeof b!="object")return{};const z={};for(const A in b){const O=b[A];for(const W of O){const Q=y(T,W);Q&&(z[A]??(z[A]=[]),z[A].push(Q))}}return z}const x=v(this.root,a.historyValue),w=pl({...a,children:h,_nodes:Array.from(gl(_l(this.root,a.value))),historyValue:x},this),S=new Set;function M(T,b){if(!S.has(T)){S.add(T);for(const z in T){const A=T[z];if(A&&typeof A=="object"){if("xstate$$type"in A&&A.xstate$$type===Pc){T[z]=b[A.id];continue}M(A,b)}}}}return M(w.context,h),w}}function Yy(s,a){return new zc(s,a)}var ic={exports:{}},rc={},sc={exports:{}},oc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function qy(){if(Yh)return oc;Yh=1;var s=Jo();function a(T,b){return T===b&&(T!==0||1/T===1/b)||T!==T&&b!==b}var u=typeof Object.is=="function"?Object.is:a,h=s.useState,m=s.useEffect,y=s.useLayoutEffect,v=s.useDebugValue;function x(T,b){var z=b(),A=h({inst:{value:z,getSnapshot:b}}),O=A[0].inst,W=A[1];return y(function(){O.value=z,O.getSnapshot=b,w(O)&&W({inst:O})},[T,z,b]),m(function(){return w(O)&&W({inst:O}),T(function(){w(O)&&W({inst:O})})},[T]),v(z),z}function w(T){var b=T.getSnapshot;T=T.value;try{var z=b();return!u(T,z)}catch{return!0}}function S(T,b){return b()}var M=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:x;return oc.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:M,oc}var qh;function Af(){return qh||(qh=1,sc.exports=qy()),sc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh;function Ky(){if(Kh)return rc;Kh=1;var s=Jo(),a=Af();function u(S,M){return S===M&&(S!==0||1/S===1/M)||S!==S&&M!==M}var h=typeof Object.is=="function"?Object.is:u,m=a.useSyncExternalStore,y=s.useRef,v=s.useEffect,x=s.useMemo,w=s.useDebugValue;return rc.useSyncExternalStoreWithSelector=function(S,M,T,b,z){var A=y(null);if(A.current===null){var O={hasValue:!1,value:null};A.current=O}else O=A.current;A=x(function(){function Q(oe){if(!$){if($=!0,ee=oe,oe=b(oe),z!==void 0&&O.hasValue){var Te=O.value;if(z(Te,oe))return ue=Te}return ue=oe}if(Te=ue,h(ee,oe))return Te;var je=b(oe);return z!==void 0&&z(Te,je)?(ee=oe,Te):(ee=oe,ue=je)}var $=!1,ee,ue,Pe=T===void 0?null:T;return[function(){return Q(M())},Pe===null?void 0:function(){return Q(Pe())}]},[M,T,b,z]);var W=m(S,A[0],A[1]);return v(function(){O.hasValue=!0,O.value=W},[W]),w(W),W},rc}var Qh;function Qy(){return Qh||(Qh=1,ic.exports=Ky()),ic.exports}Qy();var Xy=Af();const Of=(s,a)=>{a(s);const u=s.getSnapshot().children;u&&Object.values(u).forEach(h=>{Of(h,a)})};function Jy(s){var h,m;const a=[];Of(s,y=>{a.push([y,y.getSnapshot()]),y.observers=new Set});const u=(m=(h=s.system).getSnapshot)==null?void 0:m.call(h);s.stop(),s.system._snapshot=u,a.forEach(([y,v])=>{y._processingStatus=0,y._snapshot=v})}function e_(s,...[a]){let[[u,h],m]=P.useState(()=>{const y=no(s,a);return[s.config,y]});if(s.config!==u){const y=no(s,{...a,snapshot:h.getPersistedSnapshot({__unsafeAllowInlineActors:!0})});m([s.config,y]),h=y}return Fg(()=>{h.logic.implementations=s.implementations}),h}function t_(s,...[a]){const u=e_(s,a),h=P.useCallback(()=>u.getSnapshot(),[u]),m=P.useCallback(v=>{const{unsubscribe:x}=u.subscribe(v);return x},[u]),y=Xy.useSyncExternalStore(m,h,h);return P.useEffect(()=>(u.start(),()=>{Jy(u)}),[u]),[y,u.send,u]}function n_(s,...[a]){return t_(s,a)}const i_={karma:0,notoriety:0,solvedCases:[],currentCase:null,currentHour:8,timeRemaining:72,cityIndex:0,currentCityId:null,wrongCity:!1,originCityId:null,travelDestination:null,isCorrectPath:null,investigatedSpots:[],spotsUsedInCity:0,currentSpotIndex:null,hadEncounterInCity:!1,hadGoodDeedInCase:!1,rogueUsedInCity:!1,warrantIssued:!1,selectedWarrant:null,availableGadgets:[],usedGadgets:[],wounds:0,encounterType:null,encounterQueue:[],encounterChoice:null,witnessClueVariant:null,pendingRogueAction:!1,travelHours:null,goodDeedRoll:null,lastSleepMessage:null,sleepWouldTimeout:!1,debriefOutcome:null};function hl(s){return s*(Math.PI/180)}function r_(s,a){const h=hl(a.lat-s.lat),m=hl(a.lng-s.lng),y=Math.sin(h/2)**2+Math.cos(hl(s.lat))*Math.cos(hl(a.lat))*Math.sin(m/2)**2;return 6371*2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y))}function s_(s){const a=Math.round(s/800);return Math.max(2,Math.min(16,a))}const o_=({context:s})=>s.currentHour>=23||s.currentHour<7,a_=({context:s})=>s.timeRemaining<=0,l_=({context:s})=>{const a=s.currentHour>=23?24-s.currentHour+7:7-s.currentHour;return s.timeRemaining<=a},u_=({context:s})=>s.currentCase&&s.cityIndex===s.currentCase.totalCities-1,c_=({context:s})=>s.wrongCity,d_=({context:s})=>s.cityIndex===0,h_=({context:s})=>s.currentCase&&s.cityIndex>=1&&s.cityIndex<s.currentCase.totalCities-1,f_=({context:s})=>{if(!s.currentCase)return!1;const a=s.currentCase.cities[s.cityIndex];return s.spotsUsedInCity<a.investigationSpots},p_=({context:s})=>s.currentCase&&s.cityIndex===s.currentCase.totalCities-1&&s.hadEncounterInCity,m_=({context:s})=>s.currentCase&&s.cityIndex>=1&&s.cityIndex<s.currentCase.totalCities-1&&!s.wrongCity&&!s.hadEncounterInCity,g_=({context:s})=>s.currentCase&&s.cityIndex===s.currentCase.totalCities-1&&!s.hadEncounterInCity,y_=({context:s})=>s.pendingRogueAction&&!s.rogueUsedInCity&&s.encounterQueue.length===0,__=({context:s})=>s.spotsUsedInCity>0&&!s.wrongCity&&!s.hadGoodDeedInCase&&s.goodDeedRoll!==null&&s.goodDeedRoll<.3,v_=({context:s})=>["henchman","assassination"].includes(s.encounterType),x_=({context:s})=>s.encounterType==="goodDeed",w_=({context:s})=>s.encounterType==="apprehension",k_=({context:s})=>s.encounterType==="timeOut",S_=({context:s})=>s.encounterQueue.length>0&&s.encounterQueue[0]==="rogueAction",b_=({context:s,event:a})=>s.availableGadgets.some(u=>u.id===a.gadgetId),C_=({context:s})=>s.availableGadgets.length>0,T_=({context:s})=>!s.warrantIssued,E_=({context:s})=>{var a;return s.warrantIssued&&s.currentCase&&((a=s.selectedWarrant)==null?void 0:a.id)!==s.currentCase.suspect.id},P_=({context:s})=>{var a;return s.warrantIssued&&s.currentCase&&((a=s.selectedWarrant)==null?void 0:a.id)===s.currentCase.suspect.id},N_={isSleepTime:o_,isTimeExpired:a_,sleepWouldCauseTimeout:l_,isFinalCity:u_,isWrongCity:c_,isCity1:d_,isCities2ToNMinus1:h_,hasAvailableSpots:f_,shouldApprehend:p_,shouldHenchman:m_,shouldAssassination:g_,shouldRogueActionAlone:y_,shouldGoodDeed:__,requiresGadgetChoice:v_,isGoodDeed:x_,isApprehension:w_,isTimeOut:k_,hasStackedRogueAction:S_,hasAvailableGadget:b_,hasAnyGadgets:C_,hasNoWarrant:T_,hasWrongWarrant:E_,hasCorrectWarrant:P_},L_=We(({event:s})=>({currentCase:s.caseData,cityIndex:0,currentCityId:s.caseData.cities[0].id,wrongCity:!1,originCityId:null,travelDestination:null,isCorrectPath:null,currentHour:8,timeRemaining:72,investigatedSpots:[],spotsUsedInCity:0,currentSpotIndex:null,hadEncounterInCity:!1,hadGoodDeedInCase:!1,rogueUsedInCity:!1,warrantIssued:!1,selectedWarrant:null,availableGadgets:s.caseData.startingGadgets||[],usedGadgets:[],wounds:0,encounterType:null,encounterQueue:[],encounterChoice:null,witnessClueVariant:null,pendingRogueAction:!1,travelHours:null,goodDeedRoll:null,lastSleepMessage:null,sleepWouldTimeout:!1,debriefOutcome:null})),j_=We(({context:s,event:a})=>({...s,...a.savedContext})),I_=We(({context:s})=>{const a=s.currentHour>=23?24-s.currentHour+7:7-s.currentHour;return{currentHour:7,timeRemaining:s.timeRemaining-a,lastSleepMessage:`You rested for ${a} hours.`}}),M_=We(({context:s})=>{const a=s.travelHours||4;return{currentHour:(s.currentHour+a)%24,timeRemaining:s.timeRemaining-a}}),z_=We(({context:s})=>{const a=[2,4,8][Math.min(s.spotsUsedInCity,2)];return{currentHour:(s.currentHour+a)%24,timeRemaining:s.timeRemaining-a}}),A_=We(({context:s})=>{const a=s.currentHour>=23?24-s.currentHour+7:7-s.currentHour;return{sleepWouldTimeout:s.timeRemaining<=a}}),O_=We(({context:s})=>({lastSleepMessage:`You rested for ${s.currentHour>=23?24-s.currentHour+7:7-s.currentHour} hours.`})),R_=We({goodDeedRoll:()=>Math.random()}),D_=We(({context:s,event:a})=>({travelHours:a.travelHours,travelDestination:a.destinationId,isCorrectPath:a.isCorrectPath,originCityId:s.currentCityId})),B_=We(({context:s})=>s.wrongCity&&s.travelDestination===s.originCityId?{currentCityId:s.travelDestination,wrongCity:!1,travelHours:null,travelDestination:null,isCorrectPath:null}:{cityIndex:s.isCorrectPath?s.cityIndex+1:s.cityIndex,currentCityId:s.travelDestination,wrongCity:!s.isCorrectPath,travelHours:null,travelDestination:null,isCorrectPath:null}),H_=We({hadEncounterInCity:!1,rogueUsedInCity:!1,spotsUsedInCity:0}),Z_=We(({event:s})=>({pendingRogueAction:s.isRogueAction||!1,currentSpotIndex:s.spotIndex})),F_=We(({context:s})=>({investigatedSpots:[...s.investigatedSpots,`${s.currentCityId}:${s.currentSpotIndex}`],spotsUsedInCity:s.spotsUsedInCity+1,currentSpotIndex:null})),U_=We(({context:s})=>({encounterType:"henchman",encounterChoice:"pending",encounterQueue:s.pendingRogueAction?["rogueAction"]:[]})),W_=We(({context:s})=>({encounterType:"assassination",encounterChoice:"pending",encounterQueue:s.pendingRogueAction?["rogueAction"]:[]})),G_=We(({context:s})=>({encounterType:"rogueAction",encounterQueue:[],witnessClueVariant:"rogue",notoriety:s.notoriety+1})),$_=We({encounterType:"goodDeed",encounterQueue:[]}),V_=We({encounterType:"apprehension"}),Y_=We({encounterType:"timeOut"}),q_=We(({event:s})=>({encounterChoice:s.type==="CHOOSE_GADGET"?"gadget":"endure"})),K_=We(({context:s,event:a})=>({usedGadgets:[...s.usedGadgets,a.gadgetId],availableGadgets:s.availableGadgets.filter(u=>u.id!==a.gadgetId)})),Q_=We(({context:s})=>({wounds:s.wounds+1})),X_=We(({context:s})=>({timeRemaining:s.timeRemaining-2,currentHour:(s.currentHour+2)%24})),J_=We(({context:s})=>({karma:s.karma+1})),ev=We({hadGoodDeedInCase:!0}),tv=We(({context:s})=>({encounterType:"rogueAction",encounterQueue:s.encounterQueue.slice(1),witnessClueVariant:"rogue"})),nv=We(({context:s})=>({hadEncounterInCity:["henchman","assassination"].includes(s.encounterType)?!0:s.hadEncounterInCity,rogueUsedInCity:s.encounterType==="rogueAction"?!0:s.rogueUsedInCity})),iv=We({witnessClueVariant:"normal"}),rv=We(({context:s})=>{var u,h;let a;return s.warrantIssued?((u=s.selectedWarrant)==null?void 0:u.id)!==((h=s.currentCase)==null?void 0:h.suspect.id)?a="wrong_warrant":a="success":a="no_warrant",{debriefOutcome:a}}),sv=We({debriefOutcome:"time_out"}),ov=We(({context:s})=>{var a;return s.debriefOutcome==="success"?{solvedCases:[...s.solvedCases,(a=s.currentCase)==null?void 0:a.id],karma:s.karma+5}:{notoriety:s.notoriety+1}}),av=We({encounterType:null,encounterQueue:[],encounterChoice:null,witnessClueVariant:null,pendingRogueAction:!1,currentSpotIndex:null,travelHours:null,travelDestination:null,isCorrectPath:null,goodDeedRoll:null,lastSleepMessage:null,sleepWouldTimeout:!1}),lv=We({currentCase:null,cityIndex:0,currentCityId:null,wrongCity:!1,originCityId:null,investigatedSpots:[],spotsUsedInCity:0,currentSpotIndex:null,hadEncounterInCity:!1,hadGoodDeedInCase:!1,rogueUsedInCity:!1,warrantIssued:!1,selectedWarrant:null,availableGadgets:[],usedGadgets:[],wounds:0,debriefOutcome:null}),uv=({context:s})=>{const a={karma:s.karma,notoriety:s.notoriety,solvedCases:s.solvedCases,...s.currentCase&&{currentCase:s.currentCase,cityIndex:s.cityIndex,currentCityId:s.currentCityId,wrongCity:s.wrongCity,originCityId:s.originCityId,currentHour:s.currentHour,timeRemaining:s.timeRemaining,investigatedSpots:s.investigatedSpots,spotsUsedInCity:s.spotsUsedInCity,hadEncounterInCity:s.hadEncounterInCity,hadGoodDeedInCase:s.hadGoodDeedInCase,rogueUsedInCity:s.rogueUsedInCity,warrantIssued:s.warrantIssued,selectedWarrant:s.selectedWarrant,availableGadgets:s.availableGadgets,usedGadgets:s.usedGadgets,wounds:s.wounds}};try{localStorage.setItem("carmenSandiego_v2_save",JSON.stringify(a))}catch(u){console.error("Failed to save game:",u)}},cv={initializeCase:L_,loadSavedState:j_,advanceTimeToMorning:I_,advanceTimeForTravel:M_,advanceTimeForInvestigation:z_,calculateSleepTimeout:A_,setSleepMessage:O_,rollGoodDeedDice:R_,setTravelDestination:D_,updateLocation:B_,resetCityFlags:H_,setInvestigationParams:Z_,recordInvestigation:F_,setHenchmanEncounter:U_,setAssassinationEncounter:W_,setRogueEncounter:G_,setGoodDeedEncounter:$_,setApprehensionEncounter:V_,setTimeOutEncounter:Y_,setEncounterChoice:q_,useGadget:K_,applyInjury:Q_,applyTimePenalty:X_,increaseKarma:J_,markGoodDeedComplete:ev,popRogueFromQueue:tv,markEncounterComplete:nv,setNormalClue:iv,determineTrialOutcome:rv,setTimeOutOutcome:sv,updateStats:ov,clearTransientState:av,clearCaseState:lv,saveGame:uv},dv=Yy({id:"carmenSandiego",initial:"menu",context:i_,states:{menu:{on:{START_CASE:{target:"briefing",actions:"initializeCase"},LOAD_SAVE:{target:"playing",actions:"loadSavedState"}}},briefing:{on:{ACCEPT_BRIEFING:{target:"playing",actions:"saveGame"}}},playing:{initial:"checkingIdle",states:{checkingIdle:{always:[{target:"encounter",guard:"isTimeExpired",actions:"setTimeOutEncounter"},{target:"sleepWarning",guard:"isSleepTime"},{target:"idle"}]},idle:{entry:["saveGame","clearTransientState"],on:{INVESTIGATE:{target:"investigating",guard:"hasAvailableSpots",actions:["setInvestigationParams","rollGoodDeedDice"]},TRAVEL:{target:"traveling",actions:"setTravelDestination"}}},sleepWarning:{entry:"calculateSleepTimeout",always:[{target:"confirmingSleep",guard:"sleepWouldCauseTimeout"},{target:"sleeping"}]},confirmingSleep:{on:{CONFIRM_SLEEP:"sleeping",CANCEL_SLEEP:"idle"}},sleeping:{entry:["advanceTimeToMorning","setSleepMessage"],on:{WAKE:[{target:"#carmenSandiego.playing.encounter",guard:"isTimeExpired",actions:"setTimeOutEncounter"},{target:"idle"}]}},traveling:{entry:"advanceTimeForTravel",on:{ARRIVE:[{target:"#carmenSandiego.playing.encounter",guard:"isTimeExpired",actions:["updateLocation","setTimeOutEncounter"]},{target:"checkingIdle",actions:["updateLocation","resetCityFlags"]}]}},investigating:{entry:["advanceTimeForInvestigation","recordInvestigation"],always:[{target:"encounter",guard:"shouldApprehend",actions:"setApprehensionEncounter"},{target:"encounter",guard:"shouldHenchman",actions:"setHenchmanEncounter"},{target:"encounter",guard:"shouldAssassination",actions:"setAssassinationEncounter"},{target:"encounter",guard:"shouldRogueActionAlone",actions:"setRogueEncounter"},{target:"encounter",guard:"shouldGoodDeed",actions:"setGoodDeedEncounter"},{target:"witnessClue",actions:"setNormalClue"}]},encounter:{initial:"presenting",states:{presenting:{always:[{target:"choosingAction",guard:"requiresGadgetChoice"},{target:"choosingGoodDeed",guard:"isGoodDeed"},{target:"resolving"}]},choosingAction:{on:{CHOOSE_GADGET:{target:"resolving",guard:"hasAvailableGadget",actions:["useGadget","setEncounterChoice"]},CHOOSE_ENDURE:{target:"resolving",actions:["applyInjury","applyTimePenalty","setEncounterChoice"]}}},choosingGoodDeed:{on:{HELP_NPC:{target:"resolving",actions:["increaseKarma","markGoodDeedComplete"]},IGNORE_NPC:{target:"resolving",actions:"markGoodDeedComplete"}}},resolving:{on:{RESOLVE_ENCOUNTER:[{target:"#carmenSandiego.playing.encounter",guard:"hasStackedRogueAction",actions:"popRogueFromQueue"},{target:"#carmenSandiego.apprehended",guard:"isApprehension",actions:"saveGame"},{target:"#carmenSandiego.debrief",guard:"isTimeOut",actions:"setTimeOutOutcome"},{target:"#carmenSandiego.playing.witnessClue",actions:"markEncounterComplete"}]}}}},witnessClue:{on:{CONTINUE:{target:"checkingIdle"}}}}},apprehended:{entry:"saveGame",on:{PROCEED_TO_TRIAL:"trial"}},trial:{entry:["determineTrialOutcome","saveGame"],on:{COMPLETE_TRIAL:"debrief"}},debrief:{entry:["updateStats","saveGame"],on:{RETURN_TO_MENU:{target:"menu",actions:"clearCaseState"}}}}},{guards:N_,actions:cv}),hv="carmenSandiego_v2_save";function Rf(){try{const s=localStorage.getItem(hv);if(s)return JSON.parse(s)}catch(s){console.error("Failed to load saved game:",s)}return null}function fv(){const s=Rf();return s!==null&&s.currentCase!==null}const Df=P.createContext(null);function pv({children:s}){const[a,u,h]=n_(dv),m=P.useMemo(()=>({state:a,context:a.context,isMenu:a.matches("menu"),isBriefing:a.matches("briefing"),isPlaying:a.matches("playing"),isApprehended:a.matches("apprehended"),isTrial:a.matches("trial"),isDebrief:a.matches("debrief"),isIdle:a.matches("playing.idle"),isTraveling:a.matches("playing.traveling"),isInvestigating:a.matches("playing.investigating"),isEncounter:a.matches("playing.encounter"),isWitnessClue:a.matches("playing.witnessClue"),isSleeping:a.matches("playing.sleeping"),isConfirmingSleep:a.matches("playing.confirmingSleep"),isChoosingAction:a.matches("playing.encounter.choosingAction"),isChoosingGoodDeed:a.matches("playing.encounter.choosingGoodDeed"),isResolvingEncounter:a.matches("playing.encounter.resolving"),send:u,startCase:y=>u({type:"START_CASE",caseData:y}),loadSave:()=>{const y=Rf();y&&u({type:"LOAD_SAVE",savedContext:y})},acceptBriefing:()=>u({type:"ACCEPT_BRIEFING"}),travel:(y,v,x)=>{const w=r_(v,y),S=s_(w);u({type:"TRAVEL",destinationId:y.id,travelHours:S,isCorrectPath:x})},arrive:()=>u({type:"ARRIVE"}),investigate:(y,v=!1)=>u({type:"INVESTIGATE",spotIndex:y,isRogueAction:v}),chooseGadget:y=>u({type:"CHOOSE_GADGET",gadgetId:y}),chooseEndure:()=>u({type:"CHOOSE_ENDURE"}),helpNpc:()=>u({type:"HELP_NPC"}),ignoreNpc:()=>u({type:"IGNORE_NPC"}),resolveEncounter:()=>u({type:"RESOLVE_ENCOUNTER"}),continueAfterClue:()=>u({type:"CONTINUE"}),wake:()=>u({type:"WAKE"}),confirmSleep:()=>u({type:"CONFIRM_SLEEP"}),cancelSleep:()=>u({type:"CANCEL_SLEEP"}),proceedToTrial:()=>u({type:"PROCEED_TO_TRIAL"}),completeTrial:()=>u({type:"COMPLETE_TRIAL"}),returnToMenu:()=>u({type:"RETURN_TO_MENU"}),service:h,hasSavedGame:fv()}),[a,u,h]);return f.jsx(Df.Provider,{value:m,children:s})}function mv(){const s=P.useContext(Df);if(!s)throw new Error("useGameMachine must be used within a GameMachineProvider");return s}const gv={id:"test-case-1",name:"Test Case",suspect:{id:"carmen",name:"Carmen Sandiego",description:"Master thief",traits:["red coat","dark hair"]},cities:[{id:"paris",name:"Paris",lat:48.8566,lng:2.3522,investigationSpots:3,correctDestination:"london",wrongDestinations:["berlin"]},{id:"london",name:"London",lat:51.5074,lng:-.1278,investigationSpots:3,correctDestination:"tokyo",wrongDestinations:["moscow"]},{id:"tokyo",name:"Tokyo",lat:35.6762,lng:139.6503,investigationSpots:3,correctDestination:null,wrongDestinations:[]}],totalCities:3,startingGadgets:[{id:"gadget-1",name:"Smoke Bomb",description:"Escape tool",singleUse:!0}]};function yv(){var _e,we;const{state:s,context:a,isMenu:u,isBriefing:h,isPlaying:m,isIdle:y,isTraveling:v,isInvestigating:x,isEncounter:w,isWitnessClue:S,isSleeping:M,isApprehended:T,isTrial:b,isDebrief:z,startCase:A,acceptBriefing:O,investigate:W,travel:Q,arrive:$,chooseGadget:ee,chooseEndure:ue,helpNpc:Pe,ignoreNpc:oe,resolveEncounter:Te,continueAfterClue:je,wake:Ue,proceedToTrial:Oe,completeTrial:te,returnToMenu:J}=mv(),ve=typeof s.value=="string"?s.value:JSON.stringify(s.value,null,2);return f.jsxs("div",{className:"fixed bottom-4 right-4 bg-black/90 text-white p-4 rounded-lg max-w-md max-h-96 overflow-auto text-xs font-mono z-50",children:[f.jsx("h3",{className:"font-bold text-yellow-400 mb-2",children:"State Machine Debug"}),f.jsxs("div",{className:"mb-3",children:[f.jsx("div",{className:"text-gray-400",children:"Current State:"}),f.jsx("pre",{className:"text-green-400 whitespace-pre-wrap",children:ve})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("div",{className:"text-gray-400",children:"Context:"}),f.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[f.jsxs("span",{children:["Time: ",a.currentHour,":00"]}),f.jsxs("span",{children:["Remaining: ",a.timeRemaining,"h"]}),f.jsxs("span",{children:["City: ",a.currentCityId||"none"]}),f.jsxs("span",{children:["Index: ",a.cityIndex]}),f.jsxs("span",{children:["Wrong City: ",a.wrongCity?"yes":"no"]}),f.jsxs("span",{children:["Spots Used: ",a.spotsUsedInCity]}),f.jsxs("span",{children:["Encounter: ",a.encounterType||"none"]}),f.jsxs("span",{children:["Clue Variant: ",a.witnessClueVariant||"none"]})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-gray-400",children:"Actions:"}),u&&f.jsx("button",{onClick:()=>A(gv),className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Start Test Case"}),h&&f.jsx("button",{onClick:O,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Accept Briefing"}),y&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>W(0),className:"bg-green-600 px-2 py-1 rounded mr-1",children:"Investigate (0)"}),f.jsx("button",{onClick:()=>W(0,!0),className:"bg-purple-600 px-2 py-1 rounded mr-1",children:"Rogue Action"}),((we=(_e=a.currentCase)==null?void 0:_e.cities[a.cityIndex])==null?void 0:we.correctDestination)&&f.jsx("button",{onClick:()=>{const xe=a.currentCase.cities[a.cityIndex],Le=a.currentCase.cities.find(F=>F.id===xe.correctDestination);Le&&Q(Le,xe,!0)},className:"bg-yellow-600 px-2 py-1 rounded mr-1",children:"Travel (Correct)"})]}),v&&f.jsx("button",{onClick:$,className:"bg-orange-600 px-2 py-1 rounded mr-1",children:"Arrive"}),w&&a.encounterType==="henchman"&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>ee("gadget-1"),className:"bg-cyan-600 px-2 py-1 rounded mr-1",children:"Use Gadget"}),f.jsx("button",{onClick:ue,className:"bg-red-600 px-2 py-1 rounded mr-1",children:"Endure"})]}),w&&a.encounterType==="goodDeed"&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:Pe,className:"bg-green-600 px-2 py-1 rounded mr-1",children:"Help NPC"}),f.jsx("button",{onClick:oe,className:"bg-gray-600 px-2 py-1 rounded mr-1",children:"Ignore"})]}),w&&["rogueAction","apprehension","timeOut"].includes(a.encounterType)&&f.jsx("button",{onClick:Te,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Resolve Encounter"}),S&&f.jsx("button",{onClick:je,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Continue"}),M&&f.jsx("button",{onClick:Ue,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Wake Up"}),T&&f.jsx("button",{onClick:Oe,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Proceed to Trial"}),b&&f.jsx("button",{onClick:te,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Complete Trial"}),z&&f.jsx("button",{onClick:J,className:"bg-blue-600 px-2 py-1 rounded mr-1",children:"Return to Menu"})]}),f.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Flags: hadEncounter=",a.hadEncounterInCity?"1":"0",", goodDeed=",a.hadGoodDeedInCase?"1":"0",", rogue=",a.rogueUsedInCity?"1":"0"]})]})}function _v(){const s=P.useMemo(()=>qp(),[]);return f.jsxs(pv,{children:[f.jsx(Ag,{gameData:s}),f.jsx(Zg,{}),f.jsx(yv,{})]})}Ep.createRoot(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(_v,{})}));
